<nav class="main-navigation" 
     role="navigation" 
     aria-label="Navegação principal"
     [class.nav-open]="isNavOpen">
  
  <!-- Skip links para acessibilidade -->
  <div class="skip-links">
    <a href="#main-content" class="skip-link">Pular para o conteúdo principal</a>
    <a href="#navigation" class="skip-link">Pular para a navegação</a>
  </div>
  
  <!-- Header da navegação -->
  <div class="nav-header">
    <div class="nav-brand">
      <a href="/" class="brand-link" aria-label="Página inicial">
        <div class="brand-logo">
          <img src="assets/logo.png" alt="Logo" width="32" height="32">
        </div>
        <span class="brand-text">Sistema</span>
      </a>
    </div>
    
    <!-- Toggle para mobile -->
    <button class="nav-toggle" 
            type="button"
            [attr.aria-expanded]="isNavOpen"
            aria-controls="navigation-menu"
            aria-label="Alternar menu de navegação"
            (click)="toggleNavigation()"
            (keydown.enter)="toggleNavigation()"
            (keydown.space)="toggleNavigation()">
      <span class="toggle-icon">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
      </span>
    </button>
  </div>
  
  <!-- Menu de navegação -->
  <div class="nav-menu" 
       id="navigation-menu"
       [attr.aria-hidden]="!isNavOpen">
    
    <!-- Links principais -->
    <ul class="nav-list" role="menubar">
      <li class="nav-item" role="none">
        <a class="nav-link" 
           routerLink="/dashboard" 
           routerLinkActive="active"
           role="menuitem"
           tabindex="0"
           [attr.aria-current]="isCurrentPage('/dashboard') ? 'page' : null">
          <span class="nav-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M13,3V9H21V3M13,21H21V11H13M3,21H11V15H3M3,13H11V3H3V13Z"/>
            </svg>
          </span>
          <span class="nav-text">Dashboard</span>
        </a>
      </li>
      
      <li class="nav-item" role="none">
        <a class="nav-link" 
           routerLink="/chamados" 
           routerLinkActive="active"
           role="menuitem"
           tabindex="0"
           [attr.aria-current]="isCurrentPage('/chamados') ? 'page' : null">
          <span class="nav-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19,5V7H15V5H19M9,5V11H5V5H9M19,13V19H15V13H19M9,17V19H5V17H9M21,3H13V9H21V3M11,3H3V13H11V3M21,11H13V21H21V11M11,15H3V21H11V15Z"/>
            </svg>
          </span>
          <span class="nav-text">Chamados</span>
          <span class="nav-badge" *ngIf="pendingTickets > 0" [attr.aria-label]="pendingTickets + ' chamados pendentes'">
            {{ pendingTickets }}
          </span>
        </a>
      </li>
      
      <li class="nav-item" role="none">
        <a class="nav-link" 
           routerLink="/relatorios" 
           routerLinkActive="active"
           role="menuitem"
           tabindex="0"
           [attr.aria-current]="isCurrentPage('/relatorios') ? 'page' : null">
          <span class="nav-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
            </svg>
          </span>
          <span class="nav-text">Relatórios</span>
        </a>
      </li>
      
      <li class="nav-item" role="none">
        <a class="nav-link" 
           routerLink="/ativos" 
           routerLinkActive="active"
           role="menuitem"
           tabindex="0"
           [attr.aria-current]="isCurrentPage('/ativos') ? 'page' : null">
          <span class="nav-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M4,1H20A1,1 0 0,1 21,2V6A1,1 0 0,1 20,7H4A1,1 0 0,1 3,6V2A1,1 0 0,1 4,1M4,9H20A1,1 0 0,1 21,10V14A1,1 0 0,1 20,15H4A1,1 0 0,1 3,14V10A1,1 0 0,1 4,9M4,17H20A1,1 0 0,1 21,18V22A1,1 0 0,1 20,23H4A1,1 0 0,1 3,22V18A1,1 0 0,1 4,17Z"/>
            </svg>
          </span>
          <span class="nav-text">Ativos</span>
        </a>
      </li>
    </ul>
    
    <!-- Seção do usuário -->
    <div class="nav-user">
      <div class="user-info">
        <div class="user-avatar" [attr.aria-label]="'Avatar de ' + currentUser.name">
          <img [src]="currentUser.avatar" 
               [alt]="'Foto de ' + currentUser.name"
               *ngIf="currentUser.avatar; else defaultAvatar">
          <ng-template #defaultAvatar>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
            </svg>
          </ng-template>
        </div>
        <div class="user-details">
          <span class="user-name">{{ currentUser.name }}</span>
          <span class="user-role">{{ currentUser.role }}</span>
        </div>
      </div>
      
      <!-- Menu do usuário -->
      <div class="user-menu" [class.menu-open]="isUserMenuOpen">
        <button class="user-menu-toggle" 
                type="button"
                [attr.aria-expanded]="isUserMenuOpen"
                aria-controls="user-menu-dropdown"
                aria-label="Menu do usuário"
                (click)="toggleUserMenu()"
                (keydown.enter)="toggleUserMenu()"
                (keydown.space)="toggleUserMenu()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M7,10L12,15L17,10H7Z"/>
          </svg>
        </button>
        
        <div class="user-menu-dropdown" 
             id="user-menu-dropdown"
             role="menu"
             [attr.aria-hidden]="!isUserMenuOpen">
          <button class="menu-item" 
                  role="menuitem"
                  (click)="openProfile()"
                  tabindex="0">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
            </svg>
            Perfil
          </button>
          
          <button class="menu-item" 
                  role="menuitem"
                  (click)="openSettings()"
                  tabindex="0">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
            </svg>
            Configurações
          </button>
          
          <hr class="menu-divider" role="separator">
          
          <button class="menu-item menu-item-danger" 
                  role="menuitem"
                  (click)="logout()"
                  tabindex="0">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M16,17V14H9V10H16V7L21,12L16,17M14,2A2,2 0 0,1 16,4V6H14V4H5V20H14V18H16V20A2,2 0 0,1 14,22H5A2,2 0 0,1 3,20V4A2,2 0 0,1 5,2H14Z"/>
            </svg>
            Sair
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Overlay para mobile -->
  <div class="nav-overlay" 
       *ngIf="isNavOpen"
       (click)="closeNavigation()"
       aria-hidden="true"></div>
</nav>

<!-- Breadcrumb -->
<nav class="breadcrumb-nav" 
     aria-label="Breadcrumb"
     *ngIf="breadcrumbs.length > 0">
  <ol class="breadcrumb-list">
    <li class="breadcrumb-item" *ngFor="let crumb of breadcrumbs; let last = last">
      <a [routerLink]="crumb.url" 
         *ngIf="!last; else currentPage"
         class="breadcrumb-link">
        {{ crumb.label }}
      </a>
      <ng-template #currentPage>
        <span class="breadcrumb-current" aria-current="page">
          {{ crumb.label }}
        </span>
      </ng-template>
      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" 
           class="breadcrumb-separator" 
           *ngIf="!last"
           aria-hidden="true">
        <path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"/>
      </svg>
    </li>
  </ol>
</nav>

<!-- Anúncios para leitores de tela -->
<div class="sr-only" aria-live="polite" id="navigation-announcements"></div>
