var JP=Object.create;var yp=Object.defineProperty,XP=Object.defineProperties,ex=Object.getOwnPropertyDescriptor,tx=Object.getOwnPropertyDescriptors,nx=Object.getOwnPropertyNames,Yw=Object.getOwnPropertySymbols,Jw=Object.getPrototypeOf,Xw=Object.prototype.hasOwnProperty,rx=Object.prototype.propertyIsEnumerable,ix=Reflect.get;var Zw=(t,e,n)=>e in t?yp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||={})Xw.call(e,n)&&Zw(t,n,e[n]);if(Yw)for(var n of Yw(e))rx.call(e,n)&&Zw(t,n,e[n]);return t},_e=(t,e)=>XP(t,tx(e));var x3=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ox=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of nx(e))!Xw.call(t,i)&&i!==n&&yp(t,i,{get:()=>e[i],enumerable:!(r=ex(e,i))||r.enumerable});return t};var k3=(t,e,n)=>(n=t!=null?JP(Jw(t)):{},ox(e||!t||!t.__esModule?yp(n,"default",{value:t,enumerable:!0}):n,t));var Nr=(t,e,n)=>ix(Jw(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});function Z(t){return typeof t=="function"}function bo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var xu=bo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ii(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Pe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Z(r))try{r()}catch(o){e=o instanceof xu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{eT(o)}catch(s){e=e??[],s instanceof xu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new xu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)eT(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ii(n,e)}remove(e){let{_finalizers:n}=this;n&&Ii(n,e),e instanceof t&&e._removeParent(this)}};Pe.EMPTY=(()=>{let t=new Pe;return t.closed=!0,t})();var vp=Pe.EMPTY;function ku(t){return t instanceof Pe||t&&"closed"in t&&Z(t.remove)&&Z(t.add)&&Z(t.unsubscribe)}function eT(t){Z(t)?t():t.unsubscribe()}var en={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Co={setTimeout(t,e,...n){let{delegate:r}=Co;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Co;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ou(t){Co.setTimeout(()=>{let{onUnhandledError:e}=en;if(e)e(t);else throw t})}function Ea(){}var tT=_p("C",void 0,void 0);function nT(t){return _p("E",void 0,t)}function rT(t){return _p("N",t,void 0)}function _p(t,e,n){return{kind:t,value:e,error:n}}var Ei=null;function So(t){if(en.useDeprecatedSynchronousErrorHandling){let e=!Ei;if(e&&(Ei={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Ei;if(Ei=null,n)throw r}}else t()}function iT(t){en.useDeprecatedSynchronousErrorHandling&&Ei&&(Ei.errorThrown=!0,Ei.error=t)}var wi=class extends Pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ku(e)&&e.add(this)):this.destination=cx}static create(e,n,r){return new Ao(e,n,r)}next(e){this.isStopped?Ep(rT(e),this):this._next(e)}error(e){this.isStopped?Ep(nT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ep(tT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},sx=Function.prototype.bind;function Ip(t,e){return sx.call(t,e)}var wp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Fu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Fu(r)}else Fu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Fu(n)}}},Ao=class extends wi{constructor(e,n,r){super();let i;if(Z(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&en.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ip(e.next,o),error:e.error&&Ip(e.error,o),complete:e.complete&&Ip(e.complete,o)}):i=e}this.destination=new wp(i)}};function Fu(t){en.useDeprecatedSynchronousErrorHandling?iT(t):Ou(t)}function ax(t){throw t}function Ep(t,e){let{onStoppedNotification:n}=en;n&&Co.setTimeout(()=>n(t,e))}var cx={closed:!0,next:Ea,error:ax,complete:Ea};var Ro=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Lt(t){return t}function Lu(...t){return Tp(t)}function Tp(t){return t.length===0?Lt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var J=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=lx(n)?n:new Ao(n,r,i);return So(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=oT(r),new r((i,o)=>{let s=new Ao({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ro](){return this}pipe(...n){return Tp(n)(this)}toPromise(n){return n=oT(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function oT(t){var e;return(e=t??en.Promise)!==null&&e!==void 0?e:Promise}function ux(t){return t&&Z(t.next)&&Z(t.error)&&Z(t.complete)}function lx(t){return t&&t instanceof wi||ux(t)&&ku(t)}var sT=bo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Qe=(()=>{class t extends J{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Vu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new sT}next(n){So(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){So(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){So(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?vp:(this.currentObservers=null,o.push(n),new Pe(()=>{this.currentObservers=null,Ii(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new J;return n.source=this,n}}return t.create=(e,n)=>new Vu(e,n),t})(),Vu=class extends Qe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:vp}};function Dp(t){return Z(t?.lift)}function he(t){return e=>{if(Dp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new bp(t,e,n,r,i)}var bp=class extends wi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function X(t,e){return he((n,r)=>{let i=0;n.subscribe(ue(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:dx}=Array,{getPrototypeOf:hx,prototype:fx,keys:px}=Object;function ju(t){if(t.length===1){let e=t[0];if(dx(e))return{args:e,keys:null};if(gx(e)){let n=px(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function gx(t){return t&&typeof t=="object"&&hx(t)===fx}function Cp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function cT(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function aT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ti(t){return this instanceof Ti?(this.v=t,this):new Ti(t)}function uT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(w){return Promise.resolve(w).then(y,p)}}function a(y,w){r[y]&&(i[y]=function(A){return new Promise(function(R,O){o.push([y,A,R,O])>1||u(y,A)})},w&&(i[y]=w(i[y])))}function u(y,w){try{l(r[y](w))}catch(A){g(o[0][3],A)}}function l(y){y.value instanceof Ti?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,w){y(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}function lT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof aT=="function"?aT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Uu=t=>t&&typeof t.length=="number"&&typeof t!="function";function Bu(t){return Z(t?.then)}function $u(t){return Z(t[Ro])}function Hu(t){return Symbol.asyncIterator&&Z(t?.[Symbol.asyncIterator])}function zu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function mx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var qu=mx();function Wu(t){return Z(t?.[qu])}function Gu(t){return uT(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ti(n.read());if(i)return yield Ti(void 0);yield yield Ti(r)}}finally{n.releaseLock()}})}function Ku(t){return Z(t?.getReader)}function Ue(t){if(t instanceof J)return t;if(t!=null){if($u(t))return yx(t);if(Uu(t))return vx(t);if(Bu(t))return _x(t);if(Hu(t))return dT(t);if(Wu(t))return Ix(t);if(Ku(t))return Ex(t)}throw zu(t)}function yx(t){return new J(e=>{let n=t[Ro]();if(Z(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function vx(t){return new J(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function _x(t){return new J(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ou)})}function Ix(t){return new J(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function dT(t){return new J(e=>{wx(t,e).catch(n=>e.error(n))})}function Ex(t){return dT(Gu(t))}function wx(t,e){var n,r,i,o;return cT(this,void 0,void 0,function*(){try{for(n=lT(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Tt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Mr(t,e=0){return he((n,r)=>{n.subscribe(ue(r,i=>Tt(r,t,()=>r.next(i),e),()=>Tt(r,t,()=>r.complete(),e),i=>Tt(r,t,()=>r.error(i),e)))})}function Pr(t,e=0){return he((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function hT(t,e){return Ue(t).pipe(Pr(e),Mr(e))}function fT(t,e){return Ue(t).pipe(Pr(e),Mr(e))}function pT(t,e){return new J(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function gT(t,e){return new J(n=>{let r;return Tt(n,e,()=>{r=t[qu](),Tt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>Z(r?.return)&&r.return()})}function Qu(t,e){if(!t)throw new Error("Iterable cannot be null");return new J(n=>{Tt(n,e,()=>{let r=t[Symbol.asyncIterator]();Tt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function mT(t,e){return Qu(Gu(t),e)}function yT(t,e){if(t!=null){if($u(t))return hT(t,e);if(Uu(t))return pT(t,e);if(Bu(t))return fT(t,e);if(Hu(t))return Qu(t,e);if(Wu(t))return gT(t,e);if(Ku(t))return mT(t,e)}throw zu(t)}function Te(t,e){return e?yT(t,e):Ue(t)}var{isArray:Tx}=Array;function Dx(t,e){return Tx(e)?t(...e):t(e)}function Yu(t){return X(e=>Dx(t,e))}function vT(t){return t&&Z(t.schedule)}function _T(t){return t[t.length-1]}function Zu(t){return Z(_T(t))?t.pop():void 0}function xr(t){return vT(_T(t))?t.pop():void 0}function Ju(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function wa(...t){let e=xr(t),n=Zu(t),{args:r,keys:i}=ju(t);if(r.length===0)return Te([],e);let o=new J(bx(r,e,i?s=>Ju(i,s):Lt));return n?o.pipe(Yu(n)):o}function bx(t,e,n=Lt){return r=>{IT(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)IT(e,()=>{let l=Te(t[u],e),h=!1;l.subscribe(ue(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function IT(t,e,n){t?Tt(n,t,e):e()}function Xu(t){return he((e,n)=>{Ue(t).subscribe(ue(n,()=>n.complete(),Ea)),!n.closed&&e.subscribe(n)})}function No(){return he((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Mo=class extends J{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Dp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pe;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pe.EMPTY)}return e}refCount(){return No()(this)}};var st=class extends Qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Sp={now(){return(Sp.delegate||Date).now()},delegate:void 0};var el=class extends Pe{constructor(e,n){super()}schedule(e,n=0){return this}};var Ta={setInterval(t,e,...n){let{delegate:r}=Ta;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ta;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Po=class extends el{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Ta.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ta.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ii(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var xo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};xo.now=Sp.now;var ko=class extends xo{constructor(e,n=xo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Ap=new ko(Po);var tl=class extends Po{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var nl=class extends ko{};var Rp=new nl(tl);var Dt=new J(t=>t.complete());function z(...t){let e=xr(t);return Te(t,e)}function Oo(t,e){let n=Z(t)?t:()=>t,r=i=>i.error(n());return new J(e?i=>e.schedule(r,0,i):r)}function Np(t){return!!t&&(t instanceof J||Z(t.lift)&&Z(t.subscribe))}var Gn=bo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ET(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=A=>l<r?w(A):u.push(A),w=A=>{o&&e.next(A),l++;let R=!1;Ue(n(A,h++)).subscribe(ue(e,O=>{i?.(O),o?y(O):e.next(O)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let O=u.shift();s?Tt(e,s,()=>w(O)):w(O)}g()}catch(O){e.error(O)}}))};return t.subscribe(ue(e,y,()=>{p=!0,g()})),()=>{a?.()}}function Fe(t,e,n=1/0){return Z(e)?Fe((r,i)=>X((o,s)=>e(r,o,i,s))(Ue(t(r,i))),n):(typeof e=="number"&&(n=e),he((r,i)=>ET(r,i,t,n)))}function kr(t=1/0){return Fe(Lt,t)}function wT(){return kr(1)}function Fo(...t){return wT()(Te(t,xr(t)))}function rl(t){return new J(e=>{Ue(t()).subscribe(e)})}function Cx(...t){let e=Zu(t),{args:n,keys:r}=ju(t),i=new J(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Ue(n[h]).subscribe(ue(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Ju(r,a):a),o.complete())}))}});return e?i.pipe(Yu(e)):i}function ht(t,e){return he((n,r)=>{let i=0;n.subscribe(ue(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Kn(t){return he((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ue(n,void 0,void 0,s=>{o=Ue(t(s,Kn(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function TT(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ue(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function yn(t,e){return Z(e)?Fe(t,e,1):Fe(t,1)}function Or(t){return he((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Qn(t){return t<=0?()=>Dt:he((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function il(t=Sx){return he((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Sx(){return new Gn}function Di(t){return he((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Yn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ht((i,o)=>t(i,o,r)):Lt,Qn(1),n?Or(e):il(()=>new Gn))}function Lo(t){return t<=0?()=>Dt:he((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Mp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ht((i,o)=>t(i,o,r)):Lt,Lo(1),n?Or(e):il(()=>new Gn))}function ol(t,e){return he(TT(t,e,arguments.length>=2,!0))}function sl(...t){let e=xr(t);return he((n,r)=>{(e?Fo(t,n,e):Fo(t,n)).subscribe(r)})}function bt(t,e){return he((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ue(r,u=>{i?.unsubscribe();let l=0,h=o++;Ue(t(u,h)).subscribe(i=ue(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function at(t,e,n){let r=Z(t)||e||n?{next:t,error:e,complete:n}:t;return r?he((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Lt}function Op(t,e){return Object.is(t,e)}var Ye=null,al=!1,Fp=1,Gt=Symbol("SIGNAL");function se(t){let e=Ye;return Ye=t,e}function Lp(){return Ye}var ba={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ca(t){if(al)throw new Error("");if(Ye===null)return;Ye.consumerOnSignalRead(t);let e=Ye.nextProducerIndex++;if(dl(Ye),e<Ye.producerNode.length&&Ye.producerNode[e]!==t&&Da(Ye)){let n=Ye.producerNode[e];ll(n,Ye.producerIndexOfThis[e])}Ye.producerNode[e]!==t&&(Ye.producerNode[e]=t,Ye.producerIndexOfThis[e]=Da(Ye)?bT(t,Ye,e):0),Ye.producerLastReadVersion[e]=t.version}function DT(){Fp++}function Vp(t){if(!(Da(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Fp)){if(!t.producerMustRecompute(t)&&!$p(t)){kp(t);return}t.producerRecomputeValue(t),kp(t)}}function jp(t){if(t.liveConsumerNode===void 0)return;let e=al;al=!0;try{for(let n of t.liveConsumerNode)n.dirty||Ax(n)}finally{al=e}}function Up(){return Ye?.consumerAllowSignalWrites!==!1}function Ax(t){t.dirty=!0,jp(t),t.consumerMarkedDirty?.(t)}function kp(t){t.dirty=!1,t.lastCleanEpoch=Fp}function ul(t){return t&&(t.nextProducerIndex=0),se(t)}function Bp(t,e){if(se(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Da(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)ll(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function $p(t){dl(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Vp(n),r!==n.version))return!0}return!1}function Hp(t){if(dl(t),Da(t))for(let e=0;e<t.producerNode.length;e++)ll(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function bT(t,e,n){if(CT(t),t.liveConsumerNode.length===0&&ST(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=bT(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function ll(t,e){if(CT(t),t.liveConsumerNode.length===1&&ST(t))for(let r=0;r<t.producerNode.length;r++)ll(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];dl(i),i.producerIndexOfThis[r]=e}}function Da(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function dl(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function CT(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function ST(t){return t.producerNode!==void 0}function zp(t,e){let n=Object.create(Rx);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Vp(n),Ca(n),n.value===cl)throw n.error;return n.value};return r[Gt]=n,r}var Pp=Symbol("UNSET"),xp=Symbol("COMPUTING"),cl=Symbol("ERRORED"),Rx=_e(L({},ba),{value:Pp,dirty:!0,error:null,equal:Op,kind:"computed",producerMustRecompute(t){return t.value===Pp||t.value===xp},producerRecomputeValue(t){if(t.value===xp)throw new Error("Detected cycle in computations.");let e=t.value;t.value=xp;let n=ul(t),r,i=!1;try{r=t.computation(),se(null),i=e!==Pp&&e!==cl&&r!==cl&&t.equal(e,r)}catch(o){r=cl,t.error=o}finally{Bp(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function Nx(){throw new Error}var AT=Nx;function RT(t){AT(t)}function qp(t){AT=t}var Mx=null;function Wp(t,e){let n=Object.create(hl);n.value=t,e!==void 0&&(n.equal=e);let r=()=>(Ca(n),n.value);return r[Gt]=n,r}function Sa(t,e){Up()||RT(t),t.equal(t.value,e)||(t.value=e,Px(t))}function Gp(t,e){Up()||RT(t),Sa(t,e(t.value))}var hl=_e(L({},ba),{equal:Op,value:void 0,kind:"signal"});function Px(t){t.version++,DT(),jp(t),Mx?.()}function Kp(t){let e=se(null);try{return t()}finally{se(e)}}var Qp;function Aa(){return Qp}function Zn(t){let e=Qp;return Qp=t,e}var fl=Symbol("NotFound");var mD="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,n){super(am(e,n)),this.code=e}};function Fx(t){return`NG0${Math.abs(t)}`}function am(t,e){return`${Fx(t)}${e?": "+e:""}`}var yD=Symbol("InputSignalNode#UNSET"),Lx=_e(L({},hl),{transformFn:void 0,applyValueToInputSignal(t,e){Sa(t,e)}});function vD(t,e){let n=Object.create(Lx);n.value=t,n.transformFn=e?.transform;function r(){if(Ca(n),n.value===yD){let i=null;throw new j(-950,i)}return n.value}return r[Gt]=n,r}function ja(t){return{toString:t}.toString()}var pl="__parameters__";function Vx(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function _D(t,e,n){return ja(()=>{let r=Vx(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(pl)?u[pl]:Object.defineProperty(u,pl,{value:[]})[pl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Ci=globalThis;function De(t){for(let e in t)if(t[e]===De)return e;throw Error("Could not find renamed property on target object.")}function jx(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function At(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(At).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function lg(t,e){return t?e?`${t} ${e}`:t:e||""}var Ux=De({__forward_ref__:De});function ID(t){return t.__forward_ref__=ID,t.toString=function(){return At(this())},t}function It(t){return ED(t)?t():t}function ED(t){return typeof t=="function"&&t.hasOwnProperty(Ux)&&t.__forward_ref__===ID}function $(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Bi(t){return{providers:t.providers||[],imports:t.imports||[]}}function Kl(t){return NT(t,TD)||NT(t,DD)}function wD(t){return Kl(t)!==null}function NT(t,e){return t.hasOwnProperty(e)?t[e]:null}function Bx(t){let e=t&&(t[TD]||t[DD]);return e||null}function MT(t){return t&&(t.hasOwnProperty(PT)||t.hasOwnProperty($x))?t[PT]:null}var TD=De({\u0275prov:De}),PT=De({\u0275inj:De}),DD=De({ngInjectableDef:De}),$x=De({ngInjectorDef:De}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=$({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function bD(t){return t&&!!t.\u0275providers}var Hx=De({\u0275cmp:De}),zx=De({\u0275dir:De}),qx=De({\u0275pipe:De}),Wx=De({\u0275mod:De}),Tl=De({\u0275fac:De}),Pa=De({__NG_ELEMENT_ID__:De}),xT=De({__NG_ENV_ID__:De});function Jn(t){return typeof t=="string"?t:t==null?"":String(t)}function Gx(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Jn(t)}function CD(t,e){throw new j(-200,t)}function cm(t,e){throw new j(-201,!1)}var re=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(re||{}),dg;function SD(){return dg}function Ct(t){let e=dg;return dg=t,e}function AD(t,e,n){let r=Kl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&re.Optional)return null;if(e!==void 0)return e;cm(t,"Injector")}var Kx={},Si=Kx,hg="__NG_DI_FLAG__",Dl=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=n;return this.injector.get(e,r.optional?fl:Si,r)}},bl="ngTempTokenPath",Qx="ngTokenPath",Yx=/\n/gm,Zx="\u0275",kT="__source";function Jx(t,e=re.Default){if(Aa()===void 0)throw new j(-203,!1);if(Aa()===null)return AD(t,void 0,e);{let n=Aa(),r;return n instanceof Dl?r=n.injector:r=n,r.get(t,e&re.Optional?null:void 0,e)}}function q(t,e=re.Default){return(SD()||Jx)(It(t),e)}function P(t,e=re.Default){return q(t,Ql(e))}function Ql(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function fg(t){let e=[];for(let n=0;n<t.length;n++){let r=It(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=re.Default;for(let s=0;s<r.length;s++){let a=r[s],u=Xx(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(q(i,o))}else e.push(q(r))}return e}function RD(t,e){return t[hg]=e,t.prototype[hg]=e,t}function Xx(t){return t[hg]}function ek(t,e,n,r){let i=t[bl];throw e[kT]&&i.unshift(e[kT]),t.message=tk(`
`+t.message,i,n,r),t[Qx]=i,t[bl]=null,t}function tk(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Zx?t.slice(2):t;let i=At(e);if(Array.isArray(e))i=e.map(At).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):At(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Yx,`
  `)}`}var jt=RD(_D("Optional"),8);var nk=RD(_D("SkipSelf"),4);function Ri(t,e){let n=t.hasOwnProperty(Tl);return n?t[Tl]:null}function rk(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function ik(t){return t.flat(Number.POSITIVE_INFINITY)}function um(t,e){t.forEach(n=>Array.isArray(n)?um(n,e):e(n))}function ND(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Cl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ok(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function lm(t,e,n){let r=Ua(t,e);return r>=0?t[r|1]=n:(r=~r,ok(t,r,e,n)),r}function Yp(t,e){let n=Ua(t,e);if(n>=0)return t[n|1]}function Ua(t,e){return sk(t,e,1)}function sk(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Ni={},St=[],xa=new U(""),MD=new U("",-1),PD=new U(""),Sl=class{get(e,n=Si){if(n===Si){let r=new Error(`NullInjectorError: No provider for ${At(e)}!`);throw r.name="NullInjectorError",r}return n}};function xD(t,e){let n=t[Wx]||null;if(!n&&e===!0)throw new Error(`Type ${At(t)} does not have '\u0275mod' property.`);return n}function Mi(t){return t[Hx]||null}function ak(t){return t[zx]||null}function ck(t){return t[qx]||null}function Qt(t){return{\u0275providers:t}}function uk(...t){return{\u0275providers:kD(!0,t),\u0275fromNgModule:!0}}function kD(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return um(e,s=>{let a=s;pg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&OD(i,o),n}function OD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];dm(i,o=>{e(o,r)})}}function pg(t,e,n,r){if(t=It(t),!t)return!1;let i=null,o=MT(t),s=!o&&Mi(t);if(!o&&!s){let u=t.ngModule;if(o=MT(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)pg(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{um(o.imports,h=>{pg(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&OD(l,e)}if(!a){let l=Ri(i)||(()=>new i);e({provide:i,useFactory:l,deps:St},i),e({provide:PD,useValue:i,multi:!0},i),e({provide:xa,useValue:()=>q(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;dm(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function dm(t,e){for(let n of t)bD(n)&&(n=n.\u0275providers),Array.isArray(n)?dm(n,e):e(n)}var lk=De({provide:String,useValue:De});function FD(t){return t!==null&&typeof t=="object"&&lk in t}function dk(t){return!!(t&&t.useExisting)}function hk(t){return!!(t&&t.useFactory)}function zo(t){return typeof t=="function"}function fk(t){return!!t.useClass}var Yl=new U(""),yl={},OT={},Zp;function hm(){return Zp===void 0&&(Zp=new Sl),Zp}var Xe=class{},ka=class extends Xe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,mg(e,s=>this.processProvider(s)),this.records.set(MD,Vo(void 0,this)),i.has("environment")&&this.records.set(Xe,Vo(void 0,this));let o=this.records.get(Yl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(PD,St,re.Self))}retrieve(e,n){let r=n;return this.get(e,r.optional?fl:Si,r)}destroy(){Na(this),this._destroyed=!0;let e=se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(e)}}onDestroy(e){return Na(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Na(this);let n=Zn(this),r=Ct(void 0),i;try{return e()}finally{Zn(n),Ct(r)}}get(e,n=Si,r=re.Default){if(Na(this),e.hasOwnProperty(xT))return e[xT](this);r=Ql(r);let i,o=Zn(this),s=Ct(void 0);try{if(!(r&re.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=vk(e)&&Kl(e);l&&this.injectableDefInScope(l)?u=Vo(gg(e),yl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,r)}let a=r&re.Self?hm():this.parent;return n=r&re.Optional&&n===Si?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[bl]=a[bl]||[]).unshift(At(e)),o)throw a;return ek(a,e,"R3InjectorError",this.source)}else throw a}finally{Ct(s),Zn(o)}}resolveInjectorInitializers(){let e=se(null),n=Zn(this),r=Ct(void 0),i;try{let o=this.get(xa,St,re.Self);for(let s of o)s()}finally{Zn(n),Ct(r),se(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(At(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=It(e);let n=zo(e)?e:It(e&&e.provide),r=gk(e);if(!zo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Vo(void 0,yl,!0),i.factory=()=>fg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=se(null);try{return n.value===OT?CD(At(e)):n.value===yl&&(n.value=OT,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&yk(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{se(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=It(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function gg(t){let e=Kl(t),n=e!==null?e.factory:Ri(t);if(n!==null)return n;if(t instanceof U)throw new j(204,!1);if(t instanceof Function)return pk(t);throw new j(204,!1)}function pk(t){if(t.length>0)throw new j(204,!1);let n=Bx(t);return n!==null?()=>n.factory(t):()=>new t}function gk(t){if(FD(t))return Vo(void 0,t.useValue);{let e=LD(t);return Vo(e,yl)}}function LD(t,e,n){let r;if(zo(t)){let i=It(t);return Ri(i)||gg(i)}else if(FD(t))r=()=>It(t.useValue);else if(hk(t))r=()=>t.useFactory(...fg(t.deps||[]));else if(dk(t))r=(i,o)=>q(It(t.useExisting),o!==void 0&&o&re.Optional?re.Optional:void 0);else{let i=It(t&&(t.useClass||t.provide));if(mk(t))r=()=>new i(...fg(t.deps));else return Ri(i)||gg(i)}return r}function Na(t){if(t.destroyed)throw new j(205,!1)}function Vo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function mk(t){return!!t.deps}function yk(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function vk(t){return typeof t=="function"||typeof t=="object"&&t instanceof U}function mg(t,e){for(let n of t)Array.isArray(n)?mg(n,e):n&&bD(n)?mg(n.\u0275providers,e):e(n)}function et(t,e){let n;t instanceof ka?(Na(t),n=t):n=new Dl(t);let r,i=Zn(n),o=Ct(void 0);try{return e()}finally{Zn(i),Ct(o)}}function VD(){return SD()!==void 0||Aa()!=null}function fm(t){if(!VD())throw new j(-203,!1)}function _k(t){return typeof t=="function"}var nr=0,ie=1,Q=2,ft=3,rn=4,sn=5,Al=6,Rl=7,Rt=8,qo=9,Xn=10,Le=11,Oa=12,FT=13,es=14,_n=15,Pi=16,jo=17,er=18,Zl=19,jD=20,Fr=21,Jp=22,Nl=23,Kt=24,$o=25,Nt=26,UD=1;var xi=7,Ml=8,Wo=9,Vt=10;function Lr(t){return Array.isArray(t)&&typeof t[UD]=="object"}function rr(t){return Array.isArray(t)&&t[UD]===!0}function pm(t){return(t.flags&4)!==0}function ts(t){return t.componentOffset>-1}function Jl(t){return(t.flags&1)===1}function In(t){return!!t.template}function Pl(t){return(t[Q]&512)!==0}function ns(t){return(t[Q]&256)===256}var yg=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function BD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var rs=(()=>{let t=()=>$D;return t.ngInherit=!0,t})();function $D(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ek),Ik}function Ik(){let t=zD(this),e=t?.current;if(e){let n=t.previous;if(n===Ni)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Ek(t,e,n,r,i){let o=this.declaredInputs[r],s=zD(t)||wk(t,{previous:Ni,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new yg(l&&l.currentValue,n,u===Ni),BD(t,e,i,n)}var HD="__ngSimpleChanges__";function zD(t){return t[HD]||null}function wk(t,e){return t[HD]=e}var LT=null;var Ie=function(t,e=null,n){LT?.(t,e,n)},qD="svg",Tk="math";function En(t){for(;Array.isArray(t);)t=t[nr];return t}function WD(t,e){return En(e[t])}function bn(t,e){return En(e[t.index])}function GD(t,e){return t.data[e]}function gm(t,e){return t[e]}function Dk(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function wn(t,e){let n=e[t];return Lr(n)?n:n[nr]}function bk(t){return(t[Q]&4)===4}function mm(t){return(t[Q]&128)===128}function Ck(t){return rr(t[ft])}function Go(t,e){return e==null?null:t[e]}function KD(t){t[jo]=0}function QD(t){t[Q]&1024||(t[Q]|=1024,mm(t)&&Ba(t))}function Sk(t,e){for(;t>0;)e=e[es],t--;return e}function Xl(t){return!!(t[Q]&9216||t[Kt]?.dirty)}function vg(t){t[Xn].changeDetectionScheduler?.notify(8),t[Q]&64&&(t[Q]|=1024),Xl(t)&&Ba(t)}function Ba(t){t[Xn].changeDetectionScheduler?.notify(0);let e=ki(t);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!mm(e)));)e=ki(e)}function YD(t,e){if(ns(t))throw new j(911,!1);t[Fr]===null&&(t[Fr]=[]),t[Fr].push(e)}function Ak(t,e){if(t[Fr]===null)return;let n=t[Fr].indexOf(e);n!==-1&&t[Fr].splice(n,1)}function ki(t){let e=t[ft];return rr(e)?e[ft]:e}function ym(t){return t[Rl]??=[]}function vm(t){return t.cleanup??=[]}function Rk(t,e,n,r){let i=ym(e);i.push(n),t.firstCreatePass&&vm(t).push(r,i.length-1)}var te={lFrame:ib(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var _g=!1;function Nk(){return te.lFrame.elementDepthCount}function Mk(){te.lFrame.elementDepthCount++}function Pk(){te.lFrame.elementDepthCount--}function _m(){return te.bindingsEnabled}function xk(){return te.skipHydrationRootTNode!==null}function kk(t){return te.skipHydrationRootTNode===t}function Ok(){te.skipHydrationRootTNode=null}function ae(){return te.lFrame.lView}function Be(){return te.lFrame.tView}function u7(t){return te.lFrame.contextLView=t,t[Rt]}function l7(t){return te.lFrame.contextLView=null,t}function pt(){let t=ZD();for(;t!==null&&t.type===64;)t=t.parent;return t}function ZD(){return te.lFrame.currentTNode}function Fk(){let t=te.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function $i(t,e){let n=te.lFrame;n.currentTNode=t,n.isParent=e}function Im(){return te.lFrame.isParent}function JD(){te.lFrame.isParent=!1}function Lk(){return te.lFrame.contextLView}function XD(){return _g}function VT(t){let e=_g;return _g=t,e}function Em(){let t=te.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function eb(){return te.lFrame.bindingIndex}function Vk(t){return te.lFrame.bindingIndex=t}function ed(){return te.lFrame.bindingIndex++}function td(t){let e=te.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function jk(){return te.lFrame.inI18n}function Uk(t,e){let n=te.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ig(e)}function Bk(){return te.lFrame.currentDirectiveIndex}function Ig(t){te.lFrame.currentDirectiveIndex=t}function $k(t){let e=te.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function tb(){return te.lFrame.currentQueryIndex}function wm(t){te.lFrame.currentQueryIndex=t}function Hk(t){let e=t[ie];return e.type===2?e.declTNode:e.type===1?t[sn]:null}function nb(t,e,n){if(n&re.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&re.Host);)if(i=Hk(o),i===null||(o=o[es],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=te.lFrame=rb();return r.currentTNode=e,r.lView=t,!0}function Tm(t){let e=rb(),n=t[ie];te.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function rb(){let t=te.lFrame,e=t===null?null:t.child;return e===null?ib(t):e}function ib(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function ob(){let t=te.lFrame;return te.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var sb=ob;function Dm(){let t=ob();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function zk(t){return(te.lFrame.contextLView=Sk(t,te.lFrame.contextLView))[Rt]}function ir(){return te.lFrame.selectedIndex}function Oi(t){te.lFrame.selectedIndex=t}function bm(){let t=te.lFrame;return GD(t.tView,t.selectedIndex)}function d7(){te.lFrame.currentNamespace=qD}function h7(){qk()}function qk(){te.lFrame.currentNamespace=null}function Wk(){return te.lFrame.currentNamespace}var ab=!0;function nd(){return ab}function rd(t){ab=t}function Gk(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=$D(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Cm(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function vl(t,e,n){cb(t,e,3,n)}function _l(t,e,n,r){(t[Q]&3)===n&&cb(t,e,n,r)}function Xp(t,e){let n=t[Q];(n&3)===e&&(n&=16383,n+=1,t[Q]=n)}function cb(t,e,n,r){let i=r!==void 0?t[jo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[jo]+=65536),(a<o||o==-1)&&(Kk(t,n,e,u),t[jo]=(t[jo]&4294901760)+u+2),u++}function jT(t,e){Ie(4,t,e);let n=se(null);try{e.call(t)}finally{se(n),Ie(5,t,e)}}function Kk(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[Q]>>14<t[jo]>>16&&(t[Q]&3)===e&&(t[Q]+=16384,jT(a,o)):jT(a,o)}var Ho=-1,Fi=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function Qk(t){return(t.flags&8)!==0}function Yk(t){return(t.flags&16)!==0}function Zk(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];Jk(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function ub(t){return t===3||t===4||t===6}function Jk(t){return t.charCodeAt(0)===64}function Ko(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?UT(t,n,i,null,e[++r]):UT(t,n,i,null,null))}}return t}function UT(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function lb(t){return t!==Ho}function xl(t){return t&32767}function Xk(t){return t>>16}function kl(t,e){let n=Xk(t),r=e;for(;n>0;)r=r[es],n--;return r}var Eg=!0;function Ol(t){let e=Eg;return Eg=t,e}var eO=256,db=eO-1,hb=5,tO=0,vn={};function nO(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Pa)&&(r=n[Pa]),r==null&&(r=n[Pa]=tO++);let i=r&db,o=1<<i;e.data[t+(i>>hb)]|=o}function Fl(t,e){let n=fb(t,e);if(n!==-1)return n;let r=e[ie];r.firstCreatePass&&(t.injectorIndex=e.length,eg(r.data,t),eg(e,null),eg(r.blueprint,null));let i=Sm(t,e),o=t.injectorIndex;if(lb(i)){let s=xl(i),a=kl(i,e),u=a[ie].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function eg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function fb(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Sm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=vb(i),r===null)return Ho;if(n++,i=i[es],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ho}function wg(t,e,n){nO(t,e,n)}function rO(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(ub(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function pb(t,e,n){if(n&re.Optional||t!==void 0)return t;cm(e,"NodeInjector")}function gb(t,e,n,r){if(n&re.Optional&&r===void 0&&(r=null),(n&(re.Self|re.Host))===0){let i=t[qo],o=Ct(void 0);try{return i?i.get(e,r,n&re.Optional):AD(e,r,n&re.Optional)}finally{Ct(o)}}return pb(r,e,n)}function mb(t,e,n,r=re.Default,i){if(t!==null){if(e[Q]&2048&&!(r&re.Self)){let s=aO(t,e,n,r,vn);if(s!==vn)return s}let o=yb(t,e,n,r,vn);if(o!==vn)return o}return gb(e,n,r,i)}function yb(t,e,n,r,i){let o=oO(n);if(typeof o=="function"){if(!nb(e,t,r))return r&re.Host?pb(i,n,r):gb(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&re.Optional))cm(n);else return s}finally{sb()}}else if(typeof o=="number"){let s=null,a=fb(t,e),u=Ho,l=r&re.Host?e[_n][sn]:null;for((a===-1||r&re.SkipSelf)&&(u=a===-1?Sm(t,e):e[a+8],u===Ho||!$T(r,!1)?a=-1:(s=e[ie],a=xl(u),e=kl(u,e)));a!==-1;){let h=e[ie];if(BT(o,a,h.data)){let p=iO(a,e,n,s,r,l);if(p!==vn)return p}u=e[a+8],u!==Ho&&$T(r,e[ie].data[a+8]===l)&&BT(o,a,e)?(s=h,a=xl(u),e=kl(u,e)):a=-1}}return i}function iO(t,e,n,r,i,o){let s=e[ie],a=s.data[t+8],u=r==null?ts(a)&&Eg:r!=s&&(a.type&3)!==0,l=i&re.Host&&o===a,h=Il(a,s,n,u,l);return h!==null?Fa(e,s,h,a,i):vn}function Il(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let w=s[y];if(y<u&&n===w||y>=u&&w.type===n)return y}if(i){let y=s[u];if(y&&In(y)&&y.type===n)return u}return null}function Fa(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Fi){let a=o;a.resolving&&CD(Gx(s[n]));let u=Ol(a.canSeeViewProviders);a.resolving=!0;let l,h=a.injectImpl?Ct(a.injectImpl):null,p=nb(t,r,re.Default);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Gk(n,s[n],e)}finally{h!==null&&Ct(h),Ol(u),a.resolving=!1,sb()}}return o}function oO(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Pa)?t[Pa]:void 0;return typeof e=="number"?e>=0?e&db:sO:e}function BT(t,e,n){let r=1<<t;return!!(n[e+(t>>hb)]&r)}function $T(t,e){return!(t&re.Self)&&!(t&re.Host&&e)}var Ai=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return mb(this._tNode,this._lView,e,Ql(r),n)}};function sO(){return new Ai(pt(),ae())}function Am(t){return ja(()=>{let e=t.prototype.constructor,n=e[Tl]||Tg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Tl]||Tg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Tg(t){return ED(t)?()=>{let e=Tg(It(t));return e&&e()}:Ri(t)}function aO(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[Q]&2048&&!Pl(s);){let a=yb(o,s,n,r|re.Self,vn);if(a!==vn)return a;let u=o.parent;if(!u){let l=s[jD];if(l){let h=l.get(n,vn,r);if(h!==vn)return h}u=vb(s),s=s[es]}o=u}return i}function vb(t){let e=t[ie],n=e.type;return n===2?e.declTNode:n===1?t[sn]:null}function Rm(t){return rO(pt(),t)}function HT(t,e=null,n=null,r){let i=_b(t,e,n,r);return i.resolveInjectorInitializers(),i}function _b(t,e=null,n=null,r,i=new Set){let o=[n||St,uk(t)];return r=r||(typeof t=="object"?void 0:At(t)),new ka(o,e||hm(),r||null,i)}var Ze=class t{static THROW_IF_NOT_FOUND=Si;static NULL=new Sl;static create(e,n){if(Array.isArray(e))return HT({name:""},n,e,"");{let r=e.name??"";return HT({name:r},e.parent,e.providers,r)}}static \u0275prov=$({token:t,providedIn:"any",factory:()=>q(MD)});static __NG_ELEMENT_ID__=-1};var cO=new U("");cO.__NG_ELEMENT_ID__=t=>{let e=pt();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(t&re.Optional)return null;throw new j(204,!1)};var Ib=!1,Vr=(()=>{class t{static __NG_ELEMENT_ID__=uO;static __NG_ENV_ID__=n=>n}return t})(),Dg=class extends Vr{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let n=this._lView;return ns(n)?(e(),()=>{}):(YD(n,e),()=>Ak(n,e))}};function uO(){return new Dg(ae())}var Li=class{},Nm=new U("",{providedIn:"root",factory:()=>!1});var Eb=new U(""),wb=new U(""),or=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new st(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})(),id=(()=>{class t{internalPendingTasks=P(or);scheduler=P(Li);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){return _(this,null,function*(){let r=this.add();try{return yield n()}finally{r()}})}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})(),bg=class extends Qe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,VD()&&(this.destroyRef=P(Vr,{optional:!0})??void 0,this.pendingTasks=P(or,{optional:!0})??void 0)}emit(e){let n=se(null);try{super.next(e)}finally{se(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Pe&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Et=bg;function Ll(...t){}function Tb(t){let e,n;function r(){t=Ll;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function zT(t){return queueMicrotask(()=>t()),()=>{t=Ll}}var Mm="isAngularZone",Vl=Mm+"_ID",lO=0,ge=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Et(!1);onMicrotaskEmpty=new Et(!1);onStable=new Et(!1);onError=new Et(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Ib}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,fO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Mm)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,dO,Ll,Ll);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},dO={};function Pm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function hO(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Tb(()=>{t.callbackScheduled=!1,Cg(t),t.isCheckStableRunning=!0,Pm(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Cg(t)}function fO(t){let e=()=>{hO(t)},n=lO++;t._inner=t._inner.fork({name:"angular",properties:{[Mm]:!0,[Vl]:n,[Vl+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(pO(u))return r.invokeTask(o,s,a,u);try{return qT(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),WT(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return qT(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!gO(u)&&e(),WT(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Cg(t),Pm(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Cg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function qT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function WT(t){t._nesting--,Pm(t)}var Sg=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Et;onMicrotaskEmpty=new Et;onStable=new Et;onError=new Et;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function pO(t){return Db(t,"__ignore_ng_zone__")}function gO(t){return Db(t,"__scheduler_tick__")}function Db(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var on=class{_console=console;handleError(e){this._console.error("ERROR",e)}},mO=new U("",{providedIn:"root",factory:()=>{let t=P(ge),e=P(on);return n=>t.runOutsideAngular(()=>e.handleError(n))}}),Ag=class{destroyed=!1;listeners=null;errorHandler=P(on,{optional:!0});destroyRef=P(Vr);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new j(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let n=this.listeners?.indexOf(e);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(e){if(this.destroyed){console.warn(am(953,!1));return}if(this.listeners===null)return;let n=se(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{se(n)}}};function f7(t){return new Ag}function GT(t,e){return vD(t,e)}function yO(t){return vD(yD,t)}var bb=(GT.required=yO,GT);function vO(){return is(pt(),ae())}function is(t,e){return new sr(bn(t,e))}var sr=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=vO}return t})();function _O(t){return t instanceof sr?t.nativeElement:t}function IO(t){return typeof t=="function"&&t[Gt]!==void 0}function EO(t,e){let n=Wp(t,e?.equal),r=n[Gt];return n.set=i=>Sa(r,i),n.update=i=>Gp(r,i),n.asReadonly=wO.bind(n),n}function wO(){let t=this[Gt];if(t.readonlyFn===void 0){let e=()=>this();e[Gt]=t,t.readonlyFn=e}return t.readonlyFn}function Cb(t){return IO(t)&&typeof t.set=="function"}function TO(){return this._results[Symbol.iterator]()}var Rg=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Qe}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=ik(e);(this._changesDetected=!rk(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=TO};function Sb(t){return(t.flags&128)===128}var Ab=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Ab||{}),Rb=new Map,DO=0;function bO(){return DO++}function CO(t){Rb.set(t[Zl],t)}function Ng(t){Rb.delete(t[Zl])}var KT="__ngContext__";function os(t,e){Lr(e)?(t[KT]=e[Zl],CO(e)):t[KT]=e}function Nb(t){return Pb(t[Oa])}function Mb(t){return Pb(t[rn])}function Pb(t){for(;t!==null&&!rr(t);)t=t[rn];return t}var Mg;function xb(t){Mg=t}function SO(){if(Mg!==void 0)return Mg;if(typeof document<"u")return document;throw new j(210,!1)}var xm=new U("",{providedIn:"root",factory:()=>AO}),AO="ng",km=new U(""),jr=new U("",{providedIn:"platform",factory:()=>"unknown"});var Om=new U("",{providedIn:"root",factory:()=>SO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var RO="h",NO="b";var kb=!1,MO=new U("",{providedIn:"root",factory:()=>kb});var Fm=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(Fm||{}),ss=new U(""),QT=new Set;function as(t){QT.has(t)||(QT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Ob=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=PO}return t})();function PO(){return new Ob(ae(),pt())}var Uo=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Uo||{}),Fb=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})(),xO=[Uo.EarlyRead,Uo.Write,Uo.MixedReadWrite,Uo.Read],kO=(()=>{class t{ngZone=P(ge);scheduler=P(Li);errorHandler=P(on,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){P(ss,{optional:!0})}execute(){let n=this.sequences.size>0;n&&Ie(16),this.executing=!0;for(let r of xO)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&Ie(17)}register(n){let{view:r}=n;r!==void 0?((r[$o]??=[]).push(n),Ba(r),r[Q]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Fm.AFTER_NEXT_RENDER,n):n()}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})(),Pg=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[$o];e&&(this.view[$o]=e.filter(n=>n!==this))}};function Lm(t,e){!e?.injector&&fm(Lm);let n=e?.injector??P(Ze);return as("NgAfterNextRender"),FO(t,n,e,!0)}function OO(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function FO(t,e,n,r){let i=e.get(Fb);i.impl??=e.get(kO);let o=e.get(ss,null,{optional:!0}),s=n?.phase??Uo.MixedReadWrite,a=n?.manualCleanup!==!0?e.get(Vr):null,u=e.get(Ob,null,{optional:!0}),l=new Pg(i.impl,OO(t,s),u?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var LO=(t,e,n,r)=>{};function VO(t,e,n,r){LO(t,e,n,r)}var jO=()=>null;function Lb(t,e,n=!1){return jO(t,e,n)}function Vb(t,e){let n=t.contentQueries;if(n!==null){let r=se(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];wm(o),a.contentQueries(2,e[s],s)}}}finally{se(r)}}}function xg(t,e,n){wm(0);let r=se(null);try{e(t,n)}finally{se(r)}}function Vm(t,e,n){if(pm(e)){let r=se(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{se(r)}}}var Tn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Tn||{});var gl;function UO(){if(gl===void 0&&(gl=null,Ci.trustedTypes))try{gl=Ci.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return gl}function YT(t){return UO()?.createScriptURL(t)||t}var jl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${mD})`}};function $a(t){return t instanceof jl?t.changingThisBreaksApplicationSecurity:t}function jb(t,e){let n=BO(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${mD})`)}return n===e}function BO(t){return t instanceof jl&&t.getTypeName()||null}var $O=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function HO(t){return t=String(t),t.match($O)?t:"unsafe:"+t}var jm=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(jm||{});function zO(t){let e=Bb();return e?e.sanitize(jm.URL,t)||"":jb(t,"URL")?$a(t):HO(Jn(t))}function qO(t){let e=Bb();if(e)return YT(e.sanitize(jm.RESOURCE_URL,t)||"");if(jb(t,"ResourceURL"))return YT($a(t));throw new j(904,!1)}function WO(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?qO:zO}function Ub(t,e,n){return WO(e,n)(t)}function Bb(){let t=ae();return t&&t[Xn].sanitizer}var GO=/^>|^->|<!--|-->|--!>|<!-$/g,KO=/(<|>)/g,QO="\u200B$1\u200B";function YO(t){return t.replace(GO,e=>e.replace(KO,QO))}function $b(t){return t instanceof Function?t():t}function ZO(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var Hb="ng-template";function JO(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&ZO(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Um(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Um(t){return t.type===4&&t.value!==Hb}function XO(t,e,n){let r=t.type===4&&!n?Hb:t.value;return e===r}function e1(t,e,n){let r=4,i=t.attrs,o=i!==null?r1(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!tn(r)&&!tn(u))return!1;if(s&&tn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!XO(t,u,n)||u===""&&e.length===1){if(tn(r))return!1;s=!0}}else if(r&8){if(i===null||!JO(t,i,u,n)){if(tn(r))return!1;s=!0}}else{let l=e[++a],h=t1(u,i,Um(t),n);if(h===-1){if(tn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(tn(r))return!1;s=!0}}}}return tn(r)||s}function tn(t){return(t&1)===0}function t1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return i1(e,t)}function n1(t,e,n=!1){for(let r=0;r<e.length;r++)if(e1(t,e[r],n))return!0;return!1}function r1(t){for(let e=0;e<t.length;e++){let n=t[e];if(ub(n))return e}return t.length}function i1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function ZT(t,e){return t?":not("+e.trim()+")":e}function o1(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!tn(s)&&(e+=ZT(o,i),i=""),r=s,o=o||!tn(r);n++}return i!==""&&(e+=ZT(o,i)),e}function s1(t){return t.map(o1).join(",")}function a1(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!tn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Mt={};function c1(t,e){return t.createText(e)}function u1(t,e,n){t.setValue(e,n)}function l1(t,e){return t.createComment(YO(e))}function zb(t,e,n){return t.createElement(e,n)}function Ul(t,e,n,r,i){t.insertBefore(e,n,r,i)}function qb(t,e,n){t.appendChild(e,n)}function JT(t,e,n,r,i){r!==null?Ul(t,e,n,r,i):qb(t,e,n)}function d1(t,e,n){t.removeChild(null,e,n)}function h1(t,e,n){t.setAttribute(e,"style",n)}function f1(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Wb(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Zk(t,e,r),i!==null&&f1(t,e,i),o!==null&&h1(t,e,o)}function Bm(t,e,n,r,i,o,s,a,u,l,h){let p=Nt+r,g=p+i,y=p1(p,g),w=typeof l=="function"?l():l;return y[ie]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:w,incompleteFirstPass:!1,ssrId:h}}function p1(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Mt);return n}function g1(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Bm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function $m(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[nr]=i,p[Q]=r|4|128|8|64|1024,(l!==null||t&&t[Q]&2048)&&(p[Q]|=2048),KD(p),p[ft]=p[es]=t,p[Rt]=n,p[Xn]=s||t&&t[Xn],p[Le]=a||t&&t[Le],p[qo]=u||t&&t[qo]||null,p[sn]=o,p[Zl]=bO(),p[Al]=h,p[jD]=l,p[_n]=e.type==2?t[_n]:p,p}function m1(t,e,n){let r=bn(e,t),i=g1(n),o=t[Xn].rendererFactory,s=Hm(t,$m(t,i,null,Gb(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function Gb(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Kb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Hm(t,e){return t[Oa]?t[FT][rn]=e:t[Oa]=e,t[FT]=e,e}function p7(t=1){Qb(Be(),ae(),ir()+t,!1)}function Qb(t,e,n,r){if(!r)if((e[Q]&3)===3){let o=t.preOrderCheckHooks;o!==null&&vl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&_l(e,o,0,n)}Oi(n)}var od=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(od||{});function kg(t,e,n,r){let i=se(null);try{let[o,s,a]=t.inputs[n],u=null;(s&od.SignalBased)!==0&&(u=e[o][Gt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):BD(e,u,o,r)}finally{se(i)}}function Yb(t,e,n,r,i){let o=ir(),s=r&2;try{Oi(-1),s&&e.length>Nt&&Qb(t,e,Nt,!1),Ie(s?2:0,i),n(r,i)}finally{Oi(o),Ie(s?3:1,i)}}function sd(t,e,n){w1(t,e,n),(n.flags&64)===64&&T1(t,e,n)}function zm(t,e,n=bn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function y1(t,e,n,r){let o=r.get(MO,kb)||n===Tn.ShadowDom,s=t.selectRootElement(e,o);return v1(s),s}function v1(t){_1(t)}var _1=()=>null;function I1(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Zb(t,e,n,r,i,o,s,a){if(!a&&Wm(e,t,n,r,i)){ts(e)&&E1(n,e.index);return}if(e.type&3){let u=bn(e,n);r=I1(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function E1(t,e){let n=wn(e,t);n[Q]&16||(n[Q]|=64)}function w1(t,e,n){let r=n.directiveStart,i=n.directiveEnd;ts(n)&&m1(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Fl(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=Fa(e,t,s,n);if(os(u,e),o!==null&&S1(e,s-r,u,a,n,o),In(a)){let l=wn(n.index,e);l[Rt]=Fa(e,t,s,n)}}}function T1(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Bk();try{Oi(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Ig(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&D1(u,l)}}finally{Oi(-1),Ig(s)}}function D1(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function qm(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];n1(e,o.selectors,!1)&&(r??=[],In(o)?r.unshift(o):r.push(o))}return r}function b1(t,e,n,r,i,o){let s=bn(t,e);C1(e[Le],s,o,t.value,n,r,i)}function C1(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Jn(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function S1(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];kg(r,n,u,l)}}function A1(t,e){let n=t[qo],r=n?n.get(on,null):null;r&&r.handleError(e)}function Wm(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];kg(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];kg(h,l,r,i),a=!0}return a}function R1(t,e){let n=wn(e,t),r=n[ie];N1(r,n);let i=n[nr];i!==null&&n[Al]===null&&(n[Al]=Lb(i,n[qo])),Ie(18),Gm(r,n,n[Rt]),Ie(19,n[Rt])}function N1(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Gm(t,e,n){Tm(e);try{let r=t.viewQuery;r!==null&&xg(1,r,n);let i=t.template;i!==null&&Yb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[er]?.finishViewCreation(t),t.staticContentQueries&&Vb(t,e),t.staticViewQueries&&xg(2,t.viewQuery,n);let o=t.components;o!==null&&M1(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Q]&=-5,Dm()}}function M1(t,e){for(let n=0;n<e.length;n++)R1(t,e[n])}function P1(t,e,n,r){let i=se(null);try{let o=e.tView,a=t[Q]&4096?4096:16,u=$m(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Pi]=l;let h=t[er];return h!==null&&(u[er]=h.createEmbeddedView(o)),Gm(o,u,n),u}finally{se(i)}}function XT(t,e){return!e||e.firstChild===null||Sb(t)}var x1;function Km(t,e){return x1(t,e)}var tr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(tr||{});function Jb(t){return(t.flags&32)===32}function Bo(t,e,n,r,i){if(r!=null){let o,s=!1;rr(r)?o=r:Lr(r)&&(s=!0,r=r[nr]);let a=En(r);t===0&&n!==null?i==null?qb(e,n,a):Ul(e,n,a,i||null,!0):t===1&&n!==null?Ul(e,n,a,i||null,!0):t===2?d1(e,a,s):t===3&&e.destroyNode(a),o!=null&&q1(e,t,o,n,i)}}function k1(t,e){Xb(t,e),e[nr]=null,e[sn]=null}function O1(t,e,n,r,i,o){r[nr]=i,r[sn]=e,cd(t,r,n,1,i,o)}function Xb(t,e){e[Xn].changeDetectionScheduler?.notify(9),cd(t,e,e[Le],2,null,null)}function F1(t){let e=t[Oa];if(!e)return tg(t[ie],t);for(;e;){let n=null;if(Lr(e))n=e[Oa];else{let r=e[Vt];r&&(n=r)}if(!n){for(;e&&!e[rn]&&e!==t;)Lr(e)&&tg(e[ie],e),e=e[ft];e===null&&(e=t),Lr(e)&&tg(e[ie],e),n=e&&e[rn]}e=n}}function Qm(t,e){let n=t[Wo],r=n.indexOf(e);n.splice(r,1)}function eC(t,e){if(ns(e))return;let n=e[Le];n.destroyNode&&cd(t,e,n,3,null,null),F1(e)}function tg(t,e){if(ns(e))return;let n=se(null);try{e[Q]&=-129,e[Q]|=256,e[Kt]&&Hp(e[Kt]),V1(t,e),L1(t,e),e[ie].type===1&&e[Le].destroy();let r=e[Pi];if(r!==null&&rr(e[ft])){r!==e[ft]&&Qm(r,e);let i=e[er];i!==null&&i.detachView(t)}Ng(e)}finally{se(n)}}function L1(t,e){let n=t.cleanup,r=e[Rl];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Rl]=null);let i=e[Fr];if(i!==null){e[Fr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Nl];if(o!==null){e[Nl]=null;for(let s of o)s.destroy()}}function V1(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Fi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ie(4,a,u);try{u.call(a)}finally{Ie(5,a,u)}}else{Ie(4,i,o);try{o.call(i)}finally{Ie(5,i,o)}}}}}function j1(t,e,n){return U1(t,e.parent,n)}function U1(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[nr];if(ts(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Tn.None||i===Tn.Emulated)return null}return bn(r,n)}function B1(t,e,n){return H1(t,e,n)}function $1(t,e,n){return t.type&40?bn(t,n):null}var H1=$1,eD;function ad(t,e,n,r){let i=j1(t,r,e),o=e[Le],s=r.parent||e[sn],a=B1(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)JT(o,i,n[u],a,!1);else JT(o,i,n,a,!1);eD!==void 0&&eD(o,r,e,n,i)}function Ma(t,e){if(e!==null){let n=e.type;if(n&3)return bn(e,t);if(n&4)return Og(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ma(t,r);{let i=t[e.index];return rr(i)?Og(-1,i):En(i)}}else{if(n&128)return Ma(t,e.next);if(n&32)return Km(e,t)()||En(t[e.index]);{let r=tC(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ki(t[_n]);return Ma(i,r)}else return Ma(t,e.next)}}}return null}function tC(t,e){if(e!==null){let r=t[_n][sn],i=e.projection;return r.projection[i]}return null}function Og(t,e){let n=Vt+t+1;if(n<e.length){let r=e[n],i=r[ie].firstChild;if(i!==null)return Ma(r,i)}return e[xi]}function Ym(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&os(En(a),r),n.flags|=2),!Jb(n))if(u&8)Ym(t,e,n.child,r,i,o,!1),Bo(e,t,i,a,o);else if(u&32){let l=Km(n,r),h;for(;h=l();)Bo(e,t,i,h,o);Bo(e,t,i,a,o)}else u&16?z1(t,e,r,n,i,o):Bo(e,t,i,a,o);n=s?n.projectionNext:n.next}}function cd(t,e,n,r,i,o){Ym(n,r,t.firstChild,e,i,o,!1)}function z1(t,e,n,r,i,o){let s=n[_n],u=s[sn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Bo(e,t,i,h,o)}else{let l=u,h=s[ft];Sb(r)&&(l.flags|=128),Ym(t,e,l,h,i,o,!0)}}function q1(t,e,n,r,i){let o=n[xi],s=En(n);o!==s&&Bo(e,t,r,o,i);for(let a=Vt;a<n.length;a++){let u=n[a];cd(u[ie],u,t,e,r,o)}}function W1(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:tr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=tr.Important),t.setStyle(n,r,i,o))}}function Bl(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(En(o)),rr(o)&&G1(o,r);let s=n.type;if(s&8)Bl(t,e,n.child,r);else if(s&32){let a=Km(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=tC(e,n);if(Array.isArray(a))r.push(...a);else{let u=ki(e[_n]);Bl(u[ie],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function G1(t,e){for(let n=Vt;n<t.length;n++){let r=t[n],i=r[ie].firstChild;i!==null&&Bl(r[ie],r,i,e)}t[xi]!==t[nr]&&e.push(t[xi])}function nC(t){if(t[$o]!==null){for(let e of t[$o])e.impl.addSequence(e);t[$o].length=0}}var rC=[];function K1(t){return t[Kt]??Q1(t)}function Q1(t){let e=rC.pop()??Object.create(Z1);return e.lView=t,e}function Y1(t){t.lView[Kt]!==t&&(t.lView=null,rC.push(t))}var Z1=_e(L({},ba),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Ba(t.lView)},consumerOnSignalRead(){this.lView[Kt]=this}});function J1(t){let e=t[Kt]??Object.create(X1);return e.lView=t,e}var X1=_e(L({},ba),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=ki(t.lView);for(;e&&!iC(e[ie]);)e=ki(e);e&&QD(e)},consumerOnSignalRead(){this.lView[Kt]=this}});function iC(t){return t.type!==2}function oC(t){if(t[Nl]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Nl])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[Q]&8192)}}var eF=100;function sC(t,e=!0,n=0){let i=t[Xn].rendererFactory,o=!1;o||i.begin?.();try{tF(t,n)}catch(s){throw e&&A1(t,s),s}finally{o||i.end?.()}}function tF(t,e){let n=XD();try{VT(!0),Fg(t,e);let r=0;for(;Xl(t);){if(r===eF)throw new j(103,!1);r++,Fg(t,1)}}finally{VT(n)}}function nF(t,e,n,r){if(ns(e))return;let i=e[Q],o=!1,s=!1;Tm(e);let a=!0,u=null,l=null;o||(iC(t)?(l=K1(e),u=ul(l)):Lp()===null?(a=!1,l=J1(e),u=ul(l)):e[Kt]&&(Hp(e[Kt]),e[Kt]=null));try{KD(e),Vk(t.bindingStartIndex),n!==null&&Yb(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&vl(e,y,null)}else{let y=t.preOrderHooks;y!==null&&_l(e,y,0,null),Xp(e,0)}if(s||rF(e),oC(e),aC(e,0),t.contentQueries!==null&&Vb(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&vl(e,y)}else{let y=t.contentHooks;y!==null&&_l(e,y,1),Xp(e,1)}oF(t,e);let p=t.components;p!==null&&uC(e,p,0);let g=t.viewQuery;if(g!==null&&xg(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&vl(e,y)}else{let y=t.viewHooks;y!==null&&_l(e,y,2),Xp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Jp]){for(let y of e[Jp])y();e[Jp]=null}o||(nC(e),e[Q]&=-73)}catch(h){throw o||Ba(e),h}finally{l!==null&&(Bp(l,u),a&&Y1(l)),Dm()}}function aC(t,e){for(let n=Nb(t);n!==null;n=Mb(n))for(let r=Vt;r<n.length;r++){let i=n[r];cC(i,e)}}function rF(t){for(let e=Nb(t);e!==null;e=Mb(e)){if(!(e[Q]&2))continue;let n=e[Wo];for(let r=0;r<n.length;r++){let i=n[r];QD(i)}}}function iF(t,e,n){Ie(18);let r=wn(e,t);cC(r,n),Ie(19,r[Rt])}function cC(t,e){mm(t)&&Fg(t,e)}function Fg(t,e){let r=t[ie],i=t[Q],o=t[Kt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&$p(o)),s||=!1,o&&(o.dirty=!1),t[Q]&=-9217,s)nF(r,t,r.template,t[Rt]);else if(i&8192){oC(t),aC(t,1);let a=r.components;a!==null&&uC(t,a,1),nC(t)}}function uC(t,e,n){for(let r=0;r<e.length;r++)iF(t,e[r],n)}function oF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Oi(~i);else{let o=i,s=n[++r],a=n[++r];Uk(s,o);let u=e[o];Ie(24,u),a(2,u),Ie(25,u)}}}finally{Oi(-1)}}function Zm(t,e){let n=XD()?64:1088;for(t[Xn].changeDetectionScheduler?.notify(e);t;){t[Q]|=n;let r=ki(t);if(Pl(t)&&!r)return t;t=r}return null}function lC(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function sF(t,e,n,r=!0){let i=e[ie];if(aF(i,e,t,n),r){let s=Og(n,t),a=e[Le],u=a.parentNode(t[xi]);u!==null&&O1(i,t[sn],a,e,u,s)}let o=e[Al];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Lg(t,e){if(t.length<=Vt)return;let n=Vt+e,r=t[n];if(r){let i=r[Pi];i!==null&&i!==t&&Qm(i,r),e>0&&(t[n-1][rn]=r[rn]);let o=Cl(t,Vt+e);k1(r[ie],r);let s=o[er];s!==null&&s.detachView(o[ie]),r[ft]=null,r[rn]=null,r[Q]&=-129}return r}function aF(t,e,n,r){let i=Vt+r,o=n.length;r>0&&(n[i-1][rn]=e),r<o-Vt?(e[rn]=n[i],ND(n,Vt+r,e)):(n.push(e),e[rn]=null),e[ft]=n;let s=e[Pi];s!==null&&n!==s&&dC(s,e);let a=e[er];a!==null&&a.insertView(t),vg(e),e[Q]|=128}function dC(t,e){let n=t[Wo],r=e[ft];if(Lr(r))t[Q]|=2;else{let i=r[ft][_n];e[_n]!==i&&(t[Q]|=2)}n===null?t[Wo]=[e]:n.push(e)}var La=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,n=e[ie];return Bl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[Rt]}set context(e){this._lView[Rt]=e}get destroyed(){return ns(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ft];if(rr(e)){let n=e[Ml],r=n?n.indexOf(this):-1;r>-1&&(Lg(e,r),Cl(n,r))}this._attachedToViewContainer=!1}eC(this._lView[ie],this._lView)}onDestroy(e){YD(this._lView,e)}markForCheck(){Zm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Q]&=-129}reattach(){vg(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,sC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Pl(this._lView),n=this._lView[Pi];n!==null&&!e&&Qm(n,this._lView),Xb(this._lView[ie],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let n=Pl(this._lView),r=this._lView[Pi];r!==null&&!n&&dC(r,this._lView),vg(this._lView)}};var Vi=(()=>{class t{static __NG_ELEMENT_ID__=lF}return t})(),cF=Vi,uF=class extends cF{_declarationLView;_declarationTContainer;elementRef;constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=P1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new La(i)}};function lF(){return ud(pt(),ae())}function ud(t,e){return t.type&4?new uF(e,t,is(t,e)):null}function ld(t,e,n,r,i){let o=t.data[e];if(o===null)o=dF(t,e,n,r,i),jk()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Fk();o.injectorIndex=s===null?-1:s.injectorIndex}return $i(o,!0),o}function dF(t,e,n,r,i){let o=ZD(),s=Im(),a=s?o:o&&o.parent,u=t.data[e]=fF(t,a,n,e,r,i);return hF(t,u,o,s),u}function hF(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function fF(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return xk()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var y7=new RegExp(`^(\\d+)*(${NO}|${RO})*(.*)`);var pF=()=>null;function tD(t,e){return pF(t,e)}var gF=class{},hC=class{},Vg=class{resolveComponentFactory(e){throw Error(`No component factory found for ${At(e)}.`)}},dd=class{static NULL=new Vg},Qo=class{},Ha=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>mF()}return t})();function mF(){let t=ae(),e=pt(),n=wn(e.index,t);return(Lr(n)?n:t)[Le]}var yF=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:()=>null})}return t})();var ng={},jg=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ql(r);let i=this.injector.get(e,ng,r);return i!==ng||n===ng?i:this.parentInjector.get(e,n,r)}};function Ug(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=lg(i,a);else if(o==2){let u=a,l=e[++s];r=lg(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function be(t,e=re.Default){let n=ae();if(n===null)return q(t,e);let r=pt();return mb(r,n,It(t),e)}function fC(){let t="invalid";throw new Error(t)}function Jm(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a,u=null,l=null,h=_F(s);h===null?a=s:[a,u,l]=h,wF(t,e,n,a,o,u,l)}o!==null&&r!==null&&vF(n,r,o)}function vF(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function _F(t){let e=null,n=!1;for(let s=0;s<t.length;s++){let a=t[s];if(s===0&&In(a)&&(e=a),a.findHostDirectiveDefs!==null){n=!0;break}}if(!n)return null;let r=null,i=null,o=null;for(let s of t)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,IF(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?t:t.slice(1)),[r,i,o]):null}function IF(t,e,n,r){let i=e.length;t.findHostDirectiveDefs(t,e,r),n.set(t,[i,e.length-1])}function EF(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function wF(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&In(y)&&(u=!0,EF(t,n,g)),wg(Fl(n,e),t,y.type)}AF(n,t.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=Kb(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(n.mergedAttrs=Ko(n.mergedAttrs,y.hostAttrs),DF(t,n,e,p,y),SF(p,y,i),s!==null&&s.has(y)){let[A,R]=s.get(y);n.directiveToIndex.set(y.type,[p,A+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let w=y.type.prototype;!l&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(w.ngOnChanges||w.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}TF(t,n,o)}function TF(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))nD(0,e,i,r),nD(1,e,i,r),iD(e,r,!1);else{let o=n.get(i);rD(0,e,o,r),rD(1,e,o,r),iD(e,r,!0)}}}function nD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),pC(e,o)}}function rD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),pC(e,s)}}function pC(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function iD(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Um(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function DF(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Ri(i.type,!0)),s=new Fi(o,In(i),be);t.blueprint[r]=s,n[r]=s,bF(t,e,r,Kb(t,n,i.hostVars,Mt),i)}function bF(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;CF(s)!=a&&s.push(a),s.push(n,r,o)}}function CF(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function SF(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;In(e)&&(n[""]=t)}}function AF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function gC(t,e,n,r,i,o,s,a){let u=e.consts,l=Go(u,s),h=ld(e,t,2,r,l);return o&&Jm(e,n,h,Go(u,a),i),h.mergedAttrs=Ko(h.mergedAttrs,h.attrs),h.attrs!==null&&Ug(h,h.attrs,!1),h.mergedAttrs!==null&&Ug(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function mC(t,e){Cm(t,e),pm(e)&&t.queries.elementEnd(e)}var $l=class extends dd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Mi(e);return new Yo(n,this.ngModule)}};function RF(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&od.SignalBased)!==0};return i&&(o.transform=i),o})}function NF(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function MF(t,e,n){let r=e instanceof Xe?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new jg(n,r):n}function PF(t){let e=t.get(Qo,null);if(e===null)throw new j(407,!1);let n=t.get(yF,null),r=t.get(Li,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r}}function xF(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return zb(e,n,n==="svg"?qD:n==="math"?Tk:null)}var Yo=class extends hC{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=RF(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=NF(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=s1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i){Ie(22);let o=se(null);try{let s=this.componentDef,a=r?["ng-version","19.2.15"]:a1(this.componentDef.selectors[0]),u=Bm(0,null,null,1,0,null,null,null,null,[a],null),l=MF(s,i||this.ngModule,e),h=PF(l),p=h.rendererFactory.createRenderer(null,s),g=r?y1(p,r,s.encapsulation,l):xF(s,p),y=$m(null,u,null,512|Gb(s),null,null,h,p,l,null,Lb(g,l,!0));y[Nt]=g,Tm(y);let w=null;try{let A=gC(Nt,u,y,"#host",()=>[this.componentDef],!0,0);g&&(Wb(p,g,A),os(g,y)),sd(u,y,A),Vm(u,A,y),mC(u,A),n!==void 0&&kF(A,this.ngContentSelectors,n),w=wn(A.index,y),y[Rt]=w[Rt],Gm(u,y,null)}catch(A){throw w!==null&&Ng(w),Ng(y),A}finally{Ie(23),Dm()}return new Bg(this.componentType,y)}finally{se(o)}}},Bg=class extends gF{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n){super(),this._rootLView=n,this._tNode=GD(n[ie],Nt),this.location=is(this._tNode,n),this.instance=wn(this._tNode.index,n)[Rt],this.hostView=this.changeDetectorRef=new La(n,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Wm(r,i[ie],i,e,n);this.previousInputValues.set(e,n);let s=wn(r.index,i);Zm(s,1)}get injector(){return new Ai(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function kF(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ur=(()=>{class t{static __NG_ELEMENT_ID__=OF}return t})();function OF(){let t=pt();return vC(t,ae())}var FF=Ur,yC=class extends FF{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return is(this._hostTNode,this._hostLView)}get injector(){return new Ai(this._hostTNode,this._hostLView)}get parentInjector(){let e=Sm(this._hostTNode,this._hostLView);if(lb(e)){let n=kl(e,this._hostLView),r=xl(e),i=n[ie].data[r+8];return new Ai(i,n)}else return new Ai(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=oD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Vt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=tD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,XT(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!_k(e),a;if(s)a=n;else{let w=n||{};a=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}let u=s?e:new Yo(Mi(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let A=(s?l:this.parentInjector).get(Xe,null);A&&(o=A)}let h=Mi(u.componentType??{}),p=tD(this._lContainer,h?.id??null),g=p?.firstChild??null,y=u.create(l,i,g,o);return this.insertImpl(y.hostView,a,XT(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Ck(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ft],l=new yC(u,u[sn],u[ft]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return sF(s,i,o,r),e.attachToViewContainerRef(),ND(rg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=oD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Lg(this._lContainer,n);r&&(Cl(rg(this._lContainer),n),eC(r[ie],r))}detach(e){let n=this._adjustIndex(e,-1),r=Lg(this._lContainer,n);return r&&Cl(rg(this._lContainer),n)!=null?new La(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function oD(t){return t[Ml]}function rg(t){return t[Ml]||(t[Ml]=[])}function vC(t,e){let n,r=e[t.index];return rr(r)?n=r:(n=lC(r,e,null,t),e[t.index]=n,Hm(e,n)),VF(n,e,t,r),new yC(n,t,e)}function LF(t,e){let n=t[Le],r=n.createComment(""),i=bn(e,t),o=n.parentNode(i);return Ul(n,o,r,n.nextSibling(i),!1),r}var VF=BF,jF=()=>!1;function UF(t,e,n){return jF(t,e,n)}function BF(t,e,n,r){if(t[xi])return;let i;n.type&8?i=En(r):i=LF(e,n),t[xi]=i}var $g=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Hg=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Xm(e,n).matches!==null&&this.queries[n].setDirty()}},Hl=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=QF(e):this.predicate=e}},zg=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},qg=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,$F(n,o)),this.matchTNodeWithReadOption(e,n,Il(n,e,o,!1,!1))}else r===Vi?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Il(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===sr||i===Ur||i===Vi&&n.type&4)this.addMatch(n.index,-2);else{let o=Il(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function $F(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function HF(t,e){return t.type&11?is(t,e):t.type&4?ud(t,e):null}function zF(t,e,n,r){return n===-1?HF(e,t):n===-2?qF(t,e,r):Fa(t,t[ie],n,e)}function qF(t,e,n){if(n===sr)return is(e,t);if(n===Vi)return ud(e,t);if(n===Ur)return vC(e,t)}function _C(t,e,n,r){let i=e[er].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(zF(e,h,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function Wg(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=_C(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=Vt;p<h.length;p++){let g=h[p];g[Pi]===g[ft]&&Wg(g[ie],g,l,r)}if(h[Wo]!==null){let p=h[Wo];for(let g=0;g<p.length;g++){let y=p[g];Wg(y[ie],y,l,r)}}}}}return r}function WF(t,e){return t[er].queries[e].queryList}function IC(t,e,n){let r=new Rg((n&4)===4);return Rk(t,e,r,r.destroy),(e[er]??=new Hg).queries.push(new $g(r))-1}function GF(t,e,n){let r=Be();return r.firstCreatePass&&(EC(r,new Hl(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),IC(r,ae(),e)}function KF(t,e,n,r){let i=Be();if(i.firstCreatePass){let o=pt();EC(i,new Hl(e,n,r),o.index),YF(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return IC(i,ae(),n)}function QF(t){return t.split(",").map(e=>e.trim())}function EC(t,e,n){t.queries===null&&(t.queries=new zg),t.queries.track(new qg(e,n))}function YF(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Xm(t,e){return t.queries.getByIndex(e)}function ZF(t,e){let n=t[ie],r=Xm(n,e);return r.crossesNgTemplate?Wg(n,t,e,[]):_C(n,t,r,e)}var Zo=class{},ey=class{};var Gg=class extends Zo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new $l(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=xD(e);this._bootstrapComponents=$b(o.bootstrap),this._r3Injector=_b(e,n,[{provide:Zo,useValue:this},{provide:dd,useValue:this.componentFactoryResolver},...r],At(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Kg=class extends ey{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Gg(this.moduleType,e,[])}};var zl=class extends Zo{injector;componentFactoryResolver=new $l(this);instance=null;constructor(e){super();let n=new ka([...e.providers,{provide:Zo,useValue:this},{provide:dd,useValue:this.componentFactoryResolver}],e.parent||hm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function za(t,e,n=null){return new zl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var JF=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=kD(!1,n.type),i=r.length>0?za([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=$({token:t,providedIn:"environment",factory:()=>new t(q(Xe))})}return t})();function wC(t){return ja(()=>{let e=TC(t),n=_e(L({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Ab.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(JF).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Tn.Emulated,styles:t.styles||St,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&as("NgStandalone"),DC(n);let r=t.dependencies;return n.directiveDefs=sD(r,!1),n.pipeDefs=sD(r,!0),n.id=rL(n),n})}function XF(t){return Mi(t)||ak(t)}function eL(t){return t!==null}function Hi(t){return ja(()=>({type:t.type,bootstrap:t.bootstrap||St,declarations:t.declarations||St,imports:t.imports||St,exports:t.exports||St,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function tL(t,e){if(t==null)return Ni;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=od.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function nL(t){if(t==null)return Ni;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Br(t){return ja(()=>{let e=TC(t);return DC(e),e})}function hd(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function TC(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Ni,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||St,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:tL(t.inputs,e),outputs:nL(t.outputs),debugInfo:null}}function DC(t){t.features?.forEach(e=>e(t))}function sD(t,e){if(!t)return null;let n=e?ck:XF;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(eL)}function rL(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function iL(t){return Object.getPrototypeOf(t.prototype).constructor}function oL(t){let e=iL(t.type),n=!0,r=[t];for(;e;){let i;if(In(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=ig(t.inputs),s.declaredInputs=ig(t.declaredInputs),s.outputs=ig(t.outputs);let a=i.hostBindings;a&&lL(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&cL(t,u),l&&uL(t,l),sL(t,i),jx(t.outputs,i.outputs),In(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===oL&&(n=!1)}}e=Object.getPrototypeOf(e)}aL(r)}function sL(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function aL(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ko(i.hostAttrs,n=Ko(n,i.hostAttrs))}}function ig(t){return t===Ni?{}:t===St?[]:t}function cL(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function uL(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function lL(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function bC(t){return hL(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function dL(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function hL(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function ty(t,e,n){return t[e]=n}function fL(t,e){return t[e]}function Dn(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function ny(t,e,n,r){let i=Dn(t,e,n);return Dn(t,e+1,r)||i}function pL(t,e,n,r,i){let o=ny(t,e,n,r);return Dn(t,e+2,i)||o}function gL(t,e,n,r,i,o,s,a,u){let l=e.consts,h=ld(e,t,4,s||null,a||null);_m()&&Jm(e,n,h,Go(l,u),qm),h.mergedAttrs=Ko(h.mergedAttrs,h.attrs),Cm(e,h);let p=h.tView=Bm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function mL(t,e,n,r,i,o,s,a,u,l){let h=n+Nt,p=e.firstCreatePass?gL(h,e,t,r,i,o,s,a,u):e.data[h];$i(p,!1);let g=vL(e,t,p,n);nd()&&ad(e,t,g,p),os(g,t);let y=lC(g,t,g,p);return t[h]=y,Hm(t,y),UF(y,p,t),Jl(p)&&sd(e,t,p),u!=null&&zm(t,p,l),p}function yL(t,e,n,r,i,o,s,a){let u=ae(),l=Be(),h=Go(l.consts,o);return mL(u,l,t,e,n,r,i,h,s,a),yL}var vL=_L;function _L(t,e,n,r){return rd(!0),e[Le].createComment("")}var CC=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var SC=new U("");var IL=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:()=>new Qg})}return t})(),Qg=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}};function cs(t){return!!t&&typeof t.then=="function"}function ry(t){return!!t&&typeof t.subscribe=="function"}var AC=new U("");function iy(t){return Qt([{provide:AC,multi:!0,useValue:t}])}var RC=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=P(AC,{optional:!0})??[];injector=P(Ze);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=et(this.injector,i);if(cs(o))n.push(o);else if(ry(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),fd=new U("");function EL(){qp(()=>{throw new j(600,!1)})}function wL(t){return t.isBoundToModule}var TL=10;var ji=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P(mO);afterRenderManager=P(Fb);zonelessEnabled=P(Nm);rootEffectScheduler=P(IL);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Qe;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=P(or).hasPendingTasks.pipe(X(n=>!n));constructor(){P(ss,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=P(Xe);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Ze.NULL){Ie(10);let o=n instanceof hC;if(!this._injector.get(RC).done){let y="";throw new j(405,y)}let a;o?a=n:a=this._injector.get(dd).resolveComponentFactory(n),this.componentTypes.push(a.componentType);let u=wL(a)?void 0:this._injector.get(Zo),l=r||a.selector,h=a.create(i,[],l,u),p=h.location.nativeElement,g=h.injector.get(SC,null);return g?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),El(this.components,h),g?.unregisterApplication(p)}),this._loadComponent(h),Ie(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ie(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Fm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let n=se(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,se(n),this.afterTick.next(),Ie(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Qo,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<TL;)Ie(14),this.synchronizeOnce(),Ie(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)DL(r,i,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Xl(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;El(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(fd,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>El(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function El(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function DL(t,e,n,r){if(!n&&!Xl(t))return;sC(t,e,n&&!r?0:1)}function oy(t,e,n,r){let i=ae(),o=ed();if(Dn(i,o,e)){let s=Be(),a=bm();b1(a,i,t,e,n,r)}return oy}function bL(t,e,n,r){return Dn(t,ed(),n)?e+Jn(n)+r:Mt}function CL(t,e,n,r,i,o){let s=eb(),a=ny(t,s,n,i);return td(2),a?e+Jn(n)+r+Jn(i)+o:Mt}function SL(t,e,n,r,i,o,s,a){let u=eb(),l=pL(t,u,n,i,s);return td(3),l?e+Jn(n)+r+Jn(i)+o+Jn(s)+a:Mt}function ml(t,e){return t<<17|e<<2}function Ui(t){return t>>17&32767}function AL(t){return(t&2)==2}function RL(t,e){return t&131071|e<<17}function Yg(t){return t|2}function Jo(t){return(t&131068)>>2}function og(t,e){return t&-131069|e<<2}function NL(t){return(t&1)===1}function Zg(t){return t|1}function ML(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ui(s),u=Jo(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Ua(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=Ui(t[a+1]);t[r+1]=ml(g,a),g!==0&&(t[g+1]=og(t[g+1],r)),t[a+1]=RL(t[a+1],r)}else t[r+1]=ml(a,0),a!==0&&(t[a+1]=og(t[a+1],r)),a=r;else t[r+1]=ml(u,0),a===0?a=r:t[u+1]=og(t[u+1],r),u=r;l&&(t[r+1]=Yg(t[r+1])),aD(t,h,r,!0),aD(t,h,r,!1),PL(e,h,t,r,o),s=ml(a,u),o?e.classBindings=s:e.styleBindings=s}function PL(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Ua(o,e)>=0&&(n[r+1]=Zg(n[r+1]))}function aD(t,e,n,r){let i=t[n+1],o=e===null,s=r?Ui(i):Jo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];xL(u,e)&&(a=!0,t[s+1]=r?Zg(l):Yg(l)),s=r?Ui(l):Jo(l)}a&&(t[n+1]=r?Yg(i):Zg(i))}function xL(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ua(t,e)>=0:!1}var nn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function kL(t){return t.substring(nn.key,nn.keyEnd)}function OL(t){return FL(t),NC(t,MC(t,0,nn.textEnd))}function NC(t,e){let n=nn.textEnd;return n===e?-1:(e=nn.keyEnd=LL(t,nn.key=e,n),MC(t,e,n))}function FL(t){nn.key=0,nn.keyEnd=0,nn.value=0,nn.valueEnd=0,nn.textEnd=t.length}function MC(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function LL(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function VL(t,e,n){let r=ae(),i=ed();if(Dn(r,i,e)){let o=Be(),s=bm();Zb(o,s,r,t,e,r[Le],n,!1)}return VL}function Jg(t,e,n,r,i){Wm(e,t,n,i?"class":"style",r)}function jL(t,e,n){return PC(t,e,n,!1),jL}function UL(t,e){return PC(t,e,null,!0),UL}function D7(t){$L(KL,BL,t,!0)}function BL(t,e){for(let n=OL(e);n>=0;n=NC(e,n))lm(t,kL(e),!0)}function PC(t,e,n,r){let i=ae(),o=Be(),s=td(2);if(o.firstUpdatePass&&kC(o,t,s,r),e!==Mt&&Dn(i,s,e)){let a=o.data[ir()];OC(o,a,i,i[Le],t,i[s+1]=YL(e,n),r,s)}}function $L(t,e,n,r){let i=Be(),o=td(2);i.firstUpdatePass&&kC(i,null,o,r);let s=ae();if(n!==Mt&&Dn(s,o,n)){let a=i.data[ir()];if(FC(a,r)&&!xC(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=lg(u,n||"")),Jg(i,a,s,n,r)}else QL(i,a,s,s[Le],s[o+1],s[o+1]=GL(t,e,n),r,o)}}function xC(t,e){return e>=t.expandoStartIndex}function kC(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[ir()],s=xC(t,n);FC(o,r)&&e===null&&!s&&(e=!1),e=HL(i,o,e,r),ML(i,o,e,n,s,r)}}function HL(t,e,n,r){let i=$k(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=sg(null,t,e,n,r),n=Va(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=sg(i,t,e,n,r),o===null){let u=zL(t,e,r);u!==void 0&&Array.isArray(u)&&(u=sg(null,t,e,u[1],r),u=Va(u,e.attrs,r),qL(t,e,r,u))}else o=WL(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function zL(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Jo(r)!==0)return t[Ui(r)]}function qL(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ui(i)]=r}function WL(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Va(r,s,n)}return Va(r,e.attrs,n)}function sg(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Va(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Va(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),lm(t,s,n?!0:e[++o]))}return t===void 0?null:t}function GL(t,e,n){if(n==null||n==="")return St;let r=[],i=$a(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function KL(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&lm(t,r,n)}function QL(t,e,n,r,i,o,s,a){i===Mt&&(i=St);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let g=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,w=null,A;h===p?(u+=2,l+=2,g!==y&&(w=p,A=y)):p===null||h!==null&&h<p?(u+=2,w=h):(l+=2,w=p,A=y),w!==null&&OC(t,e,n,r,w,A,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function OC(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=NL(l)?cD(u,e,n,i,Jo(l),s):void 0;if(!ql(h)){ql(o)||AL(l)&&(o=cD(u,null,n,i,a,s));let p=WD(ir(),n);W1(r,s,p,i,o)}}function cD(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===Mt&&(g=p?St:void 0);let y=p?Yp(g,r):h===r?g:void 0;if(l&&!ql(y)&&(y=Yp(u,r)),ql(y)&&(a=y,s))return a;let w=t[i+1];i=s?Ui(w):Jo(w)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Yp(u,r))}return a}function ql(t){return t!==void 0}function YL(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=At($a(t)))),t}function FC(t,e){return(t.flags&(e?8:16))!==0}function LC(t,e,n,r){let i=ae(),o=Be(),s=Nt+t,a=i[Le],u=o.firstCreatePass?gC(s,o,i,e,qm,_m(),n,r):o.data[s],l=ZL(o,i,u,a,e,t);i[s]=l;let h=Jl(u);return $i(u,!0),Wb(a,l,u),!Jb(u)&&nd()&&ad(o,i,l,u),(Nk()===0||h)&&os(l,i),Mk(),h&&(sd(o,i,u),Vm(o,u,i)),r!==null&&zm(i,u),LC}function VC(){let t=pt();Im()?JD():(t=t.parent,$i(t,!1));let e=t;kk(e)&&Ok(),Pk();let n=Be();return n.firstCreatePass&&mC(n,e),e.classesWithoutHost!=null&&Qk(e)&&Jg(n,e,ae(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Yk(e)&&Jg(n,e,ae(),e.stylesWithoutHost,!1),VC}function sy(t,e,n,r){return LC(t,e,n,r),VC(),sy}var ZL=(t,e,n,r,i,o)=>(rd(!0),zb(r,i,Wk()));function JL(t,e,n,r,i){let o=e.consts,s=Go(o,r),a=ld(e,t,8,"ng-container",s);s!==null&&Ug(a,s,!0);let u=Go(o,i);return _m()&&Jm(e,n,a,u,qm),a.mergedAttrs=Ko(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function XL(t,e,n){let r=ae(),i=Be(),o=t+Nt,s=i.firstCreatePass?JL(o,i,r,e,n):i.data[o];$i(s,!0);let a=tV(i,r,s,t);return r[o]=a,nd()&&ad(i,r,a,s),os(a,r),Jl(s)&&(sd(i,r,s),Vm(i,s,r)),n!=null&&zm(r,s),XL}function eV(){let t=pt(),e=Be();return Im()?JD():(t=t.parent,$i(t,!1)),e.firstCreatePass&&(Cm(e,t),pm(t)&&e.queries.elementEnd(t)),eV}var tV=(t,e,n,r)=>(rd(!0),l1(e[Le],""));function b7(){return ae()}var bi=void 0;function nV(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var rV=["en",[["a","p"],["AM","PM"],bi],[["AM","PM"],bi,bi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bi,"{1} 'at' {0}",bi],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",nV],ag={};function Ut(t){let e=iV(t),n=uD(e);if(n)return n;let r=e.split("-")[0];if(n=uD(r),n)return n;if(r==="en")return rV;throw new j(701,!1)}function uD(t){return t in ag||(ag[t]=Ci.ng&&Ci.ng.common&&Ci.ng.common.locales&&Ci.ng.common.locales[t]),ag[t]}var xe=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(xe||{});function iV(t){return t.toLowerCase().replace(/_/g,"-")}var Wl="en-US";var oV=Wl;function sV(t){typeof t=="string"&&(oV=t.toLowerCase().replace(/_/g,"-"))}function lD(t,e,n){return function r(i){if(i===Function)return n;let o=ts(t)?wn(t.index,e):e;Zm(o,5);let s=e[Rt],a=dD(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=dD(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function dD(t,e,n,r){let i=se(null);try{return Ie(6,e,n),n(r)!==!1}catch(o){return aV(t,o),!1}finally{Ie(7,e,n),se(i)}}function aV(t,e){let n=t[qo],r=n?n.get(on,null):null;r&&r.handleError(e)}function hD(t,e,n,r,i,o){let s=e[n],a=e[ie],l=a.data[n].outputs[r],h=s[l],p=a.firstCreatePass?vm(a):null,g=ym(e),y=h.subscribe(o),w=g.length;g.push(o,y),p&&p.push(i,t.index,w,-(w+1))}function ay(t,e,n,r){let i=ae(),o=Be(),s=pt();return jC(o,i,i[Le],s,t,e,r),ay}function cV(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Rl],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function jC(t,e,n,r,i,o,s){let a=Jl(r),l=t.firstCreatePass?vm(t):null,h=ym(e),p=!0;if(r.type&3||s){let g=bn(r,e),y=s?s(g):g,w=h.length,A=s?O=>s(En(O[r.index])):r.index,R=null;if(!s&&a&&(R=cV(t,e,i,r.index)),R!==null){let O=R.__ngLastListenerFn__||R;O.__ngNextListenerFn__=o,R.__ngLastListenerFn__=o,p=!1}else{o=lD(r,e,o),VO(e,y,i,o);let O=n.listen(y,i,o);h.push(o,O),l&&l.push(i,A,w,w+1)}}else o=lD(r,e,o);if(p){let g=r.outputs?.[i],y=r.hostDirectiveOutputs?.[i];if(y&&y.length)for(let w=0;w<y.length;w+=2){let A=y[w],R=y[w+1];hD(r,e,A,R,i,o)}if(g&&g.length)for(let w of g)hD(r,e,w,i,i,o)}}function C7(t=1){return zk(t)}function UC(t,e,n,r){KF(t,e,n,r)}function S7(t,e,n){GF(t,e,n)}function BC(t){let e=ae(),n=Be(),r=tb();wm(r+1);let i=Xm(n,r);if(t.dirty&&bk(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=ZF(e,r);t.reset(o,_O),t.notifyOnChanges()}return!0}return!1}function $C(){return WF(ae(),tb())}function A7(t){let e=Lk();return gm(e,Nt+t)}function R7(t,e=""){let n=ae(),r=Be(),i=t+Nt,o=r.firstCreatePass?ld(r,i,1,e,null):r.data[i],s=uV(r,n,o,e,t);n[i]=s,nd()&&ad(r,n,s,o),$i(o,!1)}var uV=(t,e,n,r,i)=>(rd(!0),c1(e[Le],r));function lV(t){return HC("",t,""),lV}function HC(t,e,n){let r=ae(),i=bL(r,t,e,n);return i!==Mt&&cy(r,ir(),i),HC}function dV(t,e,n,r,i){let o=ae(),s=CL(o,t,e,n,r,i);return s!==Mt&&cy(o,ir(),s),dV}function hV(t,e,n,r,i,o,s){let a=ae(),u=SL(a,t,e,n,r,i,o,s);return u!==Mt&&cy(a,ir(),u),hV}function cy(t,e,n){let r=WD(e,t);u1(t[Le],r,n)}function fV(t,e,n){Cb(e)&&(e=e());let r=ae(),i=ed();if(Dn(r,i,e)){let o=Be(),s=bm();Zb(o,s,r,t,e,r[Le],n,!1)}return fV}function N7(t,e){let n=Cb(t);return n&&t.set(e),n}function pV(t,e){let n=ae(),r=Be(),i=pt();return jC(r,n,n[Le],i,t,e),pV}function gV(t,e,n){let r=Be();if(r.firstCreatePass){let i=In(t);Xg(n,r.data,r.blueprint,i,!0),Xg(e,r.data,r.blueprint,i,!1)}}function Xg(t,e,n,r,i){if(t=It(t),Array.isArray(t))for(let o=0;o<t.length;o++)Xg(t[o],e,n,r,i);else{let o=Be(),s=ae(),a=pt(),u=zo(t)?t:It(t.provide),l=LD(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(zo(t)||!t.multi){let y=new Fi(l,i,be),w=ug(u,e,i?h:h+g,p);w===-1?(wg(Fl(a,s),o,u),cg(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[w]=y,s[w]=y)}else{let y=ug(u,e,h+g,p),w=ug(u,e,h,h+g),A=y>=0&&n[y],R=w>=0&&n[w];if(i&&!R||!i&&!A){wg(Fl(a,s),o,u);let O=vV(i?yV:mV,n.length,i,r,l);!i&&R&&(n[w].providerFactory=O),cg(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(O),s.push(O)}else{let O=zC(n[i?w:y],l,!i&&r);cg(o,t,y>-1?y:w,O)}!i&&r&&R&&n[w].componentProviders++}}}function cg(t,e,n,r){let i=zo(e),o=fk(e);if(i||o){let u=(o?It(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function zC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ug(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function mV(t,e,n,r,i){return em(this.multi,[])}function yV(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Fa(r,r[ie],this.providerFactory.index,i);s=u.slice(0,a),em(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],em(o,s);return s}function em(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function vV(t,e,n,r,i){let o=new Fi(t,n,be);return o.multi=[],o.index=e,o.componentProviders=0,zC(o,i,r&&!n),o}function M7(t,e=[]){return n=>{n.providersResolver=(r,i)=>gV(r,i?i(t):t,e)}}function P7(t,e,n){let r=Em()+t,i=ae();return i[r]===Mt?ty(i,r,n?e.call(n):e()):fL(i,r)}function qC(t,e){let n=t[e];return n===Mt?void 0:n}function _V(t,e,n,r,i,o){let s=e+n;return Dn(t,s,i)?ty(t,s+1,o?r.call(o,i):r(i)):qC(t,s+1)}function IV(t,e,n,r,i,o,s){let a=e+n;return ny(t,a,i,o)?ty(t,a+2,s?r.call(s,i,o):r(i,o)):qC(t,a+2)}function x7(t,e){let n=Be(),r,i=t+Nt;n.firstCreatePass?(r=EV(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Ri(r.type,!0)),s,a=Ct(be);try{let u=Ol(!1),l=o();return Ol(u),Dk(n,ae(),i,l),l}finally{Ct(a)}}function EV(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function k7(t,e,n){let r=t+Nt,i=ae(),o=gm(i,r);return WC(i,r)?_V(i,Em(),e,o.transform,n,o):o.transform(n)}function O7(t,e,n,r){let i=t+Nt,o=ae(),s=gm(o,i);return WC(o,i)?IV(o,Em(),e,s.transform,n,r,s):s.transform(n,r)}function WC(t,e){return t[ie].data[e].pure}function F7(t,e){return ud(t,e)}var Xo=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},GC=new Xo("19.2.15"),tm=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},KC=(()=>{class t{compileModuleSync(n){return new Kg(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=xD(n),o=$b(i.declarations).reduce((s,a)=>{let u=Mi(a);return u&&s.push(new Yo(u)),s},[]);return new tm(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var wV=(()=>{class t{zone=P(ge);changeDetectionScheduler=P(Li);applicationRef=P(ji);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),TV=new U("",{factory:()=>!1});function QC({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ge(_e(L({},YC()),{scheduleInRootZone:n})),[{provide:ge,useFactory:t},{provide:xa,multi:!0,useFactory:()=>{let r=P(wV,{optional:!0});return()=>r.initialize()}},{provide:xa,multi:!0,useFactory:()=>{let r=P(DV);return()=>{r.initialize()}}},e===!0?{provide:Eb,useValue:!0}:[],{provide:wb,useValue:n??Ib}]}function L7(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=QC({ngZoneFactory:()=>{let i=YC(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&as("NgZone_CoalesceEvent"),new ge(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Qt([{provide:TV,useValue:!0},{provide:Nm,useValue:!1},r])}function YC(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var DV=(()=>{class t{subscription=new Pe;initialized=!1;zone=P(ge);pendingTasks=P(or);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ge.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var bV=(()=>{class t{appRef=P(ji);taskService=P(or);ngZone=P(ge);zonelessEnabled=P(Nm);tracing=P(ss,{optional:!0});disableScheduling=P(Eb,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Pe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Vl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(wb,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Sg||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?zT:Tb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Vl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,zT(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function CV(){return typeof $localize<"u"&&$localize.locale||Wl}var qa=new U("",{providedIn:"root",factory:()=>P(qa,re.Optional|re.SkipSelf)||CV()});var nm=new U(""),SV=new U("");function Ra(t){return!t.moduleRef}function AV(t){let e=Ra(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ge);return n.run(()=>{Ra(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(on,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),Ra(t)){let o=()=>e.destroy(),s=t.platformInjector.get(nm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(nm);s.add(o),t.moduleRef.onDestroy(()=>{El(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return NV(r,n,()=>{let o=e.get(RC);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(qa,Wl);if(sV(s||Wl),!e.get(SV,!0))return Ra(t)?e.get(ji):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Ra(t)){let u=e.get(ji);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return RV(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function RV(t,e){let n=t.injector.get(ji);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new j(-403,!1);e.push(t)}function NV(t,e,n){try{let r=n();return cs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var wl=null;function MV(t=[],e){return Ze.create({name:e,providers:[{provide:Yl,useValue:"platform"},{provide:nm,useValue:new Set([()=>wl=null])},...t]})}function PV(t=[]){if(wl)return wl;let e=MV(t);return wl=e,EL(),xV(e),e}function xV(t){let e=t.get(km,null);et(t,()=>{e?.forEach(n=>n())})}function uy(){return!1}var zi=(()=>{class t{static __NG_ELEMENT_ID__=kV}return t})();function kV(t){return OV(pt(),ae(),(t&16)===16)}function OV(t,e,n){if(ts(t)&&!n){let r=wn(t.index,e);return new La(r,r)}else if(t.type&175){let r=e[_n];return new La(r,e)}return null}var rm=class{constructor(){}supports(e){return bC(e)}create(e){return new im(e)}},FV=(t,e)=>e,im=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||FV}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<fD(r,i,o)?n:r,a=fD(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,w=y+g;h<=w&&w<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!bC(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,dL(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new om(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Gl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Gl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},om=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},sm=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Gl=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new sm,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function fD(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function pD(){return new ly([new rm])}var ly=(()=>{class t{factories;static \u0275prov=$({token:t,providedIn:"root",factory:pD});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||pD()),deps:[[t,new nk,new jt]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new j(901,!1)}}return t})();function ZC(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Ie(8);try{let o=i?.injector??PV(r),s=[QC({}),{provide:Li,useExisting:bV},...n||[]],a=new zl({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return AV({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Ie(9)}}function Wa(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function pd(t){return Kp(t)}function LV(t,e){return zp(t,e?.equal)}var gD=class{[Gt];constructor(e){this[Gt]=e}destroy(){this[Gt].destroy()}};function JC(t){let e=Mi(t);if(!e)return null;let n=new Yo(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var $e=new U("");var tS=null;function cr(){return tS}function dy(t){tS??=t}var Ga=class{},Ka=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>P(nS),providedIn:"platform"})}return t})(),hy=new U(""),nS=(()=>{class t extends Ka{_location;_history;_doc=P($e);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return cr().getBaseHref(this._doc)}onPopState(n){let r=cr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=cr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function gd(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function XC(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function an(t){return t&&t[0]!=="?"?`?${t}`:t}var cn=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>P(yd),providedIn:"root"})}return t})(),md=new U(""),yd=(()=>{class t extends cn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P($e).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return gd(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+an(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+an(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+an(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(q(Ka),q(md,8))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$r=(()=>{class t{_subject=new Qe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=UV(XC(eS(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+an(r))}normalize(n){return t.stripTrailingSlash(jV(this._basePath,eS(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+an(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+an(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=an;static joinWithSlash=gd;static stripTrailingSlash=XC;static \u0275fac=function(r){return new(r||t)(q(cn))};static \u0275prov=$({token:t,factory:()=>VV(),providedIn:"root"})}return t})();function VV(){return new $r(q(cn))}function jV(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function eS(t){return t.replace(/\/index.html$/,"")}function UV(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Iy=(()=>{class t extends cn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=gd(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+an(o))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+an(o))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(q(Ka),q(md,8))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();var Ey=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(Ey||{});var gt=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(gt||{}),Ee=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Ee||{}),Pt=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Pt||{}),xt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function aS(t){return Ut(t)[xe.LocaleId]}function cS(t,e,n){let r=Ut(t),i=[r[xe.DayPeriodsFormat],r[xe.DayPeriodsStandalone]],o=Yt(i,e);return Yt(o,n)}function uS(t,e,n){let r=Ut(t),i=[r[xe.DaysFormat],r[xe.DaysStandalone]],o=Yt(i,e);return Yt(o,n)}function lS(t,e,n){let r=Ut(t),i=[r[xe.MonthsFormat],r[xe.MonthsStandalone]],o=Yt(i,e);return Yt(o,n)}function dS(t,e){let r=Ut(t)[xe.Eras];return Yt(r,e)}function Qa(t,e){let n=Ut(t);return Yt(n[xe.DateFormat],e)}function Ya(t,e){let n=Ut(t);return Yt(n[xe.TimeFormat],e)}function Za(t,e){let r=Ut(t)[xe.DateTimeFormat];return Yt(r,e)}function Cn(t,e){let n=Ut(t),r=n[xe.NumberSymbols][e];if(typeof r>"u"){if(e===xt.CurrencyDecimal)return n[xe.NumberSymbols][xt.Decimal];if(e===xt.CurrencyGroup)return n[xe.NumberSymbols][xt.Group]}return r}function hS(t,e){return Ut(t)[xe.NumberFormats][e]}function fS(t){if(!t[xe.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[xe.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function pS(t){let e=Ut(t);return fS(e),(e[xe.ExtraData][2]||[]).map(r=>typeof r=="string"?fy(r):[fy(r[0]),fy(r[1])])}function gS(t,e,n){let r=Ut(t);fS(r);let i=[r[xe.ExtraData][0],r[xe.ExtraData][1]],o=Yt(i,e)||[];return Yt(o,n)||[]}function Yt(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function fy(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var BV=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,vd={},$V=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function mS(t,e,n,r){let i=ZV(t);e=ur(n,e)||e;let s=[],a;for(;e;)if(a=$V.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=vS(r,u),i=YV(i,r));let l="";return s.forEach(h=>{let p=KV(h);l+=p?p(i,n,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Td(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function ur(t,e){let n=aS(t);if(vd[n]??={},vd[n][e])return vd[n][e];let r="";switch(e){case"shortDate":r=Qa(t,Pt.Short);break;case"mediumDate":r=Qa(t,Pt.Medium);break;case"longDate":r=Qa(t,Pt.Long);break;case"fullDate":r=Qa(t,Pt.Full);break;case"shortTime":r=Ya(t,Pt.Short);break;case"mediumTime":r=Ya(t,Pt.Medium);break;case"longTime":r=Ya(t,Pt.Long);break;case"fullTime":r=Ya(t,Pt.Full);break;case"short":let i=ur(t,"shortTime"),o=ur(t,"shortDate");r=_d(Za(t,Pt.Short),[i,o]);break;case"medium":let s=ur(t,"mediumTime"),a=ur(t,"mediumDate");r=_d(Za(t,Pt.Medium),[s,a]);break;case"long":let u=ur(t,"longTime"),l=ur(t,"longDate");r=_d(Za(t,Pt.Long),[u,l]);break;case"full":let h=ur(t,"fullTime"),p=ur(t,"fullDate");r=_d(Za(t,Pt.Full),[h,p]);break}return r&&(vd[n][e]=r),r}function _d(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function un(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function HV(t,e){return un(t,3).substring(0,e)}function He(t,e,n=0,r=!1,i=!1){return function(o,s){let a=zV(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return HV(a,e);let u=Cn(s,xt.MinusSign);return un(a,e,u,r,i)}}function zV(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function Ce(t,e,n=gt.Format,r=!1){return function(i,o){return qV(i,o,t,e,n,r)}}function qV(t,e,n,r,i,o){switch(n){case 2:return lS(e,i,r)[t.getMonth()];case 1:return uS(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=pS(e),h=gS(e,i,r),p=l.findIndex(g=>{if(Array.isArray(g)){let[y,w]=g,A=s>=y.hours&&a>=y.minutes,R=s<w.hours||s===w.hours&&a<w.minutes;if(y.hours<w.hours){if(A&&R)return!0}else if(A||R)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return cS(e,i,r)[s<12?0:1];case 3:return dS(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new Error(`unexpected translation type ${u}`)}}function Id(t){return function(e,n,r){let i=-1*r,o=Cn(n,xt.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+un(s,2,o)+un(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+un(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+un(s,2,o)+":"+un(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+un(s,2,o)+":"+un(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}var WV=0,wd=4;function GV(t){let e=Td(t,WV,1).getDay();return Td(t,0,1+(e<=wd?wd:wd+7)-e)}function yS(t){let e=t.getDay(),n=e===0?-3:wd-e;return Td(t.getFullYear(),t.getMonth(),t.getDate()+n)}function py(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=yS(n),s=GV(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return un(i,t,Cn(r,xt.MinusSign))}}function Ed(t,e=!1){return function(n,r){let o=yS(n).getFullYear();return un(o,t,Cn(r,xt.MinusSign),e)}}var gy={};function KV(t){if(gy[t])return gy[t];let e;switch(t){case"G":case"GG":case"GGG":e=Ce(3,Ee.Abbreviated);break;case"GGGG":e=Ce(3,Ee.Wide);break;case"GGGGG":e=Ce(3,Ee.Narrow);break;case"y":e=He(0,1,0,!1,!0);break;case"yy":e=He(0,2,0,!0,!0);break;case"yyy":e=He(0,3,0,!1,!0);break;case"yyyy":e=He(0,4,0,!1,!0);break;case"Y":e=Ed(1);break;case"YY":e=Ed(2,!0);break;case"YYY":e=Ed(3);break;case"YYYY":e=Ed(4);break;case"M":case"L":e=He(1,1,1);break;case"MM":case"LL":e=He(1,2,1);break;case"MMM":e=Ce(2,Ee.Abbreviated);break;case"MMMM":e=Ce(2,Ee.Wide);break;case"MMMMM":e=Ce(2,Ee.Narrow);break;case"LLL":e=Ce(2,Ee.Abbreviated,gt.Standalone);break;case"LLLL":e=Ce(2,Ee.Wide,gt.Standalone);break;case"LLLLL":e=Ce(2,Ee.Narrow,gt.Standalone);break;case"w":e=py(1);break;case"ww":e=py(2);break;case"W":e=py(1,!0);break;case"d":e=He(2,1);break;case"dd":e=He(2,2);break;case"c":case"cc":e=He(7,1);break;case"ccc":e=Ce(1,Ee.Abbreviated,gt.Standalone);break;case"cccc":e=Ce(1,Ee.Wide,gt.Standalone);break;case"ccccc":e=Ce(1,Ee.Narrow,gt.Standalone);break;case"cccccc":e=Ce(1,Ee.Short,gt.Standalone);break;case"E":case"EE":case"EEE":e=Ce(1,Ee.Abbreviated);break;case"EEEE":e=Ce(1,Ee.Wide);break;case"EEEEE":e=Ce(1,Ee.Narrow);break;case"EEEEEE":e=Ce(1,Ee.Short);break;case"a":case"aa":case"aaa":e=Ce(0,Ee.Abbreviated);break;case"aaaa":e=Ce(0,Ee.Wide);break;case"aaaaa":e=Ce(0,Ee.Narrow);break;case"b":case"bb":case"bbb":e=Ce(0,Ee.Abbreviated,gt.Standalone,!0);break;case"bbbb":e=Ce(0,Ee.Wide,gt.Standalone,!0);break;case"bbbbb":e=Ce(0,Ee.Narrow,gt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ce(0,Ee.Abbreviated,gt.Format,!0);break;case"BBBB":e=Ce(0,Ee.Wide,gt.Format,!0);break;case"BBBBB":e=Ce(0,Ee.Narrow,gt.Format,!0);break;case"h":e=He(3,1,-12);break;case"hh":e=He(3,2,-12);break;case"H":e=He(3,1);break;case"HH":e=He(3,2);break;case"m":e=He(4,1);break;case"mm":e=He(4,2);break;case"s":e=He(5,1);break;case"ss":e=He(5,2);break;case"S":e=He(6,1);break;case"SS":e=He(6,2);break;case"SSS":e=He(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Id(0);break;case"ZZZZZ":e=Id(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Id(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Id(2);break;default:return null}return gy[t]=e,e}function vS(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function QV(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function YV(t,e,n){let i=t.getTimezoneOffset(),o=vS(e,i);return QV(t,-1*(o-i))}function ZV(t){if(rS(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return Td(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(BV))return JV(r)}let e=new Date(t);if(!rS(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function JV(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,u,l),e}function rS(t){return t instanceof Date&&!isNaN(t.valueOf())}var XV=/^(\d+)?\.((\d+)(-(\d+))?)?$/,iS=22,Dd=".",Ja="0",e2=";",t2=",",my="#";function n2(t,e,n,r,i,o,s=!1){let a="",u=!1;if(!isFinite(t))a=Cn(n,xt.Infinity);else{let l=o2(t);s&&(l=i2(l));let h=e.minInt,p=e.minFrac,g=e.maxFrac;if(o){let H=o.match(XV);if(H===null)throw new Error(`${o} is not a valid digit info`);let B=H[1],de=H[3],je=H[5];B!=null&&(h=yy(B)),de!=null&&(p=yy(de)),je!=null?g=yy(je):de!=null&&p>g&&(g=p)}s2(l,p,g);let y=l.digits,w=l.integerLen,A=l.exponent,R=[];for(u=y.every(H=>!H);w<h;w++)y.unshift(0);for(;w<0;w++)y.unshift(0);w>0?R=y.splice(w,y.length):(R=y,y=[0]);let O=[];for(y.length>=e.lgSize&&O.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)O.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&O.unshift(y.join("")),a=O.join(Cn(n,r)),R.length&&(a+=Cn(n,i)+R.join("")),A&&(a+=Cn(n,xt.Exponential)+"+"+A)}return t<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function _S(t,e,n){let r=hS(e,Ey.Decimal),i=r2(r,Cn(e,xt.MinusSign));return n2(t,i,e,xt.Group,xt.Decimal,n)}function r2(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(e2),i=r[0],o=r[1],s=i.indexOf(Dd)!==-1?i.split(Dd):[i.substring(0,i.lastIndexOf(Ja)+1),i.substring(i.lastIndexOf(Ja)+1)],a=s[0],u=s[1]||"";n.posPre=a.substring(0,a.indexOf(my));for(let h=0;h<u.length;h++){let p=u.charAt(h);p===Ja?n.minFrac=n.maxFrac=h+1:p===my?n.maxFrac=h+1:n.posSuf+=p}let l=a.split(t2);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let h=i.length-n.posPre.length-n.posSuf.length,p=o.indexOf(my);n.negPre=o.substring(0,p).replace(/'/g,""),n.negSuf=o.slice(p+h).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function i2(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function o2(t){let e=Math.abs(t)+"",n=0,r,i,o,s,a;for((i=e.indexOf(Dd))>-1&&(e=e.replace(Dd,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Ja;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Ja;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>iS&&(r=r.splice(0,iS-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function s2(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(a>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,l=e+t.integerLen,h=r.reduceRight(function(p,g,y,w){return g=g+p,w[y]=g<10?g:g-10,u&&(w[y]===0&&y>=l?w.pop():u=!1),g>=10?1:0},0);h&&(r.unshift(h),t.integerLen++)}function yy(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}var bd=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},IS=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new bd(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),oS(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);oS(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(be(Ur),be(Vi),be(ly))};static \u0275dir=Br({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function oS(t,e){t.context.$implicit=e.item}var a2=(()=>{class t{_viewContainer;_context=new Cd;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){sS(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){sS(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(be(Ur),be(Vi))};static \u0275dir=Br({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Cd=class{$implicit=null;ngIf=null};function sS(t,e){if(t&&!t.createEmbeddedView)throw new j(2020,!1)}function wy(t,e){return new j(2100,!1)}var vy=class{createSubscription(e,n){return pd(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){pd(()=>e.unsubscribe())}},_y=class{createSubscription(e,n){return e.then(r=>n?.(r),r=>{throw r}),{unsubscribe:()=>{n=null}}}dispose(e){e.unsubscribe()}},c2=new _y,u2=new vy,l2=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(cs(n))return c2;if(ry(n))return u2;throw wy(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(be(zi,16))};static \u0275pipe=hd({name:"async",type:t,pure:!1})}return t})();var d2="mediumDate",ES=new U(""),wS=new U(""),h2=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??d2,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return mS(n,s,o||this.locale,a)}catch(s){throw wy(t,s.message)}}static \u0275fac=function(r){return new(r||t)(be(qa,16),be(ES,24),be(wS,24))};static \u0275pipe=hd({name:"date",type:t,pure:!0})}return t})();var f2=(()=>{class t{_locale;constructor(n){this._locale=n}transform(n,r,i){if(!p2(n))return null;i||=this._locale;try{let o=g2(n);return _S(o,i,r)}catch(o){throw wy(t,o.message)}}static \u0275fac=function(r){return new(r||t)(be(qa,16))};static \u0275pipe=hd({name:"number",type:t,pure:!0})}return t})();function p2(t){return!(t==null||t===""||t!==t)}function g2(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var TS=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Hi({type:t});static \u0275inj=Bi({})}return t})();function Xa(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ty="browser",DS="server";function Sd(t){return t===DS}var qi=class{};var bS=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:()=>new Dy(P($e),window)})}return t})(),Dy=class{document;window;offset=()=>[0,0];constructor(e,n){this.document=e,this.window=n}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=m2(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function m2(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Nd=new U(""),Ay=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(q(Nd),q(ge))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),ec=class{_doc;constructor(e){this._doc=e}manager},Ad="ng-app-id";function CS(t){for(let e of t)e.remove()}function SS(t,e){let n=e.createElement("style");return n.textContent=t,n}function v2(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Ad}="${e}"],link[${Ad}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Ad),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Cy(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Ry=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.isServer=Sd(o),v2(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,SS);r?.forEach(i=>this.addUsage(i,this.external,Cy))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(CS(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])CS(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,SS(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Cy(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Ad,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(q($e),q(xm),q(Om,8),q(jr))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),by={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ny=/%COMP%/g;var RS="%COMP%",_2=`_nghost-${RS}`,I2=`_ngcontent-${RS}`,E2=!0,w2=new U("",{providedIn:"root",factory:()=>E2});function T2(t){return I2.replace(Ny,t)}function D2(t){return _2.replace(Ny,t)}function NS(t,e){return e.map(n=>n.replace(Ny,t))}var My=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u,l=null,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=Sd(a),this.defaultRenderer=new tc(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Tn.ShadowDom&&(r=_e(L({},r),{encapsulation:Tn.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Rd?i.applyToHost(n):i instanceof nc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case Tn.Emulated:o=new Rd(u,l,r,this.appId,h,s,a,p,g);break;case Tn.ShadowDom:return new Sy(u,l,n,r,s,a,this.nonce,p,g);default:o=new nc(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(q(Ay),q(Ry),q(xm),q(w2),q($e),q(jr),q(ge),q(Om),q(ss,8))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),tc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(by[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(AS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(AS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=by[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=by[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(tr.DashCase|tr.Important)?e.style.setProperty(n,r,i&tr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&tr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=cr().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function AS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Sy=class extends tc{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=NS(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=Cy(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},nc=class extends tc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?NS(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Rd=class extends nc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=T2(h),this.hostAttr=D2(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Md=class t extends Ga{supportsDOMEvents=!0;static makeCurrent(){dy(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=b2();return n==null?null:C2(n)}resetBaseElement(){rc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Xa(document.cookie,e)}},rc=null;function b2(){return rc=rc||document.head.querySelector("base"),rc?rc.getAttribute("href"):null}function C2(t){return new URL(t,document.baseURI).pathname}var S2=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),PS=(()=>{class t extends ec{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(q($e))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),MS=["alt","control","meta","shift"],A2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},R2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},xS=(()=>{class t extends ec{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>cr().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),MS.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=A2[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),MS.forEach(s=>{if(s!==i){let a=R2[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(q($e))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();function N2(t,e,n){return ZC(L({rootComponent:t,platformRef:n?.platformRef},M2(e)))}function M2(t){return{appProviders:[...F2,...t?.providers??[]],platformProviders:O2}}function P2(){Md.makeCurrent()}function x2(){return new on}function k2(){return xb(document),document}var O2=[{provide:jr,useValue:Ty},{provide:km,useValue:P2,multi:!0},{provide:$e,useFactory:k2}];var F2=[{provide:Yl,useValue:"root"},{provide:on,useFactory:x2},{provide:Nd,useClass:PS,multi:!0,deps:[$e]},{provide:Nd,useClass:xS,multi:!0,deps:[$e]},My,Ry,Ay,{provide:Qo,useExisting:My},{provide:qi,useClass:S2},[]];var ls=class{},oc=class{},Wi=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var xd=class{encodeKey(e){return kS(e)}encodeValue(e){return kS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function L2(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}var V2=/%(\d[a-f0-9])/gi,j2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function kS(t){return encodeURIComponent(t).replace(V2,(e,n)=>j2[n]??e)}function Pd(t){return`${t}`}var Hr=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new xd,e.fromString){if(e.fromObject)throw new j(2805,!1);this.map=L2(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Pd):[Pd(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Pd(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Pd(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var kd=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function U2(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function OS(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function FS(t){return typeof Blob<"u"&&t instanceof Blob}function LS(t){return typeof FormData<"u"&&t instanceof FormData}function B2(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var VS="Content-Type",jS="Accept",US="X-Request-URL",BS="text/plain",$S="application/json",$2=`${$S}, ${BS}, */*`,ic=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,n,r,i){this.url=n,this.method=e.toUpperCase();let o;if(U2(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Wi,this.context??=new kd,!this.params)this.params=new Hr,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||OS(this.body)||FS(this.body)||LS(this.body)||B2(this.body)?this.body:this.body instanceof Hr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||LS(this.body)?null:FS(this.body)?this.body.type||null:OS(this.body)?null:typeof this.body=="string"?BS:this.body instanceof Hr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?$S:null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((g,y)=>g.set(y,e.setHeaders[y]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((g,y)=>g.set(y,e.setParams[y]),h)),new t(n,r,s,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},us=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(us||{}),ds=class{headers;status;statusText;url;ok;type;constructor(e,n=200,r="OK"){this.headers=e.headers||new Wi,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Od=class t extends ds{constructor(e={}){super(e)}type=us.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Fd=class t extends ds{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=us.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ld=class extends ds{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},H2=200,z2=204;function Py(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var q2=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof ic)o=n;else{let u;i.headers instanceof Wi?u=i.headers:u=new Wi(i.headers);let l;i.params&&(i.params instanceof Hr?l=i.params:l=new Hr({fromObject:i.params})),o=new ic(n,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=z(o).pipe(yn(u=>this.handler.handle(u)));if(n instanceof ic||i.observe==="events")return s;let a=s.pipe(ht(u=>u instanceof Fd));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(X(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new j(2806,!1);return u.body}));case"blob":return a.pipe(X(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new j(2807,!1);return u.body}));case"text":return a.pipe(X(u=>{if(u.body!==null&&typeof u.body!="string")throw new j(2808,!1);return u.body}));case"json":default:return a.pipe(X(u=>u.body))}case"response":return a;default:throw new j(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Hr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Py(i,r))}post(n,r,i={}){return this.request("POST",n,Py(i,r))}put(n,r,i={}){return this.request("PUT",n,Py(i,r))}static \u0275fac=function(r){return new(r||t)(q(ls))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();var W2=new U("");function G2(t,e){return e(t)}function K2(t,e,n){return(r,i)=>et(n,()=>e(r,o=>t(o,i)))}var HS=new U(""),Q2=new U(""),zS=new U("",{providedIn:"root",factory:()=>!0});var Vd=(()=>{class t extends ls{backend;injector;chain=null;pendingTasks=P(or);contributeToStability=P(zS);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(HS),...this.injector.get(Q2,[])]));this.chain=r.reduceRight((i,o)=>K2(i,o,this.injector),G2)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(Di(()=>this.pendingTasks.remove(r)))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(q(oc),q(Xe))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();var Y2=/^\)\]\}',?\n/,Z2=RegExp(`^${US}:`,"m");function J2(t){return"responseURL"in t&&t.responseURL?t.responseURL:Z2.test(t.getAllResponseHeaders())?t.getResponseHeader(US):null}var xy=(()=>{class t{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new j(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Te(r.\u0275loadImpl()):z(null)).pipe(bt(()=>new J(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((A,R)=>s.setRequestHeader(A,R.join(","))),n.headers.has(jS)||s.setRequestHeader(jS,$2),!n.headers.has(VS)){let A=n.detectContentTypeHeader();A!==null&&s.setRequestHeader(VS,A)}if(n.responseType){let A=n.responseType.toLowerCase();s.responseType=A!=="json"?A:"text"}let a=n.serializeBody(),u=null,l=()=>{if(u!==null)return u;let A=s.statusText||"OK",R=new Wi(s.getAllResponseHeaders()),O=J2(s)||n.url;return u=new Od({headers:R,status:s.status,statusText:A,url:O}),u},h=()=>{let{headers:A,status:R,statusText:O,url:H}=l(),B=null;R!==z2&&(B=typeof s.response>"u"?s.responseText:s.response),R===0&&(R=B?H2:0);let de=R>=200&&R<300;if(n.responseType==="json"&&typeof B=="string"){let je=B;B=B.replace(Y2,"");try{B=B!==""?JSON.parse(B):null}catch(me){B=je,de&&(de=!1,B={error:me,text:B})}}de?(o.next(new Fd({body:B,headers:A,status:R,statusText:O,url:H||void 0})),o.complete()):o.error(new Ld({error:B,headers:A,status:R,statusText:O,url:H||void 0}))},p=A=>{let{url:R}=l(),O=new Ld({error:A,status:s.status||0,statusText:s.statusText||"Unknown Error",url:R||void 0});o.error(O)},g=!1,y=A=>{g||(o.next(l()),g=!0);let R={type:us.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(R.total=A.total),n.responseType==="text"&&s.responseText&&(R.partialText=s.responseText),o.next(R)},w=A=>{let R={type:us.UploadProgress,loaded:A.loaded};A.lengthComputable&&(R.total=A.total),o.next(R)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),n.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",w)),s.send(a),o.next({type:us.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),n.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",w)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(q(qi))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),qS=new U(""),X2="XSRF-TOKEN",ej=new U("",{providedIn:"root",factory:()=>X2}),tj="X-XSRF-TOKEN",nj=new U("",{providedIn:"root",factory:()=>tj}),sc=class{},rj=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r){this.doc=n,this.cookieName=r}getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Xa(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||t)(q($e),q(ej))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();function ij(t,e){let n=t.url.toLowerCase();if(!P(qS)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=P(sc).getToken(),i=P(nj);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function oj(...t){let e=[q2,xy,Vd,{provide:ls,useExisting:Vd},{provide:oc,useFactory:()=>P(W2,{optional:!0})??P(xy)},{provide:HS,useValue:ij,multi:!0},{provide:qS,useValue:!0},{provide:sc,useClass:rj}];for(let n of t)e.push(...n.\u0275providers);return Qt(e)}var WS=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(q($e))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ne="primary",_c=Symbol("RouteTitle"),Vy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Qi(t){return new Vy(t)}function eA(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function aj(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Sn(t[n],e[n]))return!1;return!0}function Sn(t,e){let n=t?jy(t):void 0,r=e?jy(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!tA(t[i],e[i]))return!1;return!0}function jy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function tA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function nA(t){return t.length>0?t[t.length-1]:null}function Kr(t){return Np(t)?t:cs(t)?Te(Promise.resolve(t)):z(t)}var cj={exact:iA,subset:oA},rA={exact:uj,subset:lj,ignored:()=>!0};function GS(t,e,n){return cj[n.paths](t.root,e.root,n.matrixParams)&&rA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function uj(t,e){return Sn(t,e)}function iA(t,e,n){if(!Gi(t.segments,e.segments)||!Bd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!iA(t.children[r],e.children[r],n))return!1;return!0}function lj(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>tA(t[n],e[n]))}function oA(t,e,n){return sA(t,e,e.segments,n)}function sA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Gi(i,n)||e.hasChildren()||!Bd(i,n,r))}else if(t.segments.length===n.length){if(!Gi(t.segments,n)||!Bd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!oA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Gi(t.segments,i)||!Bd(t.segments,i,r)||!t.children[ne]?!1:sA(t.children[ne],e,o,r)}}function Bd(t,e,n){return e.every((r,i)=>rA[n](t[i].parameters,r.parameters))}var Rn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ye([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Qi(this.queryParams),this._queryParamMap}toString(){return fj.serialize(this)}},ye=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $d(this)}},zr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Qi(this.parameters),this._parameterMap}toString(){return cA(this)}};function dj(t,e){return Gi(t,e)&&t.every((n,r)=>Sn(n.parameters,e[r].parameters))}function Gi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function hj(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ne&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ne&&(n=n.concat(e(i,r)))}),n}var Yi=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>new qr,providedIn:"root"})}return t})(),qr=class{parse(e){let n=new By(e);return new Rn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ac(e.root,!0)}`,r=mj(e.queryParams),i=typeof e.fragment=="string"?`#${pj(e.fragment)}`:"";return`${n}${r}${i}`}},fj=new qr;function $d(t){return t.segments.map(e=>cA(e)).join("/")}function ac(t,e){if(!t.hasChildren())return $d(t);if(e){let n=t.children[ne]?ac(t.children[ne],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ne&&r.push(`${i}:${ac(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=hj(t,(r,i)=>i===ne?[ac(t.children[ne],!1)]:[`${i}:${ac(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ne]!=null?`${$d(t)}/${n[0]}`:`${$d(t)}/(${n.join("//")})`}}function aA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jd(t){return aA(t).replace(/%3B/gi,";")}function pj(t){return encodeURI(t)}function Uy(t){return aA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hd(t){return decodeURIComponent(t)}function KS(t){return Hd(t.replace(/\+/g,"%20"))}function cA(t){return`${Uy(t.path)}${gj(t.parameters)}`}function gj(t){return Object.entries(t).map(([e,n])=>`;${Uy(e)}=${Uy(n)}`).join("")}function mj(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${jd(n)}=${jd(i)}`).join("&"):`${jd(n)}=${jd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var yj=/^[^\/()?;#]+/;function ky(t){let e=t.match(yj);return e?e[0]:""}var vj=/^[^\/()?;=#]+/;function _j(t){let e=t.match(vj);return e?e[0]:""}var Ij=/^[^=?&#]+/;function Ej(t){let e=t.match(Ij);return e?e[0]:""}var wj=/^[^&#]+/;function Tj(t){let e=t.match(wj);return e?e[0]:""}var By=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ye([],{}):new ye([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ne]=new ye(e,n)),r}parseSegment(){let e=ky(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new zr(Hd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=_j(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=ky(this.remaining);i&&(r=i,this.capture(r))}e[Hd(n)]=Hd(r)}parseQueryParam(e){let n=Ej(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=Tj(this.remaining);s&&(r=s,this.capture(r))}let i=KS(n),o=KS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ky(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ne);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[ne]:new ye([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function uA(t){return t.segments.length>0?new ye([],{[ne]:t}):t}function lA(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=lA(i);if(r===ne&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ye(t.segments,e);return Dj(n)}function Dj(t){if(t.numberOfChildren===1&&t.children[ne]){let e=t.children[ne];return new ye(t.segments.concat(e.segments),e.children)}return t}function Wr(t){return t instanceof Rn}function dA(t,e,n=null,r=null){let i=hA(t);return fA(i,e,n,r)}function hA(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new ye(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=uA(r);return e??i}function fA(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Oy(i,i,i,n,r);let o=bj(e);if(o.toRoot())return Oy(i,i,new ye([],{}),n,r);let s=Cj(o,i,t),a=s.processChildren?uc(s.segmentGroup,s.index,o.commands):gA(s.segmentGroup,s.index,o.commands);return Oy(i,s.segmentGroup,a,n,r)}function qd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function dc(t){return typeof t=="object"&&t!=null&&t.outlets}function Oy(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=pA(t,e,n);let a=uA(lA(s));return new Rn(a,o,i)}function pA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=pA(o,e,n)}),new ye(t.segments,r)}var Wd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&qd(r[0]))throw new j(4003,!1);let i=r.find(dc);if(i&&i!==nA(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function bj(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Wd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Wd(n,e,r)}var ps=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Cj(t,e,n){if(t.isAbsolute)return new ps(e,!0,0);if(!n)return new ps(e,!1,NaN);if(n.parent===null)return new ps(n,!0,0);let r=qd(t.commands[0])?0:1,i=n.segments.length-1+r;return Sj(n,i,t.numberOfDoubleDots)}function Sj(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new ps(r,!1,i-o)}function Aj(t){return dc(t[0])?t[0].outlets:{[ne]:t}}function gA(t,e,n){if(t??=new ye([],{}),t.segments.length===0&&t.hasChildren())return uc(t,e,n);let r=Rj(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ye(t.segments.slice(0,r.pathIndex),{});return o.children[ne]=new ye(t.segments.slice(r.pathIndex),t.children),uc(o,0,i)}else return r.match&&i.length===0?new ye(t.segments,{}):r.match&&!t.hasChildren()?$y(t,e,n):r.match?uc(t,0,i):$y(t,e,n)}function uc(t,e,n){if(n.length===0)return new ye(t.segments,{});{let r=Aj(n),i={};if(Object.keys(r).some(o=>o!==ne)&&t.children[ne]&&t.numberOfChildren===1&&t.children[ne].segments.length===0){let o=uc(t.children[ne],e,n);return new ye(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=gA(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ye(t.segments,i)}}function Rj(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(dc(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!YS(u,l,s))return o;r+=2}else{if(!YS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function $y(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(dc(o)){let u=Nj(o.outlets);return new ye(r,u)}if(i===0&&qd(n[0])){let u=t.segments[e];r.push(new zr(u.path,QS(n[0]))),i++;continue}let s=dc(o)?o.outlets[ne]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&qd(a)?(r.push(new zr(s,QS(a))),i+=2):(r.push(new zr(s,{})),i++)}return new ye(r,{})}function Nj(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=$y(new ye([],{}),0,r))}),e}function QS(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function YS(t,e,n){return t==n.path&&Sn(e,n.parameters)}var zd="imperative",Je=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Je||{}),$t=class{id;url;constructor(e,n){this.id=e,this.url=n}},Gr=class extends $t{type=Je.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ht=class extends $t{urlAfterRedirects;type=Je.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},kt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(kt||{}),ms=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ms||{}),An=class extends $t{reason;code;type=Je.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Nn=class extends $t{reason;code;type=Je.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},ys=class extends $t{error;target;type=Je.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},hc=class extends $t{urlAfterRedirects;state;type=Je.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gd=class extends $t{urlAfterRedirects;state;type=Je.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kd=class extends $t{urlAfterRedirects;state;shouldActivate;type=Je.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Qd=class extends $t{urlAfterRedirects;state;type=Je.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yd=class extends $t{urlAfterRedirects;state;type=Je.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zd=class{route;type=Je.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Jd=class{route;type=Je.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Xd=class{snapshot;type=Je.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},eh=class{snapshot;type=Je.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},th=class{snapshot;type=Je.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nh=class{snapshot;type=Je.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vs=class{routerEvent;position;anchor;type=Je.Scroll;constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},fc=class{},_s=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function Mj(t,e){return t.providers&&!t._injector&&(t._injector=za(t.providers,e,`Route: ${t.path}`)),t._injector??e}function ln(t){return t.outlet||ne}function Pj(t,e){let n=t.filter(r=>ln(r)===e);return n.push(...t.filter(r=>ln(r)!==e)),n}function Ic(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var rh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ic(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Zi(this.rootInjector)}},Zi=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new rh(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(q(Xe))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ih=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Hy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Hy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=zy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return zy(e,this._root).map(n=>n.value)}};function Hy(t,e){if(t===e.value)return e;for(let n of e.children){let r=Hy(t,n);if(r)return r}return null}function zy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=zy(t,n);if(r.length)return r.unshift(e),r}return[]}var Bt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function fs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var pc=class extends ih{snapshot;constructor(e,n){super(e),this.snapshot=n,Jy(this,e)}toString(){return this.snapshot.toString()}};function mA(t){let e=xj(t),n=new st([new zr("",{})]),r=new st({}),i=new st({}),o=new st({}),s=new st(""),a=new Mn(n,r,o,s,i,ne,t,e.root);return a.snapshot=e.root,new pc(new Bt(a,[]),e)}function xj(t){let e={},n={},r={},i="",o=new Ki([],e,r,i,n,ne,t,null,{});return new gc("",new Bt(o,[]))}var Mn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(X(l=>l[_c]))??z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(X(e=>Qi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(X(e=>Qi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function oh(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),i?.data),t._resolvedData)}:r={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},i&&vA(i)&&(r.resolve[_c]=i.title),r}var Ki=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[_c]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},gc=class extends ih{url;constructor(e,n){super(n),this.url=e,Jy(this,n)}toString(){return yA(this._root)}};function Jy(t,e){e.value._routerState=t,e.children.forEach(n=>Jy(t,n))}function yA(t){let e=t.children.length>0?` { ${t.children.map(yA).join(", ")} } `:"";return`${t.value}${e}`}function Fy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Sn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Sn(e.params,n.params)||t.paramsSubject.next(n.params),aj(e.url,n.url)||t.urlSubject.next(n.url),Sn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function qy(t,e){let n=Sn(t.params,e.params)&&dj(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||qy(t.parent,e.parent))}function vA(t){return typeof t.title=="string"||t.title===null}var _A=new U(""),Xy=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ne;activateEvents=new Et;deactivateEvents=new Et;attachEvents=new Et;detachEvents=new Et;routerOutletData=bb(void 0);parentContexts=P(Zi);location=P(Ur);changeDetector=P(zi);inputBinder=P(Ec,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Wy(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Br({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[rs]})}return t})(),Wy=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Mn?this.route:e===Zi?this.childContexts:e===_A?this.outletData:this.parent.get(e,n)}},Ec=new U(""),ev=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=wa([r.queryParams,r.params,r.data]).pipe(bt(([o,s,a],u)=>(a=L(L(L({},o),s),a),u===0?z(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let s=JC(r.component);if(!s){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(n,i)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),tv=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=wC({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&sy(0,"router-outlet")},dependencies:[Xy],encapsulation:2})}return t})();function nv(t){let e=t.children&&t.children.map(nv),n=e?_e(L({},t),{children:e}):L({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ne&&(n.component=tv),n}function kj(t,e,n){let r=mc(t,e._root,n?n._root:void 0);return new pc(r,e)}function mc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Oj(t,e,n);return new Bt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>mc(t,a)),s}}let r=Fj(e.value),i=e.children.map(o=>mc(t,o));return new Bt(r,i)}}function Oj(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return mc(t,r,i);return mc(t,r)})}function Fj(t){return new Mn(new st(t.url),new st(t.params),new st(t.queryParams),new st(t.fragment),new st(t.data),t.outlet,t.component,t)}var Is=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},IA="ngNavigationCancelingError";function sh(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Wr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=EA(!1,kt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function EA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[IA]=!0,n.cancellationCode=e,n}function Lj(t){return wA(t)&&Wr(t.url)}function wA(t){return!!t&&t[IA]}var Vj=(t,e,n,r)=>X(i=>(new Gy(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Gy=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Fy(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=fs(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=fs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=fs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=fs(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new nh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new eh(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Fy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Fy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},ah=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},gs=class{component;route;constructor(e,n){this.component=e,this.route=n}};function jj(t,e,n){let r=t._root,i=e?e._root:null;return cc(r,i,n,[r.value])}function Uj(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ws(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!wD(t)?t:e.get(t):r}function cc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=fs(e);return t.children.forEach(s=>{Bj(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>lc(a,n.getContext(s),i)),i}function Bj(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=$j(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ah(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?cc(t,e,a?a.children:null,r,i):cc(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new gs(a.outlet.component,s))}else s&&lc(e,a,i),i.canActivateChecks.push(new ah(r)),o.component?cc(t,null,a?a.children:null,r,i):cc(t,null,n,r,i);return i}function $j(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Gi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Gi(t.url,e.url)||!Sn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qy(t,e)||!Sn(t.queryParams,e.queryParams);case"paramsChange":default:return!qy(t,e)}}function lc(t,e,n){let r=fs(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?lc(s,e.children.getContext(o),n):lc(s,null,n):lc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new gs(e.outlet.component,i)):n.canDeactivateChecks.push(new gs(null,i)):n.canDeactivateChecks.push(new gs(null,i))}function wc(t){return typeof t=="function"}function Hj(t){return typeof t=="boolean"}function zj(t){return t&&wc(t.canLoad)}function qj(t){return t&&wc(t.canActivate)}function Wj(t){return t&&wc(t.canActivateChild)}function Gj(t){return t&&wc(t.canDeactivate)}function Kj(t){return t&&wc(t.canMatch)}function TA(t){return t instanceof Gn||t?.name==="EmptyError"}var Ud=Symbol("INITIAL_VALUE");function Es(){return bt(t=>wa(t.map(e=>e.pipe(Qn(1),sl(Ud)))).pipe(X(e=>{for(let n of e)if(n!==!0){if(n===Ud)return Ud;if(n===!1||Qj(n))return n}return!0}),ht(e=>e!==Ud),Qn(1)))}function Qj(t){return Wr(t)||t instanceof Is}function Yj(t,e){return Fe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?z(_e(L({},n),{guardsResult:!0})):Zj(s,r,i,t).pipe(Fe(a=>a&&Hj(a)?Jj(r,o,t,e):z(a)),X(a=>_e(L({},n),{guardsResult:a})))})}function Zj(t,e,n,r){return Te(t).pipe(Fe(i=>rU(i.component,i.route,n,e,r)),Yn(i=>i!==!0,!0))}function Jj(t,e,n,r){return Te(e).pipe(yn(i=>Fo(eU(i.route.parent,r),Xj(i.route,r),nU(t,i.path,n),tU(t,i.route,n))),Yn(i=>i!==!0,!0))}function Xj(t,e){return t!==null&&e&&e(new th(t)),z(!0)}function eU(t,e){return t!==null&&e&&e(new Xd(t)),z(!0)}function tU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return z(!0);let i=r.map(o=>rl(()=>{let s=Ic(e)??n,a=ws(o,s),u=qj(a)?a.canActivate(e,t):et(s,()=>a(e,t));return Kr(u).pipe(Yn())}));return z(i).pipe(Es())}function nU(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Uj(s)).filter(s=>s!==null).map(s=>rl(()=>{let a=s.guards.map(u=>{let l=Ic(s.node)??n,h=ws(u,l),p=Wj(h)?h.canActivateChild(r,t):et(l,()=>h(r,t));return Kr(p).pipe(Yn())});return z(a).pipe(Es())}));return z(o).pipe(Es())}function rU(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return z(!0);let s=o.map(a=>{let u=Ic(e)??i,l=ws(a,u),h=Gj(l)?l.canDeactivate(t,e,n,r):et(u,()=>l(t,e,n,r));return Kr(h).pipe(Yn())});return z(s).pipe(Es())}function iU(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return z(!0);let o=i.map(s=>{let a=ws(s,t),u=zj(a)?a.canLoad(e,n):et(t,()=>a(e,n));return Kr(u)});return z(o).pipe(Es(),DA(r))}function DA(t){return Lu(at(e=>{if(typeof e!="boolean")throw sh(t,e)}),X(e=>e===!0))}function oU(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return z(!0);let o=i.map(s=>{let a=ws(s,t),u=Kj(a)?a.canMatch(e,n):et(t,()=>a(e,n));return Kr(u)});return z(o).pipe(Es(),DA(r))}var yc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},vc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function hs(t){return Oo(new yc(t))}function sU(t){return Oo(new j(4e3,!1))}function aU(t){return Oo(EA(!1,kt.GuardRejected))}var Ky=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return z(r);if(i.numberOfChildren>1||!i.children[ne])return sU(`${e.redirectTo}`);i=i.children[ne]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:g,params:y,data:w,title:A}=i,R=et(o,()=>a({params:y,data:w,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:g,title:A}));if(R instanceof Rn)throw new vc(R);n=R}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new vc(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Rn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new ye(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Qy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cU(t,e,n,r,i){let o=bA(t,e,n);return o.matched?(r=Mj(e,r),oU(r,e,n,i).pipe(X(s=>s===!0?o:L({},Qy)))):z(o)}function bA(t,e,n){if(e.path==="**")return uU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?L({},Qy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||eA)(n,t,e);if(!i)return L({},Qy);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function uU(t){return{matched:!0,parameters:t.length>0?nA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function ZS(t,e,n,r){return n.length>0&&hU(t,n,r)?{segmentGroup:new ye(e,dU(r,new ye(n,t.children))),slicedSegments:[]}:n.length===0&&fU(t,n,r)?{segmentGroup:new ye(t.segments,lU(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ye(t.segments,t.children),slicedSegments:n}}function lU(t,e,n,r){let i={};for(let o of n)if(uh(t,e,o)&&!r[ln(o)]){let s=new ye([],{});i[ln(o)]=s}return L(L({},r),i)}function dU(t,e){let n={};n[ne]=e;for(let r of t)if(r.path===""&&ln(r)!==ne){let i=new ye([],{});n[ln(r)]=i}return n}function hU(t,e,n){return n.some(r=>uh(t,e,r)&&ln(r)!==ne)}function fU(t,e,n){return n.some(r=>uh(t,e,r))}function uh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function pU(t,e,n){return e.length===0&&!t.children[n]}var Yy=class{};function gU(t,e,n,r,i,o,s="emptyOnly"){return new Zy(t,e,n,r,i,s,o).recognize()}var mU=31,Zy=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Ky(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=ZS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(X(({children:n,rootSnapshot:r})=>{let i=new Bt(r,n),o=new gc("",i),s=dA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Ki([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ne,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ne,n).pipe(X(r=>({children:r,rootSnapshot:n})),Kn(r=>{if(r instanceof vc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof yc?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(X(s=>s instanceof Bt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Te(o).pipe(yn(s=>{let a=r.children[s],u=Pj(n,s);return this.processSegmentGroup(e,u,a,s,i)}),ol((s,a)=>(s.push(...a),s)),Or(null),Mp(),Fe(s=>{if(s===null)return hs(r);let a=CA(s);return yU(a),z(a)}))}processSegment(e,n,r,i,o,s,a){return Te(n).pipe(yn(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Kn(l=>{if(l instanceof yc)return z(null);throw l}))),Yn(u=>!!u),Kn(u=>{if(TA(u))return pU(r,i,o)?z(new Yy):hs(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return ln(r)!==s&&(s===ne||!uh(i,o,r))?hs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):hs(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=bA(n,i,o);if(!u)return hs(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>mU&&(this.allowRedirects=!1));let y=new Ki(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,JS(i),ln(i),i.component??i._loadedComponent??null,i,XS(i)),w=oh(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(w.params),y.data=Object.freeze(w.data);let A=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(Fe(R=>this.processSegment(e,r,n,R.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=cU(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(bt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(bt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,w=new Ki(g,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,JS(r),ln(r),r.component??r._loadedComponent??null,r,XS(r)),A=oh(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(A.params),w.data=Object.freeze(A.data);let{segmentGroup:R,slicedSegments:O}=ZS(n,g,y,l);if(O.length===0&&R.hasChildren())return this.processChildren(h,l,R,w).pipe(X(B=>new Bt(w,B)));if(l.length===0&&O.length===0)return z(new Bt(w,[]));let H=ln(r)===o;return this.processSegment(h,l,R,O,H?ne:o,!0,w).pipe(X(B=>new Bt(w,B instanceof Bt?[B]:[])))}))):hs(n)))}getChildConfig(e,n,r){return n.children?z({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?z({routes:n._loadedRoutes,injector:n._loadedInjector}):iU(e,n,r,this.urlSerializer).pipe(Fe(i=>i?this.configLoader.loadChildren(e,n).pipe(at(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):aU(n))):z({routes:[],injector:e})}};function yU(t){t.sort((e,n)=>e.value.outlet===ne?-1:n.value.outlet===ne?1:e.value.outlet.localeCompare(n.value.outlet))}function vU(t){let e=t.value.routeConfig;return e&&e.path===""}function CA(t){let e=[],n=new Set;for(let r of t){if(!vU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=CA(r.children);e.push(new Bt(r.value,i))}return e.filter(r=>!n.has(r))}function JS(t){return t.data||{}}function XS(t){return t.resolve||{}}function _U(t,e,n,r,i,o){return Fe(s=>gU(t,e,n,r,s.extractedUrl,i,o).pipe(X(({state:a,tree:u})=>_e(L({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function IU(t,e){return Fe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return z(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of SA(u))s.add(l);let a=0;return Te(s).pipe(yn(u=>o.has(u)?EU(u,r,t,e):(u.data=oh(u,u.parent,t).resolve,z(void 0))),at(()=>a++),Lo(1),Fe(u=>a===s.size?z(n):Dt))})}function SA(t){let e=t.children.map(n=>SA(n)).flat();return[t,...e]}function EU(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!vA(i)&&(o[_c]=i.title),wU(o,t,e,r).pipe(X(s=>(t._resolvedData=s,t.data=oh(t,t.parent,n).resolve,null)))}function wU(t,e,n,r){let i=jy(t);if(i.length===0)return z({});let o={};return Te(i).pipe(Fe(s=>TU(t[s],e,n,r).pipe(Yn(),at(a=>{if(a instanceof Is)throw sh(new qr,a);o[s]=a}))),Lo(1),X(()=>o),Kn(s=>TA(s)?Dt:Oo(s)))}function TU(t,e,n,r){let i=Ic(e)??r,o=ws(t,i),s=o.resolve?o.resolve(e,n):et(i,()=>o(e,n));return Kr(s)}function Ly(t){return bt(e=>{let n=t(e);return n?Te(n).pipe(X(()=>e)):z(e)})}var rv=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ne);return r}getResolvedTitleForRoute(n){return n.data[_c]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>P(AA),providedIn:"root"})}return t})(),AA=(()=>{class t extends rv{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(q(WS))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ji=new U("",{providedIn:"root",factory:()=>({})}),Xi=new U(""),lh=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=P(KC);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return z(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Kr(n.loadComponent()).pipe(X(NA),at(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),Di(()=>{this.componentLoaders.delete(n)})),i=new Mo(r,()=>new Qe).pipe(No());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=RA(r,this.compiler,n,this.onLoadEndListener).pipe(Di(()=>{this.childrenLoaders.delete(r)})),s=new Mo(o,()=>new Qe).pipe(No());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function RA(t,e,n,r){return Kr(t.loadChildren()).pipe(X(NA),Fe(i=>i instanceof ey||Array.isArray(i)?z(i):Te(e.compileModuleAsync(i))),X(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Xi,[],{optional:!0,self:!0}).flat()),{routes:s.map(nv),injector:o}}))}function DU(t){return t&&typeof t=="object"&&"default"in t}function NA(t){return DU(t)?t.default:t}var dh=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>P(bU),providedIn:"root"})}return t})(),bU=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),iv=new U(""),ov=new U("");function MA(t,e,n){let r=t.get(ov),i=t.get($e);return t.get(ge).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),CU(t))),{onViewTransitionCreated:u}=r;return u&&et(t,()=>u({transition:a,from:e,to:n})),s})}function CU(t){return new Promise(e=>{Lm({read:()=>setTimeout(e)},{injector:t})})}var sv=new U(""),hh=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Qe;transitionAbortSubject=new Qe;configLoader=P(lh);environmentInjector=P(Xe);destroyRef=P(Vr);urlSerializer=P(Yi);rootContexts=P(Zi);location=P($r);inputBindingEnabled=P(Ec,{optional:!0})!==null;titleStrategy=P(rv);options=P(Ji,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=P(dh);createViewTransition=P(iv,{optional:!0});navigationErrorHandler=P(sv,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>z(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Zd(i)),r=i=>this.events.next(new Jd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(_e(L({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(n){return this.transitions=new st(null),this.transitions.pipe(ht(r=>r!==null),bt(r=>{let i=!1,o=!1;return z(r).pipe(bt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",kt.SupersededByNewNavigation),Dt;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?_e(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!a&&u!=="reload"){let l="";return this.events.next(new Nn(s.id,this.urlSerializer.serialize(s.rawUrl),l,ms.IgnoredSameUrlNavigation)),s.resolve(!1),Dt}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return z(s).pipe(bt(l=>(this.events.next(new Gr(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Dt:Promise.resolve(l))),_U(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),at(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=_e(L({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let h=new hc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:h,source:p,restoredState:g,extras:y}=s,w=new Gr(l,this.urlSerializer.serialize(h),p,g);this.events.next(w);let A=mA(this.rootComponentType).snapshot;return this.currentTransition=r=_e(L({},s),{targetSnapshot:A,urlAfterRedirects:h,extras:_e(L({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,z(r)}else{let l="";return this.events.next(new Nn(s.id,this.urlSerializer.serialize(s.extractedUrl),l,ms.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Dt}}),at(s=>{let a=new Gd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),X(s=>(this.currentTransition=r=_e(L({},s),{guards:jj(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),Yj(this.environmentInjector,s=>this.events.next(s)),at(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw sh(this.urlSerializer,s.guardsResult);let a=new Kd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),ht(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",kt.GuardRejected),!1)),Ly(s=>{if(s.guards.canActivateChecks.length!==0)return z(s).pipe(at(a=>{let u=new Qd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),bt(a=>{let u=!1;return z(a).pipe(IU(this.paramsInheritanceStrategy,this.environmentInjector),at({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",kt.NoDataFromResolver)}}))}),at(a=>{let u=new Yd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),Ly(s=>{let a=u=>{let l=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(u.routeConfig).pipe(at(h=>{u.component=h}),X(()=>{})));for(let h of u.children)l.push(...a(h));return l};return wa(a(s.targetSnapshot.root)).pipe(Or(null),Qn(1))}),Ly(()=>this.afterPreactivation()),bt(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Te(u).pipe(X(()=>r)):z(r)}),X(s=>{let a=kj(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=_e(L({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),at(()=>{this.events.next(new fc)}),Vj(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Qn(1),at({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ht(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Xu(this.transitionAbortSubject.pipe(at(s=>{throw s}))),Di(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",kt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Kn(s=>{if(this.destroyed)return r.resolve(!1),Dt;if(o=!0,wA(s))this.events.next(new An(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),Lj(s)?this.events.next(new _s(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new ys(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=et(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Is){let{message:l,cancellationCode:h}=sh(this.urlSerializer,u);this.events.next(new An(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new _s(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Dt}))}))}cancelNavigationTransition(n,r,i){let o=new An(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function SU(t){return t!==zd}var PA=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>P(AU),providedIn:"root"})}return t})(),ch=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},AU=(()=>{class t extends ch{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Am(t)))(i||t)}})();static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xA=(()=>{class t{urlSerializer=P(Yi);options=P(Ji,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=P($r);urlHandlingStrategy=P(dh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Rn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Rn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=mA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>P(RU),providedIn:"root"})}return t})(),RU=(()=>{class t extends xA{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Gr?this.updateStateMemento():n instanceof Nn?this.commitTransition(r):n instanceof hc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof fc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof An&&(n.code===kt.GuardRejected||n.code===kt.NoDataFromResolver)?this.restoreHistory(r):n instanceof ys?this.restoreHistory(r,!0):n instanceof Ht&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=L(L({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=L(L({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Am(t)))(i||t)}})();static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fh(t,e){t.events.pipe(ht(n=>n instanceof Ht||n instanceof An||n instanceof ys||n instanceof Nn),X(n=>n instanceof Ht||n instanceof Nn?0:(n instanceof An?n.code===kt.Redirect||n.code===kt.SupersededByNewNavigation:!1)?2:1),ht(n=>n!==2),Qn(1)).subscribe(()=>{e()})}var NU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},MU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},dn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=P(CC);stateManager=P(xA);options=P(Ji,{optional:!0})||{};pendingTasks=P(or);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=P(hh);urlSerializer=P(Yi);location=P($r);urlHandlingStrategy=P(dh);_events=new Qe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=P(PA);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=P(Xi,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!P(Ec,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Pe;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof An&&r.code!==kt.Redirect&&r.code!==kt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ht)this.navigated=!0;else if(r instanceof _s){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||SU(i.source)},s);this.scheduleNavigation(a,zd,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}xU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),zd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(nv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=hA(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return fA(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Wr(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,zd,null,r)}navigate(n,r={skipLocationChange:!1}){return PU(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=L({},NU):r===!1?i=L({},MU):i=r,Wr(n))return GS(this.currentUrlTree,n,i);let o=this.parseUrl(n);return GS(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return fh(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function PU(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}function xU(t){return!(t instanceof fc)&&!(t instanceof _s)}var ph=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Qe;constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof Ht&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Wr(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:Ub(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Wr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(be(dn),be(Mn),Rm("tabindex"),be(Ha),be(sr),be(cn))};static \u0275dir=Br({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&ay("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&oy("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Wa],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Wa],replaceUrl:[2,"replaceUrl","replaceUrl",Wa],routerLink:"routerLink"},features:[rs]})}return t})(),kU=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Et;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof Ht&&this.update()})}ngAfterContentInit(){z(this.links.changes,z(null)).pipe(kr()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Te(n).pipe(kr()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=OU(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?n.isActive(o,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(be(dn),be(sr),be(Ha),be(zi),be(ph,8))};static \u0275dir=Br({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&UC(o,ph,5),r&2){let s;BC(s=$C())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[rs]})}return t})();function OU(t){return!!t.paths}var Tc=class{};var kA=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(n,r,i,o){this.router=n,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ht(n=>n instanceof Ht),yn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=za(o.providers,n,`Route: ${o.path}`));let s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Te(i).pipe(kr())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=z(null);let o=i.pipe(Fe(s=>s===null?z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Te([o,s]).pipe(kr())}else return o})}static \u0275fac=function(r){return new(r||t)(q(dn),q(Xe),q(Tc),q(lh))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),OA=new U(""),FU=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Gr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Ht?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Nn&&n.code===ms.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof vs&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new vs(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){fC()};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();function LU(t,...e){return Qt([{provide:Xi,multi:!0,useValue:t},[],{provide:Mn,useFactory:FA,deps:[dn]},{provide:fd,multi:!0,useFactory:LA},e.map(n=>n.\u0275providers)])}function FA(t){return t.routerState.root}function Dc(t,e){return{\u0275kind:t,\u0275providers:e}}function LA(){let t=P(Ze);return e=>{let n=t.get(ji);if(e!==n.components[0])return;let r=t.get(dn),i=t.get(VA);t.get(cv)===1&&r.initialNavigation(),t.get(BA,null,re.Optional)?.setUpPreloading(),t.get(OA,null,re.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var VA=new U("",{factory:()=>new Qe}),cv=new U("",{providedIn:"root",factory:()=>1});function jA(){let t=[{provide:cv,useValue:0},iy(()=>{let e=P(Ze);return e.get(hy,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(dn),o=e.get(VA);fh(i,()=>{r(!0)}),e.get(hh).afterPreactivation=()=>(r(!0),o.closed?z(void 0):o),i.initialNavigation()}))})];return Dc(2,t)}function UA(){let t=[iy(()=>{P(dn).setUpLocationChangeListener()}),{provide:cv,useValue:2}];return Dc(3,t)}var BA=new U("");function $A(t){return Dc(0,[{provide:BA,useExisting:kA},{provide:Tc,useExisting:t}])}function HA(){return Dc(8,[ev,{provide:Ec,useExisting:ev}])}function zA(t){as("NgRouterViewTransitions");let e=[{provide:iv,useValue:MA},{provide:ov,useValue:L({skipNextTransition:!!t?.skipInitialTransition},t)}];return Dc(9,e)}var qA=[$r,{provide:Yi,useClass:qr},dn,Zi,{provide:Mn,useFactory:FA,deps:[dn]},lh,[]],VU=(()=>{class t{constructor(){}static forRoot(n,r){return{ngModule:t,providers:[qA,[],{provide:Xi,multi:!0,useValue:n},[],r?.errorHandler?{provide:sv,useValue:r.errorHandler}:[],{provide:Ji,useValue:r||{}},r?.useHash?UU():BU(),jU(),r?.preloadingStrategy?$A(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?$U(r):[],r?.bindToComponentInputs?HA().\u0275providers:[],r?.enableViewTransitions?zA().\u0275providers:[],HU()]}}static forChild(n){return{ngModule:t,providers:[{provide:Xi,multi:!0,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Hi({type:t});static \u0275inj=Bi({})}return t})();function jU(){return{provide:OA,useFactory:()=>{let t=P(bS),e=P(ge),n=P(Ji),r=P(hh),i=P(Yi);return n.scrollOffset&&t.setOffset(n.scrollOffset),new FU(i,r,t,e,n)}}}function UU(){return{provide:cn,useClass:Iy}}function BU(){return{provide:cn,useClass:yd}}function $U(t){return[t.initialNavigation==="disabled"?UA().\u0275providers:[],t.initialNavigation==="enabledBlocking"?jA().\u0275providers:[]]}var av=new U("");function HU(){return[{provide:av,useFactory:LA},{provide:fd,multi:!0,useExisting:av}]}var WA=()=>{};var lv={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var zU=function(t,e){if(!t)throw qU(e)},qU=function(t){return new Error("Firebase Database ("+lv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var ZA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},WU=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},gh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):WU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new dv;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let w=l<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},dv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},GU=function(t){let e=ZA(t);return gh.encodeByteArray(e,!0)},Cc=function(t){return GU(t).replace(/\./g,"")},Ts=function(t){try{return gh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function lZ(t){return JA(void 0,t)}function JA(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!KU(n)||(t[n]=JA(t[n],e[n]));return t}function KU(t){return t!=="__proto__"}function fv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var QU=()=>fv().__FIREBASE_DEFAULTS__,YU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Ts(t[1]);return e&&JSON.parse(e)},mh=()=>{try{return WA()||QU()||YU()||ZU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pv=t=>{var e,n;return(n=(e=mh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},XA=t=>{let e=pv(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gv=()=>{var t;return(t=mh())===null||t===void 0?void 0:t.config},mv=t=>{var e;return(e=mh())===null||e===void 0?void 0:e[`_${t}`]};var eo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Qr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function yh(t){return _(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function e0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Cc(JSON.stringify(n)),Cc(JSON.stringify(s)),""].join(".")}var bc={};function JU(){let t={prod:[],emulator:[]};for(let e of Object.keys(bc))bc[e]?t.emulator.push(e):t.prod.push(e);return t}function XU(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var GA=!1;function vh(t,e){if(typeof window>"u"||typeof document>"u"||!Qr(window.location.host)||bc[t]===e||bc[t]||GA)return;bc[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=JU().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{GA=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=XU(r),y=n("text"),w=document.getElementById(y)||document.createElement("span"),A=n("learnmore"),R=document.getElementById(A)||document.createElement("a"),O=n("preprendIcon"),H=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let B=g.element;a(B),h(R,A);let de=l();u(H,O),B.append(H,w,R,de),document.body.appendChild(B)}o?(w.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function t0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function eB(){var t;let e=(t=mh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function n0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function r0(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function i0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function o0(){let t=tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dZ(){return lv.NODE_CLIENT===!0||lv.NODE_ADMIN===!0}function s0(){return!eB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sc(){try{return typeof indexedDB=="object"}catch{return!1}}function a0(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var tB="FirebaseError",zt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=tB,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hn.prototype.create)}},hn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?nB(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new zt(i,a,r)}};function nB(t,e){return t.replace(rB,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var rB=/\{\$([^}]+)}/g;function KA(t){return JSON.parse(t)}function hZ(t){return JSON.stringify(t)}var c0=function(t){let e={},n={},r={},i="";try{let o=t.split(".");e=KA(Ts(o[0])||""),n=KA(Ts(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var fZ=function(t){let e=c0(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},pZ=function(t){let e=c0(t).claims;return typeof e=="object"&&e.admin===!0};function gZ(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function mZ(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function u0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function yZ(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Pn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(QA(o)&&QA(s)){if(!Pn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function QA(t){return t!==null&&typeof t=="object"}function Ac(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ds(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function bs(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var YA=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){let g=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(g<<1|g>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],u=this.chain_[4],l,h;for(let p=0;p<80;p++){p<40?p<20?(l=a^o&(s^a),h=1518500249):(l=o^s^a,h=1859775393):p<60?(l=o&s|a&(o|s),h=2400959708):(l=o^s^a,h=3395469782);let g=(i<<5|i>>>27)+l+u+h+r[p]&4294967295;u=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=g}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}};function l0(t,e){let n=new hv(t,e);return n.subscribe.bind(n)}var hv=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");iB(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=uv),i.error===void 0&&(i.error=uv),i.complete===void 0&&(i.complete=uv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function iB(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function uv(){}function vZ(t,e){return`${t} failed: ${e} argument `}var _Z=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,zU(r<t.length,"Surrogate pair missing trail surrogate.");let s=t.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},IZ=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var EZ=4*60*60*1e3;function Ve(t){return t&&t._delegate?t._delegate:t}var wt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var to="[DEFAULT]";var yv=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new eo;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sB(e))try{this.getOrInitializeService({instanceIdentifier:to})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=to){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=to){return this.instances.has(e)}getOptions(e=to){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oB(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=to){return this.component?this.component.multipleInstances?e:to:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function oB(t){return t===to?void 0:t}function sB(t){return t.instantiationMode==="EAGER"}var _h=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new yv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var aB=[],ce=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ce||{}),cB={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},uB=ce.INFO,lB={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},dB=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=lB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},xn=class{constructor(e){this.name=e,this._logLevel=uB,this._logHandler=dB,this._userLogHandler=null,aB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var hB=(t,e)=>e.some(n=>t instanceof n),d0,h0;function fB(){return d0||(d0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pB(){return h0||(h0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var f0=new WeakMap,_v=new WeakMap,p0=new WeakMap,vv=new WeakMap,Ev=new WeakMap;function gB(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(kn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&f0.set(n,t)}).catch(()=>{}),Ev.set(e,t),e}function mB(t){if(_v.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});_v.set(t,e)}var Iv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _v.get(t);if(e==="objectStoreNames")return t.objectStoreNames||p0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function g0(t){Iv=t(Iv)}function yB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Ih(this),e,...n);return p0.set(r,e.sort?e.sort():[e]),kn(r)}:pB().includes(t)?function(...e){return t.apply(Ih(this),e),kn(f0.get(this))}:function(...e){return kn(t.apply(Ih(this),e))}}function vB(t){return typeof t=="function"?yB(t):(t instanceof IDBTransaction&&mB(t),hB(t,fB())?new Proxy(t,Iv):t)}function kn(t){if(t instanceof IDBRequest)return gB(t);if(vv.has(t))return vv.get(t);let e=vB(t);return e!==t&&(vv.set(t,e),Ev.set(e,t)),e}var Ih=t=>Ev.get(t);function y0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=kn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(kn(s.result),u.oldVersion,u.newVersion,kn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var _B=["get","getKey","getAll","getAllKeys","count"],IB=["put","add","delete","clear"],wv=new Map;function m0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wv.get(e))return wv.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=IB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_B.includes(n)))return;let o=function(s,...a){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return wv.set(e,o),o}g0(t=>_e(L({},t),{get:(e,n,r)=>m0(e,n)||t.get(e,n,r),has:(e,n)=>!!m0(e,n)||t.has(e,n)}));var Dv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(EB(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function EB(t){let e=t.getComponent();return e?.type==="VERSION"}var bv="@firebase/app",v0="0.13.2";var lr=new xn("@firebase/app"),wB="@firebase/app-compat",TB="@firebase/analytics-compat",DB="@firebase/analytics",bB="@firebase/app-check-compat",CB="@firebase/app-check",SB="@firebase/auth",AB="@firebase/auth-compat",RB="@firebase/database",NB="@firebase/data-connect",MB="@firebase/database-compat",PB="@firebase/functions",xB="@firebase/functions-compat",kB="@firebase/installations",OB="@firebase/installations-compat",FB="@firebase/messaging",LB="@firebase/messaging-compat",VB="@firebase/performance",jB="@firebase/performance-compat",UB="@firebase/remote-config",BB="@firebase/remote-config-compat",$B="@firebase/storage",HB="@firebase/storage-compat",zB="@firebase/firestore",qB="@firebase/ai",WB="@firebase/firestore-compat",GB="firebase",KB="11.10.0";var Cv="[DEFAULT]",QB={[bv]:"fire-core",[wB]:"fire-core-compat",[DB]:"fire-analytics",[TB]:"fire-analytics-compat",[CB]:"fire-app-check",[bB]:"fire-app-check-compat",[SB]:"fire-auth",[AB]:"fire-auth-compat",[RB]:"fire-rtdb",[NB]:"fire-data-connect",[MB]:"fire-rtdb-compat",[PB]:"fire-fn",[xB]:"fire-fn-compat",[kB]:"fire-iid",[OB]:"fire-iid-compat",[FB]:"fire-fcm",[LB]:"fire-fcm-compat",[VB]:"fire-perf",[jB]:"fire-perf-compat",[UB]:"fire-rc",[BB]:"fire-rc-compat",[$B]:"fire-gcs",[HB]:"fire-gcs-compat",[zB]:"fire-fst",[WB]:"fire-fst-compat",[qB]:"fire-vertex","fire-js":"fire-js",[GB]:"fire-js-all"};var Rc=new Map,YB=new Map,Sv=new Map;function _0(t,e){try{t.container.addComponent(e)}catch(n){lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fn(t){let e=t.name;if(Sv.has(e))return lr.debug(`There were multiple attempts to register component ${e}.`),!1;Sv.set(e,t);for(let n of Rc.values())_0(n,t);for(let n of YB.values())_0(n,t);return!0}function Cs(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ot(t){return t==null?!1:t.settings!==void 0}var ZB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new hn("app","Firebase",ZB);var Av=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}};var Zr=KB;function Mv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Cv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Yr.create("bad-app-name",{appName:String(i)});if(n||(n=gv()),!n)throw Yr.create("no-options");let o=Rc.get(i);if(o){if(Pn(n,o.options)&&Pn(r,o.config))return o;throw Yr.create("duplicate-app",{appName:i})}let s=new _h(i);for(let u of Sv.values())s.addComponent(u);let a=new Av(n,r,s);return Rc.set(i,a),a}function no(t=Cv){let e=Rc.get(t);if(!e&&t===Cv&&gv())return Mv();if(!e)throw Yr.create("no-app",{appName:t});return e}function Eh(){return Array.from(Rc.values())}function ke(t,e,n){var r;let i=(r=QB[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lr.warn(a.join(" "));return}fn(new wt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var JB="firebase-heartbeat-database",XB=1,Nc="firebase-heartbeat-store",Tv=null;function T0(){return Tv||(Tv=y0(JB,XB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Nc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yr.create("idb-open",{originalErrorMessage:t.message})})),Tv}function e$(t){return _(this,null,function*(){try{let n=(yield T0()).transaction(Nc),r=yield n.objectStore(Nc).get(D0(t));return yield n.done,r}catch(e){if(e instanceof zt)lr.warn(e.message);else{let n=Yr.create("idb-get",{originalErrorMessage:e?.message});lr.warn(n.message)}}})}function I0(t,e){return _(this,null,function*(){try{let r=(yield T0()).transaction(Nc,"readwrite");yield r.objectStore(Nc).put(e,D0(t)),yield r.done}catch(n){if(n instanceof zt)lr.warn(n.message);else{let r=Yr.create("idb-set",{originalErrorMessage:n?.message});lr.warn(r.message)}}})}function D0(t){return`${t.name}!${t.options.appId}`}var t$=1024,n$=30,Rv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Nv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=E0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>n$){let s=i$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){lr.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=E0(),{heartbeatsToSend:r,unsentEntries:i}=r$(this._heartbeatsCache.heartbeats),o=Cc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return lr.warn(n),""}})}};function E0(){return new Date().toISOString().substring(0,10)}function r$(t,e=t$){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),w0(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),w0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Nv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Sc()?a0().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield e$(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return I0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return I0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function w0(t){return Cc(JSON.stringify({version:2,heartbeats:t})).length}function i$(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function o$(t){fn(new wt("platform-logger",e=>new Dv(e),"PRIVATE")),fn(new wt("heartbeat",e=>new Rv(e),"PRIVATE")),ke(bv,v0,t),ke(bv,v0,"esm2017"),ke("fire-js","")}o$("");var s$="firebase",a$="11.10.0";ke(s$,a$,"app");function Pv(t){t===void 0&&(fm(Pv),t=P(Ze));let e=t.get(id);return n=>new J(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Jr=new Xo("ANGULARFIRE2_VERSION");function Mc(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var As=(t,e)=>{let n=e?[e]:Eh(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ss=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(Ss||{}),b0=uy()&&typeof Zone<"u"?Ss.WARN:Ss.SILENT;var wh=class{zone;delegate;constructor(e,n=Rp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Xr=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=P(ge);this.outsideAngular=n.runOutsideAngular(()=>new wh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new wh(typeof Zone>"u"?void 0:Zone.current,Ap))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),C0=!1;function c$(t,e){!C0&&(b0>Ss.SILENT||uy())&&(C0=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),b0>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function u$(t){let e=P(ge,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function ro(t){let e=P(ge,{optional:!0});return e?e.run(()=>t()):t()}var l$=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),et(n,()=>ro(()=>t.apply(void 0,r)))),Ae=(t,e,n)=>(n||=e?Ss.WARN:Ss.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=P(Xr),s=P(id),a=P(Xe)}catch{return c$(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=ro(()=>s.add())),i[l]=l$(i[l],r,a));let u=u$(()=>t.apply(this,i));return e?u instanceof J?u.pipe(Pr(o.outsideAngular),Mr(o.insideAngular),Pv(a)):u instanceof Promise?ro(()=>new Promise((l,h)=>{s.run(()=>u).then(p=>et(a,()=>ro(()=>l(p))),p=>et(a,()=>ro(()=>h(p))))})):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:ro(()=>u):u instanceof J?u.pipe(Pr(o.outsideAngular),Mr(o.insideAngular)):ro(()=>u)});var dr=class{constructor(e){return e}},io=class{constructor(){return Eh()}};function d$(t){return t&&t.length===1?t[0]:new dr(no())}var xv=new U("angularfire2._apps"),h$={provide:dr,useFactory:d$,deps:[[new jt,xv]]},f$={provide:io,deps:[[new jt,xv]]};function p$(t){return(e,n)=>{let r=n.get(jr);ke("angularfire",Jr.full,"core"),ke("angularfire",Jr.full,"app"),ke("angular",GC.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new dr(i)}}function _J(t,...e){return Qt([h$,f$,{provide:xv,useFactory:p$(t),multi:!0,deps:[ge,Ze,Xr,...e]}])}var IJ=Ae(Mv,!0);var g$=new Map,m$={activated:!1,tokenObservers:[]},y$={initialized:!1,enabled:!1};function pn(t){return g$.get(t)||Object.assign({},m$)}function N0(){return y$}var v$="https://content-firebaseappcheck.googleapis.com/v1";var _$="exchangeDebugToken",S0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},RJ=24*60*60*1e3;var Fv=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new eo,this.pending.promise.catch(n=>{}),yield I$(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new eo,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function I$(t){return new Promise(e=>{setTimeout(e,t)})}var E$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ei=new hn("appCheck","AppCheck",E$);function M0(t){if(!pn(t).activated)throw ei.create("use-before-activation",{appName:t.name})}function P0(r,i){return _(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(y){throw ei.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw ei.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw ei.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw ei.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function x0(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${v$}/projects/${n}/apps/${r}:${_$}?key=${i}`,body:{debug_token:e}}}var w$="firebase-app-check-database",T$=1,Lv="firebase-app-check-store";var Th=null;function D$(){return Th||(Th=new Promise((t,e)=>{try{let n=indexedDB.open(w$,T$);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(ei.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Lv,{keyPath:"compositeKey"})}}}catch(n){e(ei.create("storage-open",{originalErrorMessage:n?.message}))}}),Th)}function b$(t,e){return C$(S$(t),e)}function C$(t,e){return _(this,null,function*(){let r=(yield D$()).transaction(Lv,"readwrite"),o=r.objectStore(Lv).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(ei.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function S$(t){return`${t.options.appId}-${t.name}`}var Pc=new xn("@firebase/app-check");function kv(t,e){return Sc()?b$(t,e).catch(n=>{Pc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function k0(){return N0().enabled}function O0(){return _(this,null,function*(){let t=N0();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var A$={error:"UNKNOWN_ERROR"};function R$(t){return gh.encodeString(JSON.stringify(t),!1)}function Vv(t,e=!1,n=!1){return _(this,null,function*(){let r=t.app;M0(r);let i=pn(r),o=i.token,s;if(o&&!xc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(xc(l)?o=l:yield kv(r,void 0))}if(!e&&o&&xc(o))return{token:o.token};let a=!1;if(k0())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=P0(x0(r,yield O0()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield kv(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Pc.warn(l.message):n&&Pc.error(l),Ov(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield pn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Pc.warn(l.message):n&&Pc.error(l),s=l}let u;return o?s?xc(o)?u={token:o.token,internalError:s}:u=Ov(s):(u={token:o.token},i.token=o,yield kv(r,o)):u=Ov(s),a&&x$(r,u),u})}function N$(t){return _(this,null,function*(){let e=t.app;M0(e);let{provider:n}=pn(e);if(k0()){let r=yield O0(),{token:i}=yield P0(x0(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function M$(t,e,n,r){let{app:i}=t,o=pn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&xc(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),A0(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>A0(t))}function F0(t,e){let n=pn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function A0(t){let{app:e}=t,n=pn(e),r=n.tokenRefresher;r||(r=P$(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function P$(t){let{app:e}=t;return new Fv(()=>_(null,null,function*(){let n=pn(e),r;if(n.token?r=yield Vv(t,!0):r=yield Vv(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=pn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},S0.RETRIAL_MIN_WAIT,S0.RETRIAL_MAX_WAIT)}function x$(t,e){let n=pn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function xc(t){return t.expireTimeMillis-Date.now()>0}function Ov(t){return{token:R$(A$),error:t}}var jv=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=pn(this.app);for(let n of e)F0(this.app,n.next);return Promise.resolve()}};function k$(t,e){return new jv(t,e)}function O$(t){return{getToken:e=>Vv(t,e),getLimitedUseToken:()=>N$(t),addTokenListener:e=>M$(t,"INTERNAL",e),removeTokenListener:e=>F0(t.app,e)}}var F$="@firebase/app-check",L$="0.10.1";var V$="app-check",R0="app-check-internal";function j$(){fn(new wt(V$,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return k$(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(R0).initialize()})),fn(new wt(R0,t=>{let e=t.getProvider("app-check").getImmediate();return O$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ke(F$,L$)}j$();var U$="app-check";var Rs=class{constructor(){return As(U$)}};var B$=["localhost","0.0.0.0","127.0.0.1"],$J=typeof window<"u"&&B$.includes(window.location.hostname);function J0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var X0=J0,eR=new hn("auth","Firebase",J0());var Rh=new xn("@firebase/auth");function $$(t,...e){Rh.logLevel<=ce.WARN&&Rh.warn(`Auth (${Zr}): ${t}`,...e)}function bh(t,...e){Rh.logLevel<=ce.ERROR&&Rh.error(`Auth (${Zr}): ${t}`,...e)}function Fn(t,...e){throw u_(t,...e)}function oo(t,...e){return u_(t,...e)}function tR(t,e,n){let r=Object.assign(Object.assign({},X0()),{[e]:n});return new hn("auth","Firebase",r).create(e,{appName:t.name})}function pr(t){return tR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function u_(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return eR.create(t,...e)}function W(t,e,...n){if(!t)throw u_(e,...n)}function hr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw bh(e),new Error(e)}function ri(t,e){t||hr(e)}function Hv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function H$(){return L0()==="http:"||L0()==="https:"}function L0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function z$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(H$()||r0()||"connection"in navigator)?navigator.onLine:!0}function q$(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var so=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ri(n>e,"Short delay should be less than long delay!"),this.isMobile=t0()||i0()}get(){return z$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function l_(t,e){ri(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Nh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var W$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var G$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],K$=new so(3e4,6e4);function gr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function mr(o,s,a,u){return _(this,arguments,function*(t,e,n,r,i={}){return nR(t,i,()=>_(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Ac(Object.assign({key:t.config.apiKey},h)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:g},l);return n0()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&Qr(t.emulatorConfig.host)&&(y.credentials="include"),Nh.fetch()(yield rR(t,t.config.apiHost,n,p),y)}))})}function nR(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},W$),e);try{let i=new zv(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Dh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dh(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Dh(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Dh(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw tR(t,h,l);Fn(t,h)}}catch(i){if(i instanceof zt)throw i;Fn(t,"network-request-failed",{message:String(i)})}})}function $c(o,s,a,u){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield mr(t,e,n,r,i);return"mfaPendingCredential"in l&&Fn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function rR(t,e,n,r){return _(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?l_(t.config,i):`${t.config.apiScheme}://${i}`;return G$.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function Q$(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var zv=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(oo(this.auth,"network-request-failed")),K$.get())})}};function Dh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=oo(t,e,r);return i.customData._tokenResponse=n,i}function V0(t){return t!==void 0&&t.enterprise!==void 0}var qv=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Q$(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function Y$(t,e){return _(this,null,function*(){return mr(t,"GET","/v2/recaptchaConfig",gr(t,e))})}function Z$(t,e){return _(this,null,function*(){return mr(t,"POST","/v1/accounts:delete",e)})}function Mh(t,e){return _(this,null,function*(){return mr(t,"POST","/v1/accounts:lookup",e)})}function Oc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function d_(t,e=!1){return _(this,null,function*(){let n=Ve(t),r=yield n.getIdToken(e),i=h_(r);W(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Oc(Uv(i.auth_time)),issuedAtTime:Oc(Uv(i.iat)),expirationTime:Oc(Uv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Uv(t){return Number(t)*1e3}function h_(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bh("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ts(n);return i?JSON.parse(i):(bh("Failed to decode base64 JWT payload"),null)}catch(i){return bh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function j0(t){let e=h_(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Lc(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof zt&&J$(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function J$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Wv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Vc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oc(this.lastLoginAt),this.creationTime=Oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ph(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Lc(t,Mh(n,{idToken:r}));W(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?iR(o.providerUserInfo):[],a=X$(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Vc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function f_(t){return _(this,null,function*(){let e=Ve(t);yield Ph(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function X$(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function iR(t){return t.map(e=>{var{providerId:n}=e,r=Cp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function eH(t,e){return _(this,null,function*(){let n=yield nR(t,{},()=>_(null,null,function*(){let r=Ac({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield rR(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Qr(t.emulatorConfig.host)&&(u.credentials="include"),Nh.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function tH(t,e){return _(this,null,function*(){return mr(t,"POST","/v2/accounts:revokeToken",gr(t,e))})}var Fc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):j0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(e.length!==0,"internal-error");let n=j0(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield eH(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(W(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(W(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return hr("not implemented")}};function ti(t,e){W(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var ni=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Cp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Vc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield Lc(this,this.stsTokenManager.getToken(this.auth,e));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return d_(this,e)}reload(){return f_(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Ph(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Ot(this.auth.app))return Promise.reject(pr(this.auth));let e=yield this.getIdToken();return yield Lc(this,Z$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=n.photoURL)!==null&&s!==void 0?s:void 0,A=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=n.createdAt)!==null&&l!==void 0?l:void 0,H=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:B,emailVerified:de,isAnonymous:je,providerData:me,stsTokenManager:D}=n;W(B&&D,e,"internal-error");let v=Fc.fromJSON(this.name,D);W(typeof B=="string",e,"internal-error"),ti(p,e.name),ti(g,e.name),W(typeof de=="boolean",e,"internal-error"),W(typeof je=="boolean",e,"internal-error"),ti(y,e.name),ti(w,e.name),ti(A,e.name),ti(R,e.name),ti(O,e.name),ti(H,e.name);let E=new t({uid:B,auth:e,email:g,emailVerified:de,displayName:p,isAnonymous:je,photoURL:w,phoneNumber:y,tenantId:A,stsTokenManager:v,createdAt:O,lastLoginAt:H});return me&&Array.isArray(me)&&(E.providerData=me.map(T=>Object.assign({},T))),R&&(E._redirectEventId=R),E}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new Fc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ph(o),o})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];W(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?iR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Fc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Vc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var U0=new Map;function fr(t){ri(t instanceof Function,"Expected a class definition");let e=U0.get(t);return e?(ri(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,U0.set(t,e),e)}var nH=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Gv=nH;function Ch(t,e,n){return`firebase:${t}:${e}:${n}`}var xh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Ch(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ch("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Mh(this.auth,{idToken:e}).catch(()=>{});return n?ni._fromGetAccountInfoResponse(this.auth,n,e):null}return ni._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(fr(Gv),e,r);let i=(yield Promise.all(n.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||fr(Gv),s=Ch(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let g=yield Mh(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield ni._fromGetAccountInfoResponse(e,g,h)}else p=ni._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>_(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function B0(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lR(e))return"Blackberry";if(dR(e))return"Webos";if(sR(e))return"Safari";if((e.includes("chrome/")||aR(e))&&!e.includes("edge/"))return"Chrome";if(uR(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function oR(t=tt()){return/firefox\//i.test(t)}function sR(t=tt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aR(t=tt()){return/crios\//i.test(t)}function cR(t=tt()){return/iemobile/i.test(t)}function uR(t=tt()){return/android/i.test(t)}function lR(t=tt()){return/blackberry/i.test(t)}function dR(t=tt()){return/webos/i.test(t)}function p_(t=tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rH(t=tt()){var e;return p_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iH(){return o0()&&document.documentMode===10}function hR(t=tt()){return p_(t)||uR(t)||dR(t)||lR(t)||/windows phone/i.test(t)||cR(t)}function fR(t,e=[]){let n;switch(t){case"Browser":n=B0(tt());break;case"Worker":n=`${B0(tt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zr}/${r}`}var Kv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function oH(n){return _(this,arguments,function*(t,e={}){return mr(t,"GET","/v2/passwordPolicy",gr(t,e))})}var sH=6,Qv=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:sH,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Yv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kh(this),this.idTokenSubscription=new kh(this),this.beforeStateQueue=new Kv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fr(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield xh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield Mh(this,{idToken:e}),r=yield ni._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(Ot(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Ph(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=q$()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Ot(this.app))return Promise.reject(pr(this));let n=e?Ve(e):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Ot(this.app)?Promise.reject(pr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ot(this.app)?Promise.reject(pr(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(fr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield oH(this),n=new Qv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield tH(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&fr(e)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=yield xh.create(this,[fr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;if(Ot(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&$$(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function ii(t){return Ve(t)}var kh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=l0(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var $h={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aH(t){$h=t}function pR(t){return $h.loadJS(t)}function cH(){return $h.recaptchaEnterpriseScript}function uH(){return $h.gapiScript}function gR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Zv=class{constructor(){this.enterprise=new Jv}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},Jv=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var lH="recaptcha-enterprise",mR="NO_RECAPTCHA",Xv=class{constructor(e){this.type=lH,this.auth=ii(e)}verify(e="verify",n=!1){return _(this,null,function*(){function r(o){return _(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>_(null,null,function*(){Y$(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new qv(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;V0(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(mR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Zv().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&V0(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=cH();u.length!==0&&(u+=a),pR(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function kc(t,e,n,r=!1,i=!1){return _(this,null,function*(){let o=new Xv(t),s;if(i)s=mR;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Oh(t,e,n,r,i){return _(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield kc(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(a=>_(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield kc(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield kc(t,e,n);return r(t,a).catch(u=>_(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let h=yield kc(t,e,n,!1,!0);return r(t,h)}return Promise.reject(u)}))}else{let a=yield kc(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")})}function g_(t,e){let n=Cs(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Pn(o,e??{}))return i;Fn(i,"already-initialized")}return n.initialize({options:e})}function dH(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(fr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function m_(t,e,n){let r=ii(t);W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=yR(e),{host:s,port:a}=hH(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){W(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),W(Pn(l,r.config.emulator)&&Pn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Qr(s)?(yh(`${o}//${s}${u}`),vh("Auth",!0)):i||fH()}function yR(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function hH(t){let e=yR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:$0(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:$0(s)}}}function $0(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function fH(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var jc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hr("not implemented")}_getIdTokenResponse(e){return hr("not implemented")}_linkToIdToken(e,n){return hr("not implemented")}_getReauthenticationResolver(e){return hr("not implemented")}};function pH(t,e){return _(this,null,function*(){return mr(t,"POST","/v1/accounts:signUp",e)})}function gH(t,e){return _(this,null,function*(){return $c(t,"POST","/v1/accounts:signInWithPassword",gr(t,e))})}function mH(t,e){return _(this,null,function*(){return mr(t,"POST","/v1/accounts:sendOobCode",gr(t,e))})}function yH(t,e){return _(this,null,function*(){return mH(t,e)})}function vH(t,e){return _(this,null,function*(){return $c(t,"POST","/v1/accounts:signInWithEmailLink",gr(t,e))})}function _H(t,e){return _(this,null,function*(){return $c(t,"POST","/v1/accounts:signInWithEmailLink",gr(t,e))})}var Uc=class t extends jc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Oh(e,n,"signInWithPassword",gH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return vH(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}})}_linkToIdToken(e,n){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Oh(e,r,"signUpPassword",pH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return _H(e,{idToken:n,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Bv(t,e){return _(this,null,function*(){return $c(t,"POST","/v1/accounts:signInWithIdp",gr(t,e))})}function IH(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function EH(t){let e=Ds(bs(t)).link,n=e?Ds(bs(e)).deep_link_id:null,r=Ds(bs(t)).deep_link_id;return(r?Ds(bs(r)).link:null)||r||n||e||t}var Fh=class t{constructor(e){var n,r,i,o,s,a;let u=Ds(bs(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=IH((i=u.mode)!==null&&i!==void 0?i:null);W(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=EH(e);try{return new t(n)}catch{return null}}};var vR=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Uc._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Fh.parseLink(r);return W(i,"argument-error"),Uc._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Lh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var e_=class extends Lh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function wH(t,e){return _(this,null,function*(){return $c(t,"POST","/v1/accounts:signUp",gr(t,e))})}var Ns=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let o=yield ni._fromIdTokenResponse(e,r,i),s=H0(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=H0(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function H0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var t_=class t extends zt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function _R(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?t_._fromErrorAndOperation(t,o,e,r):o})}function TH(t,e,n=!1){return _(this,null,function*(){let r=yield Lc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Ns._forOperation(t,"link",r)})}function DH(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(Ot(r.app))return Promise.reject(pr(r));let i="reauthenticate";try{let o=yield Lc(t,_R(r,i,e,t),n);W(o.idToken,r,"internal-error");let s=h_(o.idToken);W(s,r,"internal-error");let{sub:a}=s;return W(t.uid===a,r,"user-mismatch"),Ns._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Fn(r,"user-mismatch"),o}})}function IR(t,e,n=!1){return _(this,null,function*(){if(Ot(t.app))return Promise.reject(pr(t));let r="signIn",i=yield _R(t,r,e),o=yield Ns._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function y_(t,e){return _(this,null,function*(){return IR(ii(t),e)})}function bH(t,e,n){var r;W(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),W(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),W(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(W(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(W(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}function ER(t){return _(this,null,function*(){let e=ii(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function v_(t,e,n){return _(this,null,function*(){let r=ii(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&bH(r,i,n),yield Oh(r,i,"getOobCode",yH,"EMAIL_PASSWORD_PROVIDER")})}function __(t,e,n){return _(this,null,function*(){if(Ot(t.app))return Promise.reject(pr(t));let r=ii(t),s=yield Oh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wH,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&ER(t),u}),a=yield Ns._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function I_(t,e,n){return Ot(t.app)?Promise.reject(pr(t)):y_(Ve(t),vR.credential(e,n)).catch(r=>_(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&ER(t),r}))}function Hc(t,e,n,r){return Ve(t).onIdTokenChanged(e,n,r)}function E_(t,e,n){return Ve(t).beforeAuthStateChanged(e,n)}function Hh(t,e,n,r){return Ve(t).onAuthStateChanged(e,n,r)}var Vh="__sak";var jh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var CH=1e3,SH=10,AH=(()=>{class t extends jh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hR(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);iH()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,SH):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},CH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield Nr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield Nr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield Nr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),wR=AH;var RH=(()=>{class t extends jh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),w_=RH;function NH(t){return Promise.all(t.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var MH=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield NH(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function TR(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var n_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=TR("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function On(){return window}function PH(t){On().location.href=t}function DR(){return typeof On().WorkerGlobalScope<"u"&&typeof On().importScripts=="function"}function xH(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function kH(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function OH(){return DR()?self:null}var bR="firebaseLocalStorageDb",FH=1,Uh="firebaseLocalStorage",CR="fbase_key",ao=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function zh(t,e){return t.transaction([Uh],e?"readwrite":"readonly").objectStore(Uh)}function LH(){let t=indexedDB.deleteDatabase(bR);return new ao(t).toPromise()}function r_(){let t=indexedDB.open(bR,FH);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Uh,{keyPath:CR})}catch(i){n(i)}}),t.addEventListener("success",()=>_(null,null,function*(){let r=t.result;r.objectStoreNames.contains(Uh)?e(r):(r.close(),yield LH(),e(yield r_()))}))})}function z0(t,e,n){return _(this,null,function*(){let r=zh(t,!0).put({[CR]:e,value:n});return new ao(r).toPromise()})}function VH(t,e){return _(this,null,function*(){let n=zh(t,!1).get(e),r=yield new ao(n).toPromise();return r===void 0?null:r.value})}function q0(t,e){let n=zh(t,!0).delete(e);return new ao(n).toPromise()}var jH=800,UH=3,BH=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield r_(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>UH)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return DR()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=MH._getInstance(OH()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield xH(),!this.activeServiceWorker)return;this.sender=new n_(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||kH()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield r_();return yield z0(n,Vh,"1"),yield q0(n,Vh),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>z0(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>VH(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>q0(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(o=>{let s=zh(o,!1).getAll();return new ao(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),jH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),SR=BH;var YJ=gR("rcb"),ZJ=new so(3e4,6e4);function $H(t,e){return e?fr(e):(W(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Bc=class extends jc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bv(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function HH(t){return IR(t.auth,new Bc(t),t.bypassAuthState)}function zH(t){let{auth:e,user:n}=t;return W(n,e,"internal-error"),DH(n,new Bc(t),t.bypassAuthState)}function qH(t){return _(this,null,function*(){let{auth:e,user:n}=t;return W(n,e,"internal-error"),TH(n,new Bc(t),t.bypassAuthState)})}var i_=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HH;case"linkViaPopup":case"linkViaRedirect":return qH;case"reauthViaPopup":case"reauthViaRedirect":return zH;default:Fn(this.auth,"internal-error")}}resolve(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var JJ=new so(2e3,1e4);var WH="pendingRedirect",Sh=new Map,o_=class t extends i_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=Sh.get(this.auth._key());if(!e){try{let r=(yield GH(this.resolver,this.auth))?yield Nr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Sh.set(this.auth._key(),e)}return this.bypassAuthState||Sh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Nr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Nr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function GH(t,e){return _(this,null,function*(){let n=YH(e),r=QH(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function KH(t,e){Sh.set(t._key(),e)}function QH(t){return fr(t._redirectPersistence)}function YH(t){return Ch(WH,t.config.apiKey,t.name)}function ZH(t,e,n=!1){return _(this,null,function*(){if(Ot(t.app))return Promise.reject(pr(t));let r=ii(t),i=$H(r,e),s=yield new o_(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var JH=10*60*1e3,s_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XH(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!AR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(oo(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JH&&this.cachedEventUids.clear(),this.cachedEventUids.has(W0(e))}saveEventToCache(e){this.cachedEventUids.add(W0(e)),this.lastProcessedEventTime=Date.now()}};function W0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function AR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function XH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AR(t);default:return!1}}function e4(n){return _(this,arguments,function*(t,e={}){return mr(t,"GET","/v1/projects",e)})}var t4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n4=/^https?/;function r4(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield e4(t);for(let n of e)try{if(i4(n))return}catch{}Fn(t,"unauthorized-domain")})}function i4(t){let e=Hv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!n4.test(n))return!1;if(t4.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var o4=new so(3e4,6e4);function G0(){let t=On().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function s4(t){return new Promise((e,n)=>{var r,i,o;function s(){G0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{G0(),n(oo(t,"network-request-failed"))},timeout:o4.get()})}if(!((i=(r=On().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=On().gapi)===null||o===void 0)&&o.load)s();else{let a=gR("iframefcb");return On()[a]=()=>{gapi.load?s():n(oo(t,"network-request-failed"))},pR(`${uH()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Ah=null,e})}var Ah=null;function a4(t){return Ah=Ah||s4(t),Ah}var c4=new so(5e3,15e3),u4="__/auth/iframe",l4="emulator/auth/iframe",d4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},h4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f4(t){let e=t.config;W(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?l_(e,l4):`https://${t.config.authDomain}/${u4}`,r={apiKey:e.apiKey,appName:t.name,v:Zr},i=h4.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ac(r).slice(1)}`}function p4(t){return _(this,null,function*(){let e=yield a4(t),n=On().gapi;return W(n,t,"internal-error"),e.open({where:document.body,url:f4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d4,dontclear:!0},r=>new Promise((i,o)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=oo(t,"network-request-failed"),a=On().setTimeout(()=>{o(s)},c4.get());function u(){On().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var g4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},m4=500,y4=600,v4="_blank",_4="http://localhost",Bh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function I4(t,e,n,r=m4,i=y4){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},g4),{width:r.toString(),height:i.toString(),top:o,left:s}),l=tt().toLowerCase();n&&(a=aR(l)?v4:n),oR(l)&&(e=e||_4,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(rH(l)&&a!=="_self")return E4(e||"",a),new Bh(null);let p=window.open(e||"",a,h);W(p,t,"popup-blocked");try{p.focus()}catch{}return new Bh(p)}function E4(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var w4="__/auth/handler",T4="emulator/auth/handler",D4=encodeURIComponent("fac");function K0(t,e,n,r,i,o){return _(this,null,function*(){W(t.config.authDomain,t,"auth-domain-config-required"),W(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Zr,eventId:i};if(e instanceof Lh){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",u0(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof e_){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${D4}=${encodeURIComponent(u)}`:"";return`${b4(t)}?${Ac(a).slice(1)}${l}`})}function b4({config:t}){return t.emulator?l_(t,T4):`https://${t.authDomain}/${w4}`}var $v="webStorageSupport",a_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=w_,this._completeRedirectFn=ZH,this._overrideRedirectResult=KH}_openPopup(e,n,r,i){return _(this,null,function*(){var o;ri((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield K0(e,n,r,Hv(),i);return I4(e,s,TR())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield K0(e,n,r,Hv(),i);return PH(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(ri(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield p4(e),r=new s_(e);return n.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($v,{type:$v},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[$v];s!==void 0&&n(!!s),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=r4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hR()||sR()||p_()}},RR=a_;var Q0="@firebase/auth",Y0="1.10.8";var c_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function C4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function S4(t){fn(new wt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;W(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fR(t)},l=new Yv(r,i,o,u);return dH(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),fn(new wt("auth-internal",e=>{let n=ii(e.getProvider("auth").getImmediate());return(r=>new c_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ke(Q0,Y0,C4(t)),ke(Q0,Y0,"esm2017")}var A4=5*60,R4=mv("authIdTokenMaxAge")||A4,Z0=null,N4=t=>e=>_(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>R4)return;let i=n?.token;Z0!==i&&(Z0=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function T_(t=no()){let e=Cs(t,"auth");if(e.isInitialized())return e.getImmediate();let n=g_(t,{popupRedirectResolver:RR,persistence:[SR,wR,w_]}),r=mv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=N4(o.toString());E_(n,s,()=>s(n.currentUser)),Hc(n,a=>s(a))}}let i=pv("auth");return i&&m_(n,`http://${i}`),n}function M4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}aH({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=oo("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",M4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});S4("Browser");function MR(t){return new J(function(e){var n=Hh(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}function PR(t){return new J(function(e){var n=Hc(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var xR="auth",zc=class{constructor(e){return e}},qc=class{constructor(){return As(xR)}};var D_=new U("angularfire2.auth-instances");function vz(t,e){let n=Mc(xR,t,e);return n&&new zc(n)}function _z(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new zc(r)}}var Iz={provide:qc,deps:[[new jt,D_]]},Ez={provide:zc,useFactory:vz,deps:[[new jt,D_],dr]};function HX(t,...e){return ke("angularfire",Jr.full,"auth"),Qt([Ez,Iz,{provide:D_,useFactory:_z(t),multi:!0,deps:[ge,Ze,Xr,io,[new jt,Rs],...e]}])}var zX=Ae(MR,!0);var qX=Ae(PR,!0);var WX=Ae(__,!0,2);var GX=Ae(T_,!0);var KX=Ae(v_,!0,2);var QX=Ae(I_,!0,2);var kR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},OR={};var yr,b_;(function(){var t;function e(D,v){function E(){}E.prototype=v.prototype,D.D=v.prototype,D.prototype=new E,D.prototype.constructor=D,D.C=function(T,b,S){for(var I=Array(arguments.length-2),zn=2;zn<arguments.length;zn++)I[zn-2]=arguments[zn];return v.prototype[b].apply(T,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,E){E||(E=0);var T=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)T[b]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(b=0;16>b;++b)T[b]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=D.g[0],E=D.g[1],b=D.g[2];var S=D.g[3],I=v+(S^E&(b^S))+T[0]+3614090360&4294967295;v=E+(I<<7&4294967295|I>>>25),I=S+(b^v&(E^b))+T[1]+3905402710&4294967295,S=v+(I<<12&4294967295|I>>>20),I=b+(E^S&(v^E))+T[2]+606105819&4294967295,b=S+(I<<17&4294967295|I>>>15),I=E+(v^b&(S^v))+T[3]+3250441966&4294967295,E=b+(I<<22&4294967295|I>>>10),I=v+(S^E&(b^S))+T[4]+4118548399&4294967295,v=E+(I<<7&4294967295|I>>>25),I=S+(b^v&(E^b))+T[5]+1200080426&4294967295,S=v+(I<<12&4294967295|I>>>20),I=b+(E^S&(v^E))+T[6]+2821735955&4294967295,b=S+(I<<17&4294967295|I>>>15),I=E+(v^b&(S^v))+T[7]+4249261313&4294967295,E=b+(I<<22&4294967295|I>>>10),I=v+(S^E&(b^S))+T[8]+1770035416&4294967295,v=E+(I<<7&4294967295|I>>>25),I=S+(b^v&(E^b))+T[9]+2336552879&4294967295,S=v+(I<<12&4294967295|I>>>20),I=b+(E^S&(v^E))+T[10]+4294925233&4294967295,b=S+(I<<17&4294967295|I>>>15),I=E+(v^b&(S^v))+T[11]+2304563134&4294967295,E=b+(I<<22&4294967295|I>>>10),I=v+(S^E&(b^S))+T[12]+1804603682&4294967295,v=E+(I<<7&4294967295|I>>>25),I=S+(b^v&(E^b))+T[13]+4254626195&4294967295,S=v+(I<<12&4294967295|I>>>20),I=b+(E^S&(v^E))+T[14]+2792965006&4294967295,b=S+(I<<17&4294967295|I>>>15),I=E+(v^b&(S^v))+T[15]+1236535329&4294967295,E=b+(I<<22&4294967295|I>>>10),I=v+(b^S&(E^b))+T[1]+4129170786&4294967295,v=E+(I<<5&4294967295|I>>>27),I=S+(E^b&(v^E))+T[6]+3225465664&4294967295,S=v+(I<<9&4294967295|I>>>23),I=b+(v^E&(S^v))+T[11]+643717713&4294967295,b=S+(I<<14&4294967295|I>>>18),I=E+(S^v&(b^S))+T[0]+3921069994&4294967295,E=b+(I<<20&4294967295|I>>>12),I=v+(b^S&(E^b))+T[5]+3593408605&4294967295,v=E+(I<<5&4294967295|I>>>27),I=S+(E^b&(v^E))+T[10]+38016083&4294967295,S=v+(I<<9&4294967295|I>>>23),I=b+(v^E&(S^v))+T[15]+3634488961&4294967295,b=S+(I<<14&4294967295|I>>>18),I=E+(S^v&(b^S))+T[4]+3889429448&4294967295,E=b+(I<<20&4294967295|I>>>12),I=v+(b^S&(E^b))+T[9]+568446438&4294967295,v=E+(I<<5&4294967295|I>>>27),I=S+(E^b&(v^E))+T[14]+3275163606&4294967295,S=v+(I<<9&4294967295|I>>>23),I=b+(v^E&(S^v))+T[3]+4107603335&4294967295,b=S+(I<<14&4294967295|I>>>18),I=E+(S^v&(b^S))+T[8]+1163531501&4294967295,E=b+(I<<20&4294967295|I>>>12),I=v+(b^S&(E^b))+T[13]+2850285829&4294967295,v=E+(I<<5&4294967295|I>>>27),I=S+(E^b&(v^E))+T[2]+4243563512&4294967295,S=v+(I<<9&4294967295|I>>>23),I=b+(v^E&(S^v))+T[7]+1735328473&4294967295,b=S+(I<<14&4294967295|I>>>18),I=E+(S^v&(b^S))+T[12]+2368359562&4294967295,E=b+(I<<20&4294967295|I>>>12),I=v+(E^b^S)+T[5]+4294588738&4294967295,v=E+(I<<4&4294967295|I>>>28),I=S+(v^E^b)+T[8]+2272392833&4294967295,S=v+(I<<11&4294967295|I>>>21),I=b+(S^v^E)+T[11]+1839030562&4294967295,b=S+(I<<16&4294967295|I>>>16),I=E+(b^S^v)+T[14]+4259657740&4294967295,E=b+(I<<23&4294967295|I>>>9),I=v+(E^b^S)+T[1]+2763975236&4294967295,v=E+(I<<4&4294967295|I>>>28),I=S+(v^E^b)+T[4]+1272893353&4294967295,S=v+(I<<11&4294967295|I>>>21),I=b+(S^v^E)+T[7]+4139469664&4294967295,b=S+(I<<16&4294967295|I>>>16),I=E+(b^S^v)+T[10]+3200236656&4294967295,E=b+(I<<23&4294967295|I>>>9),I=v+(E^b^S)+T[13]+681279174&4294967295,v=E+(I<<4&4294967295|I>>>28),I=S+(v^E^b)+T[0]+3936430074&4294967295,S=v+(I<<11&4294967295|I>>>21),I=b+(S^v^E)+T[3]+3572445317&4294967295,b=S+(I<<16&4294967295|I>>>16),I=E+(b^S^v)+T[6]+76029189&4294967295,E=b+(I<<23&4294967295|I>>>9),I=v+(E^b^S)+T[9]+3654602809&4294967295,v=E+(I<<4&4294967295|I>>>28),I=S+(v^E^b)+T[12]+3873151461&4294967295,S=v+(I<<11&4294967295|I>>>21),I=b+(S^v^E)+T[15]+530742520&4294967295,b=S+(I<<16&4294967295|I>>>16),I=E+(b^S^v)+T[2]+3299628645&4294967295,E=b+(I<<23&4294967295|I>>>9),I=v+(b^(E|~S))+T[0]+4096336452&4294967295,v=E+(I<<6&4294967295|I>>>26),I=S+(E^(v|~b))+T[7]+1126891415&4294967295,S=v+(I<<10&4294967295|I>>>22),I=b+(v^(S|~E))+T[14]+2878612391&4294967295,b=S+(I<<15&4294967295|I>>>17),I=E+(S^(b|~v))+T[5]+4237533241&4294967295,E=b+(I<<21&4294967295|I>>>11),I=v+(b^(E|~S))+T[12]+1700485571&4294967295,v=E+(I<<6&4294967295|I>>>26),I=S+(E^(v|~b))+T[3]+2399980690&4294967295,S=v+(I<<10&4294967295|I>>>22),I=b+(v^(S|~E))+T[10]+4293915773&4294967295,b=S+(I<<15&4294967295|I>>>17),I=E+(S^(b|~v))+T[1]+2240044497&4294967295,E=b+(I<<21&4294967295|I>>>11),I=v+(b^(E|~S))+T[8]+1873313359&4294967295,v=E+(I<<6&4294967295|I>>>26),I=S+(E^(v|~b))+T[15]+4264355552&4294967295,S=v+(I<<10&4294967295|I>>>22),I=b+(v^(S|~E))+T[6]+2734768916&4294967295,b=S+(I<<15&4294967295|I>>>17),I=E+(S^(b|~v))+T[13]+1309151649&4294967295,E=b+(I<<21&4294967295|I>>>11),I=v+(b^(E|~S))+T[4]+4149444226&4294967295,v=E+(I<<6&4294967295|I>>>26),I=S+(E^(v|~b))+T[11]+3174756917&4294967295,S=v+(I<<10&4294967295|I>>>22),I=b+(v^(S|~E))+T[2]+718787259&4294967295,b=S+(I<<15&4294967295|I>>>17),I=E+(S^(b|~v))+T[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+b&4294967295,D.g[3]=D.g[3]+S&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var E=v-this.blockSize,T=this.B,b=this.h,S=0;S<v;){if(b==0)for(;S<=E;)i(this,D,S),S+=this.blockSize;if(typeof D=="string"){for(;S<v;)if(T[b++]=D.charCodeAt(S++),b==this.blockSize){i(this,T),b=0;break}}else for(;S<v;)if(T[b++]=D[S++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var E=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=E&255,E/=256;for(this.u(D),D=Array(16),v=E=0;4>v;++v)for(var T=0;32>T;T+=8)D[E++]=this.g[v]>>>T&255;return D};function o(D,v){var E=a;return Object.prototype.hasOwnProperty.call(E,D)?E[D]:E[D]=v(D)}function s(D,v){this.h=v;for(var E=[],T=!0,b=D.length-1;0<=b;b--){var S=D[b]|0;T&&S==v||(E[b]=S,T=!1)}this.g=E}var a={};function u(D){return-128<=D&&128>D?o(D,function(v){return new s([v|0],0>v?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(l(-D));for(var v=[],E=1,T=0;D>=E;T++)v[T]=D/E|0,E*=4294967296;return new s(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return R(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),T=p,b=0;b<D.length;b+=8){var S=Math.min(8,D.length-b),I=parseInt(D.substring(b,b+S),v);8>S?(S=l(Math.pow(v,S)),T=T.j(S).add(l(I))):(T=T.j(E),T=T.add(l(I)))}return T}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(A(this))return-R(this).m();for(var D=0,v=1,E=0;E<this.g.length;E++){var T=this.i(E);D+=(0<=T?T:4294967296+T)*v,v*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(w(this))return"0";if(A(this))return"-"+R(this).toString(D);for(var v=l(Math.pow(D,6)),E=this,T="";;){var b=de(E,v).g;E=O(E,b.j(v));var S=((0<E.g.length?E.g[0]:E.h)>>>0).toString(D);if(E=b,w(E))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function w(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function A(D){return D.h==-1}t.l=function(D){return D=O(this,D),A(D)?-1:w(D)?0:1};function R(D){for(var v=D.g.length,E=[],T=0;T<v;T++)E[T]=~D.g[T];return new s(E,~D.h).add(g)}t.abs=function(){return A(this)?R(this):this},t.add=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],T=0,b=0;b<=v;b++){var S=T+(this.i(b)&65535)+(D.i(b)&65535),I=(S>>>16)+(this.i(b)>>>16)+(D.i(b)>>>16);T=I>>>16,S&=65535,I&=65535,E[b]=I<<16|S}return new s(E,E[E.length-1]&-2147483648?-1:0)};function O(D,v){return D.add(R(v))}t.j=function(D){if(w(this)||w(D))return p;if(A(this))return A(D)?R(this).j(R(D)):R(R(this).j(D));if(A(D))return R(this.j(R(D)));if(0>this.l(y)&&0>D.l(y))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,E=[],T=0;T<2*v;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<D.g.length;b++){var S=this.i(T)>>>16,I=this.i(T)&65535,zn=D.i(b)>>>16,na=D.i(b)&65535;E[2*T+2*b]+=I*na,H(E,2*T+2*b),E[2*T+2*b+1]+=S*na,H(E,2*T+2*b+1),E[2*T+2*b+1]+=I*zn,H(E,2*T+2*b+1),E[2*T+2*b+2]+=S*zn,H(E,2*T+2*b+2)}for(T=0;T<v;T++)E[T]=E[2*T+1]<<16|E[2*T];for(T=v;T<2*v;T++)E[T]=0;return new s(E,0)};function H(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function B(D,v){this.g=D,this.h=v}function de(D,v){if(w(v))throw Error("division by zero");if(w(D))return new B(p,p);if(A(D))return v=de(R(D),v),new B(R(v.g),R(v.h));if(A(v))return v=de(D,R(v)),new B(R(v.g),v.h);if(30<D.g.length){if(A(D)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,T=v;0>=T.l(D);)E=je(E),T=je(T);var b=me(E,1),S=me(T,1);for(T=me(T,2),E=me(E,2);!w(T);){var I=S.add(T);0>=I.l(D)&&(b=b.add(E),S=I),T=me(T,1),E=me(E,1)}return v=O(D,b.j(v)),new B(b,v)}for(b=p;0<=D.l(v);){for(E=Math.max(1,Math.floor(D.m()/v.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=l(E),I=S.j(v);A(I)||0<I.l(D);)E-=T,S=l(E),I=S.j(v);w(S)&&(S=g),b=b.add(S),D=O(D,I)}return new B(b,D)}t.A=function(D){return de(this,D).h},t.and=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],T=0;T<v;T++)E[T]=this.i(T)&D.i(T);return new s(E,this.h&D.h)},t.or=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],T=0;T<v;T++)E[T]=this.i(T)|D.i(T);return new s(E,this.h|D.h)},t.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],T=0;T<v;T++)E[T]=this.i(T)^D.i(T);return new s(E,this.h^D.h)};function je(D){for(var v=D.g.length+1,E=[],T=0;T<v;T++)E[T]=D.i(T)<<1|D.i(T-1)>>>31;return new s(E,D.h)}function me(D,v){var E=v>>5;v%=32;for(var T=D.g.length-E,b=[],S=0;S<T;S++)b[S]=0<v?D.i(S+E)>>>v|D.i(S+E+1)<<32-v:D.i(S+E);return new s(b,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,b_=OR.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,yr=OR.Integer=s}).apply(typeof kR<"u"?kR:typeof self<"u"?self:typeof window<"u"?window:{});var qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vr={};var C_,wz,Ms,S_,Wc,Wh,A_,R_,N_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof qh=="object"&&qh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var C=c[m];if(!(C in f))break e;f=f[C]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,C={next:function(){if(!m&&f<c.length){var N=f++;return{value:d(N,c[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function w(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,C,N){for(var k=Array(arguments.length-2),we=2;we<arguments.length;we++)k[we-2]=arguments[we];return d.prototype[C].apply(m,k)}}function A(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let C=c.length||0,N=m.length||0;c.length=C+N;for(let k=0;k<N;k++)c[C+k]=m[k]}else c.push(m)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function H(c){return/^[\s\xa0]*$/.test(c)}function B(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function de(c){return de[" "](c),c}de[" "]=function(){};var je=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function me(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,d){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)c[f]=m[f];for(let N=0;N<E.length;N++)f=E[N],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function I(){var c=Wf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class zn{constructor(){this.h=this.g=null}add(d,f){let m=na.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var na=new O(()=>new vP,c=>c.reset());class vP{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ra,ia=!1,Wf=new zn,QE=()=>{let c=a.Promise.resolve(void 0);ra=()=>{c.then(_P)}};var _P=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){S(f)}var d=na;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}ia=!1};function Cr(){this.s=this.s,this.C=this.C}Cr.prototype.s=!1,Cr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Cr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ct(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var IP=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function oa(c,d){if(ct.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(je){e:{try{de(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:EP[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&oa.aa.h.call(this)}}w(oa,ct);var EP={2:"touch",3:"pen",4:"mouse"};oa.prototype.h=function(){oa.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var sa="closure_listenable_"+(1e6*Math.random()|0),wP=0;function TP(c,d,f,m,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=C,this.key=++wP,this.da=this.fa=!1}function mu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function yu(c){this.src=c,this.g={},this.h=0}yu.prototype.add=function(c,d,f,m,C){var N=c.toString();c=this.g[N],c||(c=this.g[N]=[],this.h++);var k=Kf(c,d,m,C);return-1<k?(d=c[k],f||(d.fa=!1)):(d=new TP(d,this.src,N,!!m,C),d.fa=f,c.push(d)),d};function Gf(c,d){var f=d.type;if(f in c.g){var m=c.g[f],C=Array.prototype.indexOf.call(m,d,void 0),N;(N=0<=C)&&Array.prototype.splice.call(m,C,1),N&&(mu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Kf(c,d,f,m){for(var C=0;C<c.length;++C){var N=c[C];if(!N.da&&N.listener==d&&N.capture==!!f&&N.ha==m)return C}return-1}var Qf="closure_lm_"+(1e6*Math.random()|0),Yf={};function YE(c,d,f,m,C){if(m&&m.once)return JE(c,d,f,m,C);if(Array.isArray(d)){for(var N=0;N<d.length;N++)YE(c,d[N],f,m,C);return null}return f=ep(f),c&&c[sa]?c.K(d,f,l(m)?!!m.capture:!!m,C):ZE(c,d,f,!1,m,C)}function ZE(c,d,f,m,C,N){if(!d)throw Error("Invalid event type");var k=l(C)?!!C.capture:!!C,we=Jf(c);if(we||(c[Qf]=we=new yu(c)),f=we.add(d,f,m,k,N),f.proxy)return f;if(m=DP(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)IP||(C=k),C===void 0&&(C=!1),c.addEventListener(d.toString(),m,C);else if(c.attachEvent)c.attachEvent(ew(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function DP(){function c(f){return d.call(c.src,c.listener,f)}let d=bP;return c}function JE(c,d,f,m,C){if(Array.isArray(d)){for(var N=0;N<d.length;N++)JE(c,d[N],f,m,C);return null}return f=ep(f),c&&c[sa]?c.L(d,f,l(m)?!!m.capture:!!m,C):ZE(c,d,f,!0,m,C)}function XE(c,d,f,m,C){if(Array.isArray(d))for(var N=0;N<d.length;N++)XE(c,d[N],f,m,C);else m=l(m)?!!m.capture:!!m,f=ep(f),c&&c[sa]?(c=c.i,d=String(d).toString(),d in c.g&&(N=c.g[d],f=Kf(N,f,m,C),-1<f&&(mu(N[f]),Array.prototype.splice.call(N,f,1),N.length==0&&(delete c.g[d],c.h--)))):c&&(c=Jf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Kf(d,f,m,C)),(f=-1<c?d[c]:null)&&Zf(f))}function Zf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[sa])Gf(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(ew(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=Jf(d))?(Gf(f,c),f.h==0&&(f.src=null,d[Qf]=null)):mu(c)}}}function ew(c){return c in Yf?Yf[c]:Yf[c]="on"+c}function bP(c,d){if(c.da)c=!0;else{d=new oa(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&Zf(c),c=f.call(m,d)}return c}function Jf(c){return c=c[Qf],c instanceof yu?c:null}var Xf="__closure_events_fn_"+(1e9*Math.random()>>>0);function ep(c){return typeof c=="function"?c:(c[Xf]||(c[Xf]=function(d){return c.handleEvent(d)}),c[Xf])}function ut(){Cr.call(this),this.i=new yu(this),this.M=this,this.F=null}w(ut,Cr),ut.prototype[sa]=!0,ut.prototype.removeEventListener=function(c,d,f,m){XE(this,c,d,f,m)};function vt(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new ct(d,c);else if(d instanceof ct)d.target=d.target||c;else{var C=d;d=new ct(m,c),T(d,C)}if(C=!0,f)for(var N=f.length-1;0<=N;N--){var k=d.g=f[N];C=vu(k,m,!0,d)&&C}if(k=d.g=c,C=vu(k,m,!0,d)&&C,C=vu(k,m,!1,d)&&C,f)for(N=0;N<f.length;N++)k=d.g=f[N],C=vu(k,m,!1,d)&&C}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)mu(f[m]);delete c.g[d],c.h--}}this.F=null},ut.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},ut.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function vu(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,N=0;N<d.length;++N){var k=d[N];if(k&&!k.da&&k.capture==f){var we=k.listener,ot=k.ha||k.src;k.fa&&Gf(c.i,k),C=we.call(ot,m)!==!1&&C}}return C&&!m.defaultPrevented}function tw(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function nw(c){c.g=tw(()=>{c.g=null,c.i&&(c.i=!1,nw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class CP extends Cr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:nw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function aa(c){Cr.call(this),this.h=c,this.g={}}w(aa,Cr);var rw=[];function iw(c){me(c.g,function(d,f){this.g.hasOwnProperty(f)&&Zf(d)},c),c.g={}}aa.prototype.N=function(){aa.aa.N.call(this),iw(this)},aa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tp=a.JSON.stringify,SP=a.JSON.parse,AP=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function np(){}np.prototype.h=null;function ow(c){return c.h||(c.h=c.i())}function sw(){}var ca={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rp(){ct.call(this,"d")}w(rp,ct);function ip(){ct.call(this,"c")}w(ip,ct);var mi={},aw=null;function _u(){return aw=aw||new ut}mi.La="serverreachability";function cw(c){ct.call(this,mi.La,c)}w(cw,ct);function ua(c){let d=_u();vt(d,new cw(d))}mi.STAT_EVENT="statevent";function uw(c,d){ct.call(this,mi.STAT_EVENT,c),this.stat=d}w(uw,ct);function _t(c){let d=_u();vt(d,new uw(d,c))}mi.Ma="timingevent";function lw(c,d){ct.call(this,mi.Ma,c),this.size=d}w(lw,ct);function la(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function da(){this.g=!0}da.prototype.xa=function(){this.g=!1};function RP(c,d,f,m,C,N){c.info(function(){if(c.g)if(N)for(var k="",we=N.split("&"),ot=0;ot<we.length;ot++){var pe=we[ot].split("=");if(1<pe.length){var lt=pe[0];pe=pe[1];var dt=lt.split("_");k=2<=dt.length&&dt[1]=="type"?k+(lt+"="+pe+"&"):k+(lt+"=redacted&")}}else k=null;else k=N;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+d+`
`+f+`
`+k})}function NP(c,d,f,m,C,N,k){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+d+`
`+f+`
`+N+" "+k})}function Eo(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+PP(c,f)+(m?" "+m:"")})}function MP(c,d){c.info(function(){return"TIMEOUT: "+d})}da.prototype.info=function(){};function PP(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var N=C[0];if(N!="noop"&&N!="stop"&&N!="close")for(var k=1;k<C.length;k++)C[k]=""}}}}return tp(f)}catch{return d}}var Iu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},op;function Eu(){}w(Eu,np),Eu.prototype.g=function(){return new XMLHttpRequest},Eu.prototype.i=function(){return{}},op=new Eu;function Sr(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new aa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hw}function hw(){this.i=null,this.g="",this.h=!1}var fw={},sp={};function ap(c,d,f){c.L=1,c.v=bu(qn(d)),c.m=f,c.P=!0,pw(c,null)}function pw(c,d){c.F=Date.now(),wu(c),c.A=qn(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),Aw(f.i,"t",m),c.C=0,f=c.j.J,c.h=new hw,c.g=Ww(c.j,f?d:null,!c.m),0<c.O&&(c.M=new CP(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(rw[0]=C.toString()),C=rw);for(var N=0;N<C.length;N++){var k=YE(f,C[N],m||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ua(),RP(c.i,c.u,c.A,c.l,c.R,c.m)}Sr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Wn(c)==3?d.j():this.Y(c)},Sr.prototype.Y=function(c){try{if(c==this.g)e:{let dt=Wn(this.g);var d=this.g.Ba();let Do=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||Ow(this.g)))){this.J||dt!=4||d==7||(d==8||0>=Do?ua(3):ua(2)),cp(this);var f=this.g.Z();this.X=f;t:if(gw(this)){var m=Ow(this.g);c="";var C=m.length,N=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yi(this),ha(this);var k="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(N&&d==C-1)});m.length=0,this.h.g+=c,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,NP(this.i,this.u,this.A,this.l,this.R,dt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var we,ot=this.g;if((we=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(we)){var pe=we;break t}}pe=null}if(f=pe)Eo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,up(this,f);else{this.o=!1,this.s=3,_t(12),yi(this),ha(this);break e}}if(this.P){f=!0;let Xt;for(;!this.J&&this.C<k.length;)if(Xt=xP(this,k),Xt==sp){dt==4&&(this.s=4,_t(14),f=!1),Eo(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==fw){this.s=4,_t(15),Eo(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else Eo(this.i,this.l,Xt,null),up(this,Xt);if(gw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||k.length!=0||this.h.h||(this.s=1,_t(16),f=!1),this.o=this.o&&f,!f)Eo(this.i,this.l,k,"[Invalid Chunked Response]"),yi(this),ha(this);else if(0<k.length&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.ba&&!lt.M&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),gp(lt),lt.M=!0,_t(11))}}else Eo(this.i,this.l,k,null),up(this,k);dt==4&&yi(this),this.o&&!this.J&&(dt==4?$w(this.j,this):(this.o=!1,wu(this)))}else YP(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),yi(this),ha(this)}}}catch{}finally{}};function gw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function xP(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?sp:(f=Number(d.substring(f,m)),isNaN(f)?fw:(m+=1,m+f>d.length?sp:(d=d.slice(m,m+f),c.C=m+f,d)))}Sr.prototype.cancel=function(){this.J=!0,yi(this)};function wu(c){c.S=Date.now()+c.I,mw(c,c.I)}function mw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=la(g(c.ba,c),d)}function cp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Sr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(MP(this.i,this.A),this.L!=2&&(ua(),_t(17)),yi(this),this.s=2,ha(this)):mw(this,this.S-c)};function ha(c){c.j.G==0||c.J||$w(c.j,c)}function yi(c){cp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,iw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function up(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||lp(f.h,c))){if(!c.K&&lp(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Nu(f),Au(f);else break e;pp(f),_t(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=la(g(f.Za,f),6e3));if(1>=_w(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else _i(f,11)}else if((c.K||f.g==c)&&Nu(f),!H(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let pe=C[d];if(f.T=pe[0],pe=pe[1],f.G==2)if(pe[0]=="c"){f.K=pe[1],f.ia=pe[2];let lt=pe[3];lt!=null&&(f.la=lt,f.j.info("VER="+f.la));let dt=pe[4];dt!=null&&(f.Aa=dt,f.j.info("SVER="+f.Aa));let Do=pe[5];Do!=null&&typeof Do=="number"&&0<Do&&(m=1.5*Do,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Xt=c.g;if(Xt){let Pu=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pu){var N=m.h;N.g||Pu.indexOf("spdy")==-1&&Pu.indexOf("quic")==-1&&Pu.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(dp(N,N.h),N.h=null))}if(m.D){let mp=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;mp&&(m.ya=mp,Se(m.I,m.D,mp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var k=c;if(m.qa=qw(m,m.J?m.ia:null,m.W),k.K){Iw(m.h,k);var we=k,ot=m.L;ot&&(we.I=ot),we.B&&(cp(we),wu(we)),m.g=k}else Uw(m);0<f.i.length&&Ru(f)}else pe[0]!="stop"&&pe[0]!="close"||_i(f,7);else f.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?_i(f,7):fp(f):pe[0]!="noop"&&f.l&&f.l.ta(pe),f.v=0)}}ua(4)}catch{}}var kP=class{constructor(c,d){this.g=c,this.map=d}};function yw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function _w(c){return c.h?1:c.g?c.g.size:0}function lp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function dp(c,d){c.g?c.g.add(d):c.h=d}function Iw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}yw.prototype.cancel=function(){if(this.i=Ew(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Ew(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return A(c.i)}function OP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function FP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function ww(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=FP(c),m=OP(c),C=m.length,N=0;N<C;N++)d.call(void 0,m[N],f&&f[N],c)}var Tw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function LP(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),C=null;if(0<=m){var N=c[f].substring(0,m);C=c[f].substring(m+1)}else N=c[f];d(N,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function vi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof vi){this.h=c.h,Tu(this,c.j),this.o=c.o,this.g=c.g,Du(this,c.s),this.l=c.l;var d=c.i,f=new ga;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Dw(this,f),this.m=c.m}else c&&(d=String(c).match(Tw))?(this.h=!1,Tu(this,d[1]||"",!0),this.o=fa(d[2]||""),this.g=fa(d[3]||"",!0),Du(this,d[4]),this.l=fa(d[5]||"",!0),Dw(this,d[6]||"",!0),this.m=fa(d[7]||"")):(this.h=!1,this.i=new ga(null,this.h))}vi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(pa(d,bw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(pa(d,bw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(pa(f,f.charAt(0)=="/"?UP:jP,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",pa(f,$P)),c.join("")};function qn(c){return new vi(c)}function Tu(c,d,f){c.j=f?fa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Du(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Dw(c,d,f){d instanceof ga?(c.i=d,HP(c.i,c.h)):(f||(d=pa(d,BP)),c.i=new ga(d,c.h))}function Se(c,d,f){c.i.set(d,f)}function bu(c){return Se(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function fa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function pa(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,VP),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function VP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var bw=/[#\/\?@]/g,jP=/[#\?:]/g,UP=/[#\?]/g,BP=/[#\?@]/g,$P=/#/g;function ga(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Ar(c){c.g||(c.g=new Map,c.h=0,c.i&&LP(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=ga.prototype,t.add=function(c,d){Ar(this),this.i=null,c=wo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Cw(c,d){Ar(c),d=wo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Sw(c,d){return Ar(c),d=wo(c,d),c.g.has(d)}t.forEach=function(c,d){Ar(this),this.g.forEach(function(f,m){f.forEach(function(C){c.call(d,C,m,this)},this)},this)},t.na=function(){Ar(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let C=c[m];for(let N=0;N<C.length;N++)f.push(d[m])}return f},t.V=function(c){Ar(this);let d=[];if(typeof c=="string")Sw(this,c)&&(d=d.concat(this.g.get(wo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Ar(this),this.i=null,c=wo(this,c),Sw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Aw(c,d,f){Cw(c,d),0<f.length&&(c.i=null,c.g.set(wo(c,d),A(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let N=encodeURIComponent(String(m)),k=this.V(m);for(m=0;m<k.length;m++){var C=N;k[m]!==""&&(C+="="+encodeURIComponent(String(k[m]))),c.push(C)}}return this.i=c.join("&")};function wo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function HP(c,d){d&&!c.j&&(Ar(c),c.i=null,c.g.forEach(function(f,m){var C=m.toLowerCase();m!=C&&(Cw(this,m),Aw(this,C,f))},c)),c.j=d}function zP(c,d){let f=new da;if(a.Image){let m=new Image;m.onload=y(Rr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Rr,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Rr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Rr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function qP(c,d){let f=new da,m=new AbortController,C=setTimeout(()=>{m.abort(),Rr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(N=>{clearTimeout(C),N.ok?Rr(f,"TestPingServer: ok",!0,d):Rr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Rr(f,"TestPingServer: error",!1,d)})}function Rr(c,d,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function WP(){this.g=new AP}function GP(c,d,f){let m=f||"";try{ww(c,function(C,N){let k=C;l(C)&&(k=tp(C)),d.push(m+N+"="+encodeURIComponent(k))})}catch(C){throw d.push(m+"type="+encodeURIComponent("_badmap")),C}}function ma(c){this.l=c.Ub||null,this.j=c.eb||!1}w(ma,np),ma.prototype.g=function(){return new Cu(this.l,this.j)},ma.prototype.i=function(c){return function(){return c}}({});function Cu(c,d){ut.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Cu,ut),t=Cu.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,va(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ya(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,va(this)),this.g&&(this.readyState=3,va(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ya(this):va(this),this.readyState==3&&Rw(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ya(this))},t.Qa=function(c){this.g&&(this.response=c,ya(this))},t.ga=function(){this.g&&ya(this)};function ya(c){c.readyState=4,c.l=null,c.j=null,c.v=null,va(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function va(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Cu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Nw(c){let d="";return me(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function hp(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=Nw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Se(c,d,f))}function Me(c){ut.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Me,ut);var KP=/^https?$/i,QP=["POST","PUT"];t=Me.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():op.g(),this.v=this.o?ow(this.o):ow(op),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(N){Mw(this,N);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let N of m.keys())f.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(N=>N.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(QP,d,void 0))||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,k]of f)this.g.setRequestHeader(N,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kw(this),this.u=!0,this.g.send(c),this.u=!1}catch(N){Mw(this,N)}};function Mw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Pw(c),Su(c)}function Pw(c){c.A||(c.A=!0,vt(c,"complete"),vt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,vt(this,"complete"),vt(this,"abort"),Su(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Su(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?xw(this):this.bb())},t.bb=function(){xw(this)};function xw(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Wn(c)!=4||c.Z()!=2)){if(c.u&&Wn(c)==4)tw(c.Ea,0,c);else if(vt(c,"readystatechange"),Wn(c)==4){c.h=!1;try{let k=c.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=k===0){var C=String(c.D).match(Tw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),m=!KP.test(C?C.toLowerCase():"")}f=m}if(f)vt(c,"complete"),vt(c,"success");else{c.m=6;try{var N=2<Wn(c)?c.g.statusText:""}catch{N=""}c.l=N+" ["+c.Z()+"]",Pw(c)}}finally{Su(c)}}}}function Su(c,d){if(c.g){kw(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||vt(c,"ready");try{f.onreadystatechange=m}catch{}}}function kw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Wn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),SP(d)}};function Ow(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function YP(c){let d={};c=(c.g&&2<=Wn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(H(c[m]))continue;var f=b(c[m]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let N=d[C]||[];d[C]=N,N.push(f)}D(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _a(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Fw(c){this.Aa=0,this.i=[],this.j=new da,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_a("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_a("baseRetryDelayMs",5e3,c),this.cb=_a("retryDelaySeedMs",1e4,c),this.Wa=_a("forwardChannelMaxRetries",2,c),this.wa=_a("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new yw(c&&c.concurrentRequestLimit),this.Da=new WP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Fw.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,m){_t(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=qw(this,null,this.W),Ru(this)};function fp(c){if(Lw(c),c.G==3){var d=c.U++,f=qn(c.I);if(Se(f,"SID",c.K),Se(f,"RID",d),Se(f,"TYPE","terminate"),Ia(c,f),d=new Sr(c,c.j,d),d.L=2,d.v=bu(qn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Ww(d.j,null),d.g.ea(d.v)),d.F=Date.now(),wu(d)}zw(c)}function Au(c){c.g&&(gp(c),c.g.cancel(),c.g=null)}function Lw(c){Au(c),c.u&&(a.clearTimeout(c.u),c.u=null),Nu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Ru(c){if(!vw(c.h)&&!c.s){c.s=!0;var d=c.Ga;ra||QE(),ia||(ra(),ia=!0),Wf.add(d,c),c.B=0}}function ZP(c,d){return _w(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=la(g(c.Ga,c,d),Hw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new Sr(this,this.j,c),N=this.o;if(this.S&&(N?(N=v(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(C.H=N,N=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=jw(this,C,d),f=qn(this.I),Se(f,"RID",c),Se(f,"CVER",22),this.D&&Se(f,"X-HTTP-Session-Id",this.D),Ia(this,f),N&&(this.O?d="headers="+encodeURIComponent(String(Nw(N)))+"&"+d:this.m&&hp(f,this.m,N)),dp(this.h,C),this.Ua&&Se(f,"TYPE","init"),this.P?(Se(f,"$req",d),Se(f,"SID","null"),C.T=!0,ap(C,f,null)):ap(C,f,d),this.G=2}}else this.G==3&&(c?Vw(this,c):this.i.length==0||vw(this.h)||Vw(this))};function Vw(c,d){var f;d?f=d.l:f=c.U++;let m=qn(c.I);Se(m,"SID",c.K),Se(m,"RID",f),Se(m,"AID",c.T),Ia(c,m),c.m&&c.o&&hp(m,c.m,c.o),f=new Sr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=jw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),dp(c.h,f),ap(f,m,d)}function Ia(c,d){c.H&&me(c.H,function(f,m){Se(d,m,f)}),c.l&&ww({},function(f,m){Se(d,m,f)})}function jw(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var C=c.i;let N=-1;for(;;){let k=["count="+f];N==-1?0<f?(N=C[0].g,k.push("ofs="+N)):N=0:k.push("ofs="+N);let we=!0;for(let ot=0;ot<f;ot++){let pe=C[ot].g,lt=C[ot].map;if(pe-=N,0>pe)N=Math.max(0,C[ot].g-100),we=!1;else try{GP(lt,k,"req"+pe+"_")}catch{m&&m(lt)}}if(we){m=k.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function Uw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ra||QE(),ia||(ra(),ia=!0),Wf.add(d,c),c.v=0}}function pp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=la(g(c.Fa,c),Hw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Bw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=la(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),Au(this),Bw(this))};function gp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Bw(c){c.g=new Sr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=qn(c.qa);Se(d,"RID","rpc"),Se(d,"SID",c.K),Se(d,"AID",c.T),Se(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Se(d,"TO",c.ja),Se(d,"TYPE","xmlhttp"),Ia(c,d),c.m&&c.o&&hp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=bu(qn(d)),f.m=null,f.P=!0,pw(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Au(this),pp(this),_t(19))};function Nu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function $w(c,d){var f=null;if(c.g==d){Nu(c),gp(c),c.g=null;var m=2}else if(lp(c.h,d))f=d.D,Iw(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;m=_u(),vt(m,new lw(m,f)),Ru(c)}else Uw(c);else if(C=d.s,C==3||C==0&&0<d.X||!(m==1&&ZP(c,d)||m==2&&pp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:_i(c,5);break;case 4:_i(c,10);break;case 3:_i(c,6);break;default:_i(c,2)}}}function Hw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function _i(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let C=!m;m=new vi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Tu(m,"https"),bu(m),C?zP(m.toString(),f):qP(m.toString(),f)}else _t(2);c.G=0,c.l&&c.l.sa(d),zw(c),Lw(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function zw(c){if(c.G=0,c.ka=[],c.l){let d=Ew(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function qw(c,d,f){var m=f instanceof vi?qn(f):new vi(f);if(m.g!="")d&&(m.g=d+"."+m.g),Du(m,m.s);else{var C=a.location;m=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var N=new vi(null);m&&Tu(N,m),d&&(N.g=d),C&&Du(N,C),f&&(N.l=f),m=N}return f=c.D,d=c.ya,f&&d&&Se(m,f,d),Se(m,"VER",c.la),Ia(c,m),m}function Ww(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Me(new ma({eb:f})):new Me(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gw(){}t=Gw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Mu(){}Mu.prototype.g=function(c,d){return new Ft(c,d)};function Ft(c,d){ut.call(this),this.g=new Fw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!H(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!H(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new To(this)}w(Ft,ut),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){fp(this.g)},Ft.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=tp(c),c=f);d.i.push(new kP(d.Ya++,c)),d.G==3&&Ru(d)},Ft.prototype.N=function(){this.g.l=null,delete this.j,fp(this.g),delete this.g,Ft.aa.N.call(this)};function Kw(c){rp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}w(Kw,rp);function Qw(){ip.call(this),this.status=1}w(Qw,ip);function To(c){this.g=c}w(To,Gw),To.prototype.ua=function(){vt(this.g,"a")},To.prototype.ta=function(c){vt(this.g,new Kw(c))},To.prototype.sa=function(c){vt(this.g,new Qw)},To.prototype.ra=function(){vt(this.g,"b")},Mu.prototype.createWebChannel=Mu.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,N_=vr.createWebChannelTransport=function(){return new Mu},R_=vr.getStatEventTarget=function(){return _u()},A_=vr.Event=mi,Wh=vr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Iu.NO_ERROR=0,Iu.TIMEOUT=8,Iu.HTTP_ERROR=6,Wc=vr.ErrorCode=Iu,dw.COMPLETE="complete",S_=vr.EventType=dw,sw.EventType=ca,ca.OPEN="a",ca.CLOSE="b",ca.ERROR="c",ca.MESSAGE="d",ut.prototype.listen=ut.prototype.K,Ms=vr.WebChannel=sw,wz=vr.FetchXmlHttpFactory=ma,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,C_=vr.XhrIo=Me}).apply(typeof qh<"u"?qh:typeof self<"u"?self:typeof window<"u"?window:{});var FR="@firebase/firestore",LR="4.8.0";var nt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nt.UNAUTHENTICATED=new nt(null),nt.GOOGLE_CREDENTIALS=new nt("google-credentials-uid"),nt.FIRST_PARTY=new nt("first-party-uid"),nt.MOCK_USER=new nt("mock-user");var Js="11.10.0";var fo=new xn("@firebase/firestore");function Ps(){return fo.logLevel}function V(t,...e){if(fo.logLevel<=ce.DEBUG){let n=e.map(IE);fo.debug(`Firestore (${Js}): ${t}`,...n)}}function Ir(t,...e){if(fo.logLevel<=ce.ERROR){let n=e.map(IE);fo.error(`Firestore (${Js}): ${t}`,...n)}}function ui(t,...e){if(fo.logLevel<=ce.WARN){let n=e.map(IE);fo.warn(`Firestore (${Js}): ${t}`,...n)}}function IE(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function K(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,NN(t,r,n)}function NN(t,e,n){let r=`FIRESTORE (${Js}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ir(r),new Error(r)}function ve(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||NN(e,i,r)}function Y(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends zt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var _r=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Xh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},O_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nt.UNAUTHENTICATED))}shutdown(){}},F_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},L_=class{constructor(e){this.t=e,this.currentUser=nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new _r,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new _r)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new Xh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new nt(e)}},V_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=nt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},j_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new V_(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ef=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},U_=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ot(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ve(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ef(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ef(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Tz(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function MN(){return new TextEncoder}var Jc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Tz(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function oe(t,e){return t<e?-1:t>e?1:0}function B_(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return oe(r,i);{let o=MN(),s=Dz(o.encode(VR(t,n)),o.encode(VR(e,n)));return s!==0?s:oe(r,i)}}n+=r>65535?2:1}return oe(t.length,e.length)}function VR(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Dz(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return oe(t[n],e[n]);return oe(t.length,e.length)}function Us(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var jR="__name__",tf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&K(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return oe(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):B_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yr.fromString(e.substring(4,e.length-2))}},Ne=class t extends tf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},bz=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wt=class t extends tf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return bz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jR}static keyField(){return new t([jR])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new F(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new F(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new F(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var G=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ne.fromString(e))}static fromName(e){return new t(Ne.fromString(e).popFirst(5))}static empty(){return new t(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ne(e.slice()))}};function PN(t,e,n){if(!n)throw new F(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Cz(t,e,n,r){if(e===!0&&r===!0)throw new F(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function UR(t){if(!G.isDocumentKey(t))throw new F(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function BR(t){if(G.isDocumentKey(t))throw new F(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function kf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K(12329,{type:typeof t})}function Ln(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=kf(t);throw new F(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Sz(t,e){if(e<=0)throw new F(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Ge(t,e){let n={typeString:t};return e&&(n.value=e),n}function du(t,e){if(!xN(t))throw new F(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new F(M.INVALID_ARGUMENT,n);return!0}var $R=-62135596800,HR=1e6,Ke=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*HR);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<$R)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/HR}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(du(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-$R;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:Ge("string",Ke._jsonSchemaVersion),seconds:Ge("number"),nanoseconds:Ge("number")};var ee=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Ke(0,0))}static max(){return new t(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Xc=-1,$_=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};$_.UNKNOWN_ID=-1;function Az(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new po(i,G.empty(),e)}function Rz(t){return new po(t.readTime,t.key,Xc)}var po=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ee.min(),G.empty(),Xc)}static max(){return new t(ee.max(),G.empty(),Xc)}};function Nz(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}var Mz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",H_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Xs(t){return _(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==Mz)throw t;V("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function Pz(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ea(t){return t.name==="IndexedDbTransactionError"}var EE=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),wE=-1;function Of(t){return t==null}function eu(t){return t===0&&1/t==-1/0}function xz(t){return typeof t=="number"&&Number.isInteger(t)&&!eu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var kN="";function kz(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=zR(e)),e=Oz(t.get(n),e);return zR(e)}function Oz(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case kN:n+="";break;default:n+=o}}return n}function zR(t){return t+kN+""}var Fz="remoteDocuments",ON="owner";var FN="mutationQueues";var LN="mutations";var VN="documentMutations",Lz="remoteDocumentsV14";var jN="remoteDocumentGlobal";var UN="targets";var BN="targetDocuments";var $N="targetGlobal",HN="collectionParents";var zN="clientMetadata";var qN="bundles";var WN="namedQueries";var Vz="indexConfiguration";var jz="indexState";var Uz="indexEntries";var GN="documentOverlays";var Bz="globals";var $z=[FN,LN,VN,Fz,UN,ON,$N,BN,zN,jN,HN,qN,WN],lee=[...$z,GN],Hz=[FN,LN,VN,Lz,UN,ON,$N,BN,zN,jN,HN,qN,WN,GN],zz=Hz,qz=[...zz,Vz,jz,Uz];var dee=[...qz,Bz];function qR(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function KN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Oe=class t{constructor(e,n){this.comparator=e,this.root=n||Vn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Vn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fs(this.root,e,this.comparator,!0)}},Fs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Vn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}};Vn.EMPTY=null,Vn.RED=!0,Vn.BLACK=!1;Vn.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Vn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var rt=class t{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nf(this.data.getIterator())}getIteratorFrom(e){return new nf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},nf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Jt=class t{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new t([])}unionWith(e){let n=new rt(Wt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Us(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var rf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var yt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new rf("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};yt.EMPTY_BYTE_STRING=new yt("");var Wz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(t){if(ve(!!t,39018),typeof t=="string"){let e=0,n=Wz.exec(t);if(ve(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wr(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}var QN="server_timestamp",YN="__type__",ZN="__previous_value__",JN="__local_write_time__";function TE(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[YN])===null||n===void 0?void 0:n.stringValue)===QN}function Ff(t){let e=t.mapValue.fields[ZN];return TE(e)?Ff(e):e}function tu(t){let e=Er(t.mapValue.fields[JN].timestampValue);return new Ke(e.seconds,e.nanos)}var z_=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},of="(default)",sf=class t{constructor(e,n){this.projectId=e,this.database=n||of}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===of}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var DE="__type__",XN="__max__",Gh={mapValue:{fields:{__type__:{stringValue:XN}}}},bE="__vector__",Bs="value";function li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?TE(t)?4:tM(t)?9007199254740991:eM(t)?10:11:K(28295,{value:t})}function $n(t,e){if(t===e)return!0;let n=li(t);if(n!==li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tu(t).isEqual(tu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Er(i.timestampValue),a=Er(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return wr(i.bytesValue).isEqual(wr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Re(i.geoPointValue.latitude)===Re(o.geoPointValue.latitude)&&Re(i.geoPointValue.longitude)===Re(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Re(i.integerValue)===Re(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Re(i.doubleValue),a=Re(o.doubleValue);return s===a?eu(s)===eu(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Us(t.arrayValue.values||[],e.arrayValue.values||[],$n);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(qR(s)!==qR(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!$n(s[u],a[u])))return!1;return!0}(t,e);default:return K(52216,{left:t})}}function nu(t,e){return(t.values||[]).find(n=>$n(n,e))!==void 0}function $s(t,e){if(t===e)return 0;let n=li(t),r=li(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Re(o.integerValue||o.doubleValue),u=Re(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return WR(t.timestampValue,e.timestampValue);case 4:return WR(tu(t),tu(e));case 5:return B_(t.stringValue,e.stringValue);case 6:return function(o,s){let a=wr(o),u=wr(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=oe(a[l],u[l]);if(h!==0)return h}return oe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=oe(Re(o.latitude),Re(s.latitude));return a!==0?a:oe(Re(o.longitude),Re(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return GR(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[Bs])===null||a===void 0?void 0:a.arrayValue,w=(u=g[Bs])===null||u===void 0?void 0:u.arrayValue,A=oe(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=w?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:GR(y,w)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Gh.mapValue&&s===Gh.mapValue)return 0;if(o===Gh.mapValue)return 1;if(s===Gh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=B_(u[p],h[p]);if(g!==0)return g;let y=$s(a[u[p]],l[h[p]]);if(y!==0)return y}return oe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw K(23264,{le:n})}}function WR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);let n=Er(t),r=Er(e),i=oe(n.seconds,r.seconds);return i!==0?i:oe(n.nanos,r.nanos)}function GR(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=$s(n[i],r[i]);if(o)return o}return oe(n.length,r.length)}function Hs(t){return q_(t)}function q_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Er(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return wr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=q_(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${q_(n.fields[s])}`;return i+"}"}(t.mapValue):K(61005,{value:t})}function Yh(t){switch(li(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Ff(t);return e?16+Yh(e):16;case 5:return 2*t.stringValue.length;case 6:return wr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Yh(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return gi(r.fields,(o,s)=>{i+=o.length+Yh(s)}),i}(t.mapValue);default:throw K(13486,{value:t})}}function KR(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function W_(t){return!!t&&"integerValue"in t}function CE(t){return!!t&&"arrayValue"in t}function QR(t){return!!t&&"nullValue"in t}function YR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zh(t){return!!t&&"mapValue"in t}function eM(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[DE])===null||n===void 0?void 0:n.stringValue)===bE}function Kc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return gi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Kc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===XN}var fee={mapValue:{fields:{[DE]:{stringValue:bE},[Bs]:{arrayValue:{}}}}};var qt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Zh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kc(n)}setAll(e){let n=Wt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Kc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $n(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Zh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){gi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Kc(this.value))}};function nM(t){let e=[];return gi(t.fields,(n,r)=>{let i=new Wt([n]);if(Zh(r)){let o=nM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Jt(e)}var gn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ee.min(),ee.min(),ee.min(),qt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ee.min(),ee.min(),qt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ee.min(),ee.min(),qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var zs=class{constructor(e,n){this.position=e,this.inclusive=n}};function ZR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(s.referenceValue),n.key):r=$s(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function JR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$n(t.position[n],e.position[n]))return!1;return!0}var go=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Gz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var af=class{},We=class t extends af{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new K_(e,n,r):n==="array-contains"?new Z_(e,r):n==="in"?new J_(e,r):n==="not-in"?new X_(e,r):n==="array-contains-any"?new eI(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Q_(e,r):new Y_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($s(n,this.value)):n!==null&&li(this.value)===li(n)&&this.matchesComparison($s(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},mn=class t extends af{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return rM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function rM(t){return t.op==="and"}function iM(t){return Kz(t)&&rM(t)}function Kz(t){for(let e of t.filters)if(e instanceof mn)return!1;return!0}function G_(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+Hs(t.value);if(iM(t))return t.filters.map(e=>G_(e)).join(",");{let e=t.filters.map(n=>G_(n)).join(",");return`${t.op}(${e})`}}function oM(t,e){return t instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.field.isEqual(i.field)&&$n(r.value,i.value)}(t,e):t instanceof mn?function(r,i){return i instanceof mn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&oM(s,i.filters[a]),!0):!1}(t,e):void K(19439)}function sM(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${Hs(n.value)}`}(t):t instanceof mn?function(n){return n.op.toString()+" {"+n.getFilters().map(sM).join(" ,")+"}"}(t):"Filter"}var K_=class extends We{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){let n=G.comparator(e.key,this.key);return this.matchesComparison(n)}},Q_=class extends We{constructor(e,n){super(e,"in",n),this.keys=aM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Y_=class extends We{constructor(e,n){super(e,"not-in",n),this.keys=aM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function aM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}var Z_=class extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return CE(n)&&nu(n.arrayValue,this.value)}},J_=class extends We{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&nu(this.value.arrayValue,n)}},X_=class extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!nu(this.value.arrayValue,n)}},eI=class extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!CE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>nu(this.value.arrayValue,r))}};var tI=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function XR(t,e=null,n=[],r=[],i=null,o=null,s=null){return new tI(t,e,n,r,i,o,s)}function SE(t){let e=Y(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>G_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Of(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Hs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Hs(r)).join(",")),e.Pe=n}return e.Pe}function AE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Gz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!oM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!JR(t.startAt,e.startAt)&&JR(t.endAt,e.endAt)}function nI(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var di=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Qz(t,e,n,r,i,o,s,a){return new di(t,e,n,r,i,o,s,a)}function RE(t){return new di(t)}function eN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cM(t){return t.collectionGroup!==null}function Qc(t){let e=Y(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new rt(Wt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new go(o,r))}),n.has(Wt.keyField().canonicalString())||e.Te.push(new go(Wt.keyField(),r))}return e.Te}function jn(t){let e=Y(t);return e.Ie||(e.Ie=Yz(e,Qc(t))),e.Ie}function Yz(t,e){if(t.limitType==="F")return XR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new go(i.field,o)});let n=t.endAt?new zs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zs(t.startAt.position,t.startAt.inclusive):null;return XR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rI(t,e){let n=t.filters.concat([e]);return new di(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function cf(t,e,n){return new di(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lf(t,e){return AE(jn(t),jn(e))&&t.limitType===e.limitType}function uM(t){return`${SE(jn(t))}|lt:${t.limitType}`}function xs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>sM(i)).join(", ")}]`),Of(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Hs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Hs(i)).join(",")),`Target(${r})`}(jn(t))}; limitType=${t.limitType})`}function Vf(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Qc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=ZR(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Qc(r),i)||r.endAt&&!function(s,a,u){let l=ZR(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Qc(r),i))}(t,e)}function Zz(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lM(t){return(e,n)=>{let r=!1;for(let i of Qc(t)){let o=Jz(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Jz(t,e,n){let r=t.field.isKeyField()?G.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?$s(u,l):K(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:t.dir})}}var Tr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return KN(this.inner)}size(){return this.innerSize}};var Xz=new Oe(G.comparator);function Dr(){return Xz}var dM=new Oe(G.comparator);function Gc(...t){let e=dM;for(let n of t)e=e.insert(n.key,n);return e}function hM(t){let e=dM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function co(){return Yc()}function fM(){return Yc()}function Yc(){return new Tr(t=>t.toString(),(t,e)=>t.isEqual(e))}var eq=new Oe(G.comparator),tq=new rt(G.comparator);function le(...t){let e=tq;for(let n of t)e=e.add(n);return e}var nq=new rt(oe);function rq(){return nq}function NE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eu(e)?"-0":e}}function pM(t){return{integerValue:""+t}}function iq(t,e){return xz(e)?pM(e):NE(t,e)}var qs=class{constructor(){this._=void 0}};function oq(t,e,n){return t instanceof Ws?function(i,o){let s={fields:{[YN]:{stringValue:QN},[JN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&TE(o)&&(o=Ff(o)),o&&(s.fields[ZN]=o),{mapValue:s}}(n,e):t instanceof mo?mM(t,e):t instanceof yo?yM(t,e):function(i,o){let s=gM(i,o),a=tN(s)+tN(i.Ee);return W_(s)&&W_(i.Ee)?pM(a):NE(i.serializer,a)}(t,e)}function sq(t,e,n){return t instanceof mo?mM(t,e):t instanceof yo?yM(t,e):n}function gM(t,e){return t instanceof Gs?function(r){return W_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ws=class extends qs{},mo=class extends qs{constructor(e){super(),this.elements=e}};function mM(t,e){let n=vM(e);for(let r of t.elements)n.some(i=>$n(i,r))||n.push(r);return{arrayValue:{values:n}}}var yo=class extends qs{constructor(e){super(),this.elements=e}};function yM(t,e){let n=vM(e);for(let r of t.elements)n=n.filter(i=>!$n(i,r));return{arrayValue:{values:n}}}var Gs=class extends qs{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function tN(t){return Re(t.integerValue||t.doubleValue)}function vM(t){return CE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function aq(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof mo&&i instanceof mo||r instanceof yo&&i instanceof yo?Us(r.elements,i.elements,$n):r instanceof Gs&&i instanceof Gs?$n(r.Ee,i.Ee):r instanceof Ws&&i instanceof Ws}(t.transform,e.transform)}var iI=class{constructor(e,n){this.version=e,this.transformResults=n}},Un=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Jh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ks=class{};function _M(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ru(t.key,Un.none()):new vo(t.key,t.data,Un.none());{let n=t.data,r=qt.empty(),i=new rt(Wt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Hn(t.key,r,new Jt(i.toArray()),Un.none())}}function cq(t,e,n){t instanceof vo?function(i,o,s){let a=i.value.clone(),u=rN(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Hn?function(i,o,s){if(!Jh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=rN(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(IM(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Zc(t,e,n,r){return t instanceof vo?function(o,s,a,u){if(!Jh(o.precondition,s))return a;let l=o.value.clone(),h=iN(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hn?function(o,s,a,u){if(!Jh(o.precondition,s))return a;let l=iN(o.fieldTransforms,u,s),h=s.data;return h.setAll(IM(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return Jh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function uq(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=gM(r.transform,i||null);o!=null&&(n===null&&(n=qt.empty()),n.set(r.field,o))}return n||null}function nN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Us(r,i,(o,s)=>aq(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var vo=class extends Ks{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Hn=class extends Ks{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function IM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function rN(t,e,n){let r=new Map;ve(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,sq(s,a,n[i]))}return r}function iN(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,oq(o,s,e))}return r}var ru=class extends Ks{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},oI=class extends Ks{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var sI=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&cq(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Zc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Zc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=fM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=_M(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&Us(this.mutations,e.mutations,(n,r)=>nN(n,r))&&Us(this.baseMutations,e.baseMutations,(n,r)=>nN(n,r))}},aI=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ve(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return eq}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var cI=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var uI=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ze,fe;function lq(t){switch(t){case M.OK:return K(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return K(15467,{code:t})}}function EM(t){if(t===void 0)return Ir("GRPC error has no .code"),M.UNKNOWN;switch(t){case ze.OK:return M.OK;case ze.CANCELLED:return M.CANCELLED;case ze.UNKNOWN:return M.UNKNOWN;case ze.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case ze.INTERNAL:return M.INTERNAL;case ze.UNAVAILABLE:return M.UNAVAILABLE;case ze.UNAUTHENTICATED:return M.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case ze.NOT_FOUND:return M.NOT_FOUND;case ze.ALREADY_EXISTS:return M.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return M.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case ze.ABORTED:return M.ABORTED;case ze.OUT_OF_RANGE:return M.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return M.UNIMPLEMENTED;case ze.DATA_LOSS:return M.DATA_LOSS;default:return K(39323,{code:t})}}(fe=ze||(ze={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var oN=null;var dq=new yr([4294967295,4294967295],0);function sN(t){let e=MN().encode(t),n=new b_;return n.update(e),new Uint8Array(n.digest())}function aN(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new yr([n,r],0),new yr([i,o],0)]}var lI=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new uo(`Invalid padding: ${n}`);if(r<0)throw new uo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new uo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=yr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(yr.fromNumber(r)));return i.compare(dq)===1&&(i=new yr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=sN(e),[r,i]=aN(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=sN(e),[r,i]=aN(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},uo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var uf=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,iu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ee.min(),i,new Oe(oe),Dr(),le())}},iu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,le(),le(),le())}};var Ls=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},lf=class{constructor(e,n){this.targetId=e,this.De=n}},df=class{constructor(e,n,r=yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},hf=class{constructor(){this.ve=0,this.Ce=cN(),this.Fe=yt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=le(),n=le(),r=le();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:K(38017,{changeType:o})}}),new iu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=cN()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},dI=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Dr(),this.je=Kh(),this.Je=Kh(),this.He=new Oe(oe)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(nI(o))if(r===0){let s=new G(o.path);this.Xe(n,s,gn.newNoDocument(s,ee.min()))}else ve(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}oN?.ct(function(h,p,g,y,w){var A,R,O,H,B,de;let je={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},me=p.unchangedNames;return me&&(je.bloomFilter={applied:w===0,hashCount:(A=me?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(H=(O=(R=me?.bits)===null||R===void 0?void 0:R.bitmap)===null||O===void 0?void 0:O.length)!==null&&H!==void 0?H:0,padding:(de=(B=me?.bits)===null||B===void 0?void 0:B.padding)!==null&&de!==void 0?de:0,mightContain:D=>{var v;return(v=y?.mightContain(D))!==null&&v!==void 0&&v}}),je}(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=wr(r).toUint8Array()}catch(u){if(u instanceof rf)return ui("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new lI(s,i,o)}catch(u){return ui(u instanceof uo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&nI(a.target)){let u=new G(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,gn.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=le();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new uf(e,n,this.He,this.ze,r);return this.ze=Dr(),this.je=Kh(),this.Je=Kh(),this.He=new Oe(oe),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new hf,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new rt(oe),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new rt(oe),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new hf),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function Kh(){return new Oe(G.comparator)}function cN(){return new Oe(G.comparator)}var hq={asc:"ASCENDING",desc:"DESCENDING"},fq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pq={and:"AND",or:"OR"},hI=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function fI(t,e){return t.useProto3Json||Of(e)?e:{value:e}}function ff(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gq(t,e){return ff(t,e.toTimestamp())}function Bn(t){return ve(!!t,49232),ee.fromTimestamp(function(n){let r=Er(n);return new Ke(r.seconds,r.nanos)}(t))}function ME(t,e){return pI(t,e).canonicalString()}function pI(t,e){let n=function(i){return new Ne(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function TM(t){let e=Ne.fromString(t);return ve(AM(e),10190,{key:e.toString()}),e}function gI(t,e){return ME(t.databaseId,e.path)}function M_(t,e){let n=TM(e);if(n.get(1)!==t.databaseId.projectId)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(bM(n))}function DM(t,e){return ME(t.databaseId,e)}function mq(t){let e=TM(t);return e.length===4?Ne.emptyPath():bM(e)}function mI(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bM(t){return ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function uN(t,e,n){return{name:gI(t,e),fields:n.value.mapValue.fields}}function yq(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(ve(h===void 0||typeof h=="string",58123),yt.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),yt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?M.UNKNOWN:EM(l.code);return new F(h,l.message||"")}(s);n=new df(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=M_(t,r.document.name),o=Bn(r.document.updateTime),s=r.document.createTime?Bn(r.document.createTime):ee.min(),a=new qt({mapValue:{fields:r.document.fields}}),u=gn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Ls(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=M_(t,r.document),o=r.readTime?Bn(r.readTime):ee.min(),s=gn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Ls([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=M_(t,r.document),o=r.removedTargetIds||[];n=new Ls([],o,i,null)}else{if(!("filter"in e))return K(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new uI(i,o),a=r.targetId;n=new lf(a,s)}}return n}function vq(t,e){let n;if(e instanceof vo)n={update:uN(t,e.key,e.value)};else if(e instanceof ru)n={delete:gI(t,e.key)};else if(e instanceof Hn)n={update:uN(t,e.key,e.data),updateMask:Sq(e.fieldMask)};else{if(!(e instanceof oI))return K(16599,{Rt:e.type});n={verify:gI(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Ws)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof mo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gs)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw K(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:gq(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K(27497)}(t,e.precondition)),n}function _q(t,e){return t&&t.length>0?(ve(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?Bn(i.updateTime):Bn(o);return s.isEqual(ee.min())&&(s=Bn(o)),new iI(s,i.transformResults||[])}(n,e))):[]}function Iq(t,e){return{documents:[DM(t,e.path)]}}function Eq(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=DM(t,i);let o=function(l){if(l.length!==0)return SM(mn.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:ks(g.field),direction:Dq(g.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=fI(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:n,parent:i}}function wq(t){let e=mq(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ve(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let g=CM(p);return g instanceof mn&&iM(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(g=>function(w){return new go(Os(w.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Of(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){let g=!!p.before,y=p.values||[];return new zs(y,g)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new zs(y,g)}(n.endAt)),Qz(e,i,s,o,a,"F",u,l)}function Tq(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function CM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Os(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Os(n.unaryFilter.field);return We.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Os(n.unaryFilter.field);return We.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Os(n.unaryFilter.field);return We.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(t):t.fieldFilter!==void 0?function(n){return We.create(Os(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return mn.create(n.compositeFilter.filters.map(r=>CM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(n.compositeFilter.op))}(t):K(30097,{filter:t})}function Dq(t){return hq[t]}function bq(t){return fq[t]}function Cq(t){return pq[t]}function ks(t){return{fieldPath:t.canonicalString()}}function Os(t){return Wt.fromServerFormat(t.fieldPath)}function SM(t){return t instanceof We?function(n){if(n.op==="=="){if(YR(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NAN"}};if(QR(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(YR(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NOT_NAN"}};if(QR(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ks(n.field),op:bq(n.op),value:n.value}}}(t):t instanceof mn?function(n){let r=n.getFilters().map(i=>SM(i));return r.length===1?r[0]:{compositeFilter:{op:Cq(n.op),filters:r}}}(t):K(54877,{filter:t})}function Sq(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function AM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ou=class t{constructor(e,n,r,i,o=ee.min(),s=ee.min(),a=yt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var yI=class{constructor(e){this.gt=e}};function Aq(t){let e=wq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cf(e,e.limit,"L"):e}var pf=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Re(e.integerValue));else if("doubleValue"in e){let r=Re(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),eu(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=Er(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(wr(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?tM(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):eM(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):K(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=Bs,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Re(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),G.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};pf.Ut=new pf;var vI=class{constructor(){this.Dn=new _I}addToCollectionParentIndex(e,n){return this.Dn.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(po.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(po.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},_I=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new rt(Ne.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rt(Ne.comparator)).toArray()}};var pee=new Uint8Array(0);var lN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RM=41943040,Zt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(RM,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);var su=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var dN="LruGarbageCollector",Rq=1048576;function hN([t,e],[n,r]){let i=oe(t,n);return i===0?oe(e,r):i}var II=class{constructor(e){this.Tr=e,this.buffer=new rt(hN),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();hN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},EI=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){V(dN,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ea(n)?V(dN,"Ignoring IndexedDB error during garbage collection: ",n):yield Xs(n)}yield this.Rr(3e5)}))}},wI=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return x.resolve(EE.ue);let r=new II(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(lN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lN):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ps()<=ce.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Nq(t,e){return new wI(t,e)}var TI=class{constructor(){this.changes=new Tr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var DI=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var bI=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Zc(r.mutation,i,Jt.empty(),Ke.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){let i=co();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Gc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=co();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Dr(),s=Yc(),a=function(){return Yc()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Hn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Zc(h.mutation,l,h.mutation.getFieldMask(),Ke.now())):s.set(l.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new DI(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Yc(),i=new Oe((s,a)=>s-a),o=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Jt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||le()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=fM();h.forEach(g=>{if(!o.has(g)){let y=_M(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):x.resolve(co()),a=Xc,u=o;return s.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,le())).next(h=>({batchId:a,changes:hM(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=Gc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Gc();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{let l=function(p,g){return new di(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,gn.newInvalidDocument(h)))});let a=Gc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Zc(h.mutation,l,Jt.empty(),Ke.now()),Vf(n,l)&&(a=a.insert(u,l))}),a})}};var CI=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return x.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Bn(i.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:Aq(i.bundledQuery),readTime:Bn(i.readTime)}}(n)),x.resolve()}};var SI=class{constructor(){this.overlays=new Oe(G.comparator),this.kr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=co();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=co(),o=n.length+1,s=new G(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Oe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=co(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=co(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new cI(n,r));let o=this.kr.get(n);o===void 0&&(o=le(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var AI=class{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var au=class{constructor(){this.qr=new rt(qe.Qr),this.$r=new rt(qe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new qe(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new qe(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new G(new Ne([])),r=new qe(n,e),i=new qe(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new G(new Ne([])),r=new qe(n,e),i=new qe(n,e+1),o=le();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new qe(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},qe=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return G.comparator(e.key,n.key)||oe(e.Hr,n.Hr)}static Ur(e,n){return oe(e.Hr,n.Hr)||G.comparator(e.key,n.key)}};var RI=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new rt(qe.Qr)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new sI(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new qe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,n){return x.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?wE:this.er-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new qe(n,0),i=new qe(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rt(oe);return n.forEach(i=>{let o=new qe(i,0),s=new qe(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),x.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let s=new qe(new G(o),0),a=new rt(oe);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),x.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ve(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return x.forEach(n.mutations,i=>{let o=new qe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new qe(n,0),i=this.Yr.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var NI=class{constructor(e){this.ni=e,this.docs=function(){return new Oe(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():gn.newInvalidDocument(n))}getEntries(e,n){let r=Dr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():gn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Dr(),s=n.path,a=new G(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Nz(Rz(h),r)<=0||(i.has(h.key)||Vf(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,n,r,i){K(9500)}ri(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new MI(this)}getSize(e){return x.resolve(this.size)}},MI=class extends TI{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var PI=class{constructor(e){this.persistence=e,this.ii=new Tr(n=>SE(n),AE),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.si=0,this.oi=new au,this.targetCount=0,this._i=su.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),x.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new su(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.hr(n),x.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.oi.containsKey(n))}};var gf=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new EE(0),this.ci=!1,this.ci=!0,this.li=new AI,this.referenceDelegate=e(this),this.hi=new PI(this),this.indexManager=new vI,this.remoteDocumentCache=function(i){return new NI(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new yI(n),this.Ti=new CI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new RI(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new xI(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return x.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},xI=class extends H_{constructor(e){super(),this.currentSequenceNumber=e}},kI=class t{constructor(e){this.persistence=e,this.Ai=new au,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw K(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),x.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.mi,r=>{let i=G.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,ee.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return x.or([()=>x.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},mf=class t{constructor(e,n){this.persistence=e,this.gi=new Tr(r=>kz(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Nq(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return x.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return x.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?x.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ee.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),x.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),x.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Yh(e.data.value)),n}Sr(e,n,r){return x.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var OI=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=le(),i=le();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var FI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var LI=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return s0()?8:Pz(tt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new FI;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Ps()<=ce.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",xs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),x.resolve()):(Ps()<=ce.DEBUG&&V("QueryEngine","Query:",xs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ps()<=ce.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",xs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jn(n))):x.resolve())}ps(e,n){if(eN(n))return x.resolve(null);let r=jn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=cf(n,null,"F"),r=jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=le(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,cf(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return eN(n)||i.isEqual(ee.min())?x.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?x.resolve(null):(Ps()<=ce.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xs(n)),this.vs(e,s,n,Az(i,Xc)).next(a=>a))})}bs(e,n){let r=new rt(lM(e));return n.forEach((i,o)=>{Vf(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Ps()<=ce.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",xs(n)),this.gs.getDocumentsMatchingQuery(e,n,po.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var PE="LocalStore",Mq=3e8,VI=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Oe(oe),this.Ms=new Tr(o=>SE(o),AE),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bI(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function Pq(t,e,n,r){return new VI(t,e,n,r)}function NM(t,e){return _(this,null,function*(){let n=Y(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=le();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function xq(t,e){let n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,g=p.keys(),y=x.resolve();return g.forEach(w=>{y=y.next(()=>h.getEntry(u,w)).next(A=>{let R=l.docVersions.get(w);ve(R!==null,48541),A.version.compareTo(R)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=le();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function MM(t){let e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function kq(t,e){let n=Y(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(yt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(A,R,O){return A.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=Mq?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(g,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=Dr(),l=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Oq(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(ee.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function Oq(t,e,n){let r=le(),i=le();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Dr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V(PE,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function Fq(t,e){let n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=wE),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Lq(t,e){let n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new ou(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function jI(t,e,n){return _(this,null,function*(){let r=Y(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ea(s))throw s;V(PE,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function fN(t,e,n){let r=Y(t),i=ee.min(),o=le();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=Y(u),g=p.Ms.get(h);return g!==void 0?x.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)}(r,s,jn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:ee.min(),n?o:le())).next(a=>(Vq(r,Zz(e),a),{documents:a,qs:o})))}function Vq(t,e,n){let r=t.xs.get(e)||ee.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var yf=class{constructor(){this.activeTargetIds=rq()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var UI=class{constructor(){this.Fo=new yf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new yf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var BI=class{xo(e){}shutdown(){}};var pN="ConnectivityMonitor",vf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){V(pN,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){V(pN,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Qh=null;function $I(){return Qh===null?Qh=function(){return 268435456+Math.round(2147483648*Math.random())}():Qh++,"0x"+Qh.toString(16)}var P_="RestConnection",jq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},HI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===of?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=$I(),a=this.Go(e,n.toUriEncodedString());V(P_,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=Qr(l);return this.jo(e,a,u,r,h).then(p=>(V(P_,`Received RPC '${e}' ${s}: `,p),p),p=>{throw ui(P_,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Js}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=jq[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var zI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var mt="WebChannelConnection",qI=class extends HI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=$I();return new Promise((a,u)=>{let l=new C_;l.setWithCredentials(!0),l.listenOnce(S_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Wc.NO_ERROR:let p=l.getResponseJson();V(mt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Wc.TIMEOUT:V(mt,`RPC '${e}' ${s} timed out`),u(new F(M.DEADLINE_EXCEEDED,"Request time out"));break;case Wc.HTTP_ERROR:let g=l.getStatus();if(V(mt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let w=y?.error;if(w&&w.status&&w.message){let A=function(O){let H=O.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(H)>=0?H:M.UNKNOWN}(w.status);u(new F(A,w.message))}else u(new F(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new F(M.UNAVAILABLE,"Connection failed."));break;default:K(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{V(mt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);V(mt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=$I(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=N_(),a=R_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(mt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let g=!1,y=!1,w=new zI({Ho:R=>{y?V(mt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(V(mt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),V(mt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),A=(R,O,H)=>{R.listen(O,B=>{try{H(B)}catch(de){setTimeout(()=>{throw de},0)}})};return A(p,Ms.EventType.OPEN,()=>{y||(V(mt,`RPC '${e}' stream ${i} transport opened.`),w.s_())}),A(p,Ms.EventType.CLOSE,()=>{y||(y=!0,V(mt,`RPC '${e}' stream ${i} transport closed`),w.__(),this.I_(p))}),A(p,Ms.EventType.ERROR,R=>{y||(y=!0,ui(mt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),w.__(new F(M.UNAVAILABLE,"The operation could not be completed")))}),A(p,Ms.EventType.MESSAGE,R=>{var O;if(!y){let H=R.data[0];ve(!!H,16349);let B=H,de=B?.error||((O=B[0])===null||O===void 0?void 0:O.error);if(de){V(mt,`RPC '${e}' stream ${i} received error:`,de);let je=de.status,me=function(E){let T=ze[E];if(T!==void 0)return EM(T)}(je),D=de.message;me===void 0&&(me=M.INTERNAL,D="Unknown error status: "+je+" with message "+de.message),y=!0,w.__(new F(me,D)),p.close()}else V(mt,`RPC '${e}' stream ${i} received:`,H),w.a_(H)}}),A(a,A_.STAT_EVENT,R=>{R.stat===Wh.PROXY?V(mt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Wh.NOPROXY&&V(mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.o_()},0),w}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function x_(){return typeof document<"u"?document:null}function jf(t){return new hI(t,!0)}var _f=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var gN="PersistentStream",If=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new _f(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return _(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return _(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return _(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Ir(n.toString()),Ir("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new F(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>_(this,null,function*(){this.state=0,this.start()}))}G_(e){return V(gN,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(V(gN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},WI=class extends If{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=yq(this.serializer,e),r=function(o){if(!("targetChange"in o))return ee.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?Bn(s.readTime):ee.min()}(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=mI(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=nI(u)?{documents:Iq(o,u)}:{query:Eq(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=wM(o,s.resumeToken);let l=fI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ee.min())>0){a.readTime=ff(o,s.snapshotVersion.toTimestamp());let l=fI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Tq(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=mI(this.serializer),n.removeTarget=e,this.k_(n)}},GI=class extends If{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=_q(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=mI(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>vq(this.serializer,r))};this.k_(n)}};var KI=class{},QI=class extends KI{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,pI(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(M.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,pI(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(M.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},YI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ir(n),this._a=!1):V("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var _o="RemoteStore",ZI=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>_(this,null,function*(){Io(this)&&(V(_o,"Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=Y(u);l.Ia.add(4),yield hu(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield Uf(l)})}(this))}))}),this.Aa=new YI(r,i)}};function Uf(t){return _(this,null,function*(){if(Io(t))for(let e of t.da)yield e(!0)})}function hu(t){return _(this,null,function*(){for(let e of t.da)yield e(!1)})}function PM(t,e){let n=Y(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),FE(n)?OE(n):ta(n).x_()&&kE(n,e))}function xE(t,e){let n=Y(t),r=ta(n);n.Ta.delete(e),r.x_()&&xM(n,e),n.Ta.size===0&&(r.x_()?r.B_():Io(n)&&n.Aa.set("Unknown"))}function kE(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ta(t).H_(e)}function xM(t,e){t.Ra.$e(e),ta(t).Y_(e)}function OE(t){t.Ra=new dI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),ta(t).start(),t.Aa.aa()}function FE(t){return Io(t)&&!ta(t).M_()&&t.Ta.size>0}function Io(t){return Y(t).Ia.size===0}function kM(t){t.Ra=void 0}function Uq(t){return _(this,null,function*(){t.Aa.set("Online")})}function Bq(t){return _(this,null,function*(){t.Ta.forEach((e,n)=>{kE(t,e)})})}function $q(t,e){return _(this,null,function*(){kM(t),FE(t)?(t.Aa.la(e),OE(t)):t.Aa.set("Unknown")})}function Hq(t,e,n){return _(this,null,function*(){if(t.Aa.set("Online"),e instanceof df&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})}(t,e)}catch(r){V(_o,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ef(t,r)}else if(e instanceof Ls?t.Ra.Ye(e):e instanceof lf?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ee.min()))try{let r=yield MM(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(yt.EMPTY_BYTE_STRING,h.snapshotVersion)),xM(o,u);let p=new ou(h.target,u,l,h.sequenceNumber);kE(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){V(_o,"Failed to raise snapshot:",r),yield Ef(t,r)}})}function Ef(t,e,n){return _(this,null,function*(){if(!ea(e))throw e;t.Ia.add(1),yield hu(t),t.Aa.set("Offline"),n||(n=()=>MM(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){V(_o,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield Uf(t)}))})}function OM(t,e){return e().catch(n=>Ef(t,n,e))}function Bf(t){return _(this,null,function*(){let e=Y(t),n=hi(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:wE;for(;zq(e);)try{let i=yield Fq(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,qq(e,i)}catch(i){yield Ef(e,i)}FM(e)&&LM(e)})}function zq(t){return Io(t)&&t.Pa.length<10}function qq(t,e){t.Pa.push(e);let n=hi(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function FM(t){return Io(t)&&!hi(t).M_()&&t.Pa.length>0}function LM(t){hi(t).start()}function Wq(t){return _(this,null,function*(){hi(t).na()})}function Gq(t){return _(this,null,function*(){let e=hi(t);for(let n of t.Pa)e.X_(n.mutations)})}function Kq(t,e,n){return _(this,null,function*(){let r=t.Pa.shift(),i=aI.from(r,e,n);yield OM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Bf(t)})}function Qq(t,e){return _(this,null,function*(){e&&hi(t).Z_&&(yield function(r,i){return _(this,null,function*(){if(function(s){return lq(s)&&s!==M.ABORTED}(i.code)){let o=r.Pa.shift();hi(r).N_(),yield OM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Bf(r)}})}(t,e)),FM(t)&&LM(t)})}function mN(t,e){return _(this,null,function*(){let n=Y(t);n.asyncQueue.verifyOperationInProgress(),V(_o,"RemoteStore received new credentials");let r=Io(n);n.Ia.add(3),yield hu(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield Uf(n)})}function Yq(t,e){return _(this,null,function*(){let n=Y(t);e?(n.Ia.delete(2),yield Uf(n)):e||(n.Ia.add(2),yield hu(n),n.Aa.set("Unknown"))})}function ta(t){return t.Va||(t.Va=function(n,r,i){let o=Y(n);return o.ia(),new WI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:Uq.bind(null,t),e_:Bq.bind(null,t),n_:$q.bind(null,t),J_:Hq.bind(null,t)}),t.da.push(e=>_(null,null,function*(){e?(t.Va.N_(),FE(t)?OE(t):t.Aa.set("Unknown")):(yield t.Va.stop(),kM(t))}))),t.Va}function hi(t){return t.ma||(t.ma=function(n,r,i){let o=Y(n);return o.ia(),new GI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:Wq.bind(null,t),n_:Qq.bind(null,t),ea:Gq.bind(null,t),ta:Kq.bind(null,t)}),t.da.push(e=>_(null,null,function*(){e?(t.ma.N_(),yield Bf(t)):(yield t.ma.stop(),t.Pa.length>0&&(V(_o,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var JI=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function LE(t,e){if(Ir("AsyncQueue",`${e}: ${t}`),ea(t))return new F(M.UNAVAILABLE,`${e}: ${t}`);throw t}var wf=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Gc(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Tf=class{constructor(){this.fa=new Oe(G.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):K(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Qs=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,wf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var XI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},eE=class{constructor(){this.queries=yN(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=Y(n),o=i.queries;i.queries=yN(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new F(M.ABORTED,"Firestore shutting down"))}};function yN(){return new Tr(t=>uM(t),Lf)}function Zq(t,e){return _(this,null,function*(){let n=Y(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new XI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=LE(s,`Initialization of query '${xs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&VE(n)})}function Jq(t,e){return _(this,null,function*(){let n=Y(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Xq(t,e){let n=Y(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&VE(n)}function e3(t,e,n){let r=Y(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function VE(t){t.Da.forEach(e=>{e.next()})}var tE,vN;(vN=tE||(tE={})).Fa="default",vN.Cache="cache";var nE=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Qs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Qs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==tE.Cache}};var Df=class{constructor(e){this.key=e}},bf=class{constructor(e){this.key=e}},rE=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=le(),this.mutatedKeys=le(),this.Xa=lM(e),this.eu=new wf(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new Tf,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=Vf(this.query,p)?p:null,w=!!g&&this.mutatedKeys.has(g.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;g&&y?g.data.isEqual(y.data)?w!==A&&(r.track({type:3,doc:y}),R=!0):this.iu(g,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),R=!0):g&&!y&&(r.track({type:1,doc:g}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>function(y,w){let A=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{At:R})}};return A(y)-A(w)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Qs(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Tf,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=le(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new bf(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Df(r))}),n}uu(e){this.Ha=e.qs,this.Za=le();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Qs.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},jE="SyncEngine",iE=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},oE=class{constructor(e){this.key=e,this.lu=!1}},sE=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Tr(a=>uM(a),Lf),this.Tu=new Map,this.Iu=new Set,this.du=new Oe(G.comparator),this.Eu=new Map,this.Au=new au,this.Ru={},this.Vu=new Map,this.mu=su.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function t3(t,e,n=!0){return _(this,null,function*(){let r=HM(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield VM(r,e,n,!0),i})}function n3(t,e){return _(this,null,function*(){let n=HM(t);yield VM(n,e,!0,!1)})}function VM(t,e,n,r){return _(this,null,function*(){let i=yield Lq(t.localStore,jn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield r3(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&PM(t.remoteStore,i),a})}function r3(t,e,n,r,i){return _(this,null,function*(){t.gu=(p,g,y)=>function(A,R,O,H){return _(this,null,function*(){let B=R.view.nu(O);B.Ds&&(B=yield fN(A.localStore,R.query,!1).then(({documents:D})=>R.view.nu(D,B)));let de=H&&H.targetChanges.get(R.targetId),je=H&&H.targetMismatches.get(R.targetId)!=null,me=R.view.applyChanges(B,A.isPrimaryClient,de,je);return IN(A,R.targetId,me._u),me.snapshot})}(t,p,g,y);let o=yield fN(t.localStore,e,!0),s=new rE(e,o.qs),a=s.nu(o.documents),u=iu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);IN(t,n,l._u);let h=new iE(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function i3(t,e,n){return _(this,null,function*(){let r=Y(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Lf(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield jI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&xE(r.remoteStore,i.targetId),aE(r,i.targetId)}).catch(Xs))):(aE(r,i.targetId),yield jI(r.localStore,i.targetId,!0))})}function o3(t,e){return _(this,null,function*(){let n=Y(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xE(n.remoteStore,r.targetId))})}function s3(t,e,n){return _(this,null,function*(){let r=f3(t);try{let i=yield function(s,a){let u=Y(s),l=Ke.now(),h=a.reduce((y,w)=>y.add(w.key),le()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=Dr(),A=le();return u.Os.getEntries(y,h).next(R=>{w=R,w.forEach((O,H)=>{H.isValidDocument()||(A=A.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,w)).next(R=>{p=R;let O=[];for(let H of a){let B=uq(H,p.get(H.key).overlayedDocument);B!=null&&O.push(new Hn(H.key,B,nM(B.value.mapValue),Un.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,O,a)}).next(R=>{g=R;let O=R.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,R.batchId,O)})}).then(()=>({batchId:g.batchId,changes:hM(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Oe(oe)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,n),yield fu(r,i.changes),yield Bf(r.remoteStore)}catch(i){let o=LE(i,"Failed to persist write");n.reject(o)}})}function jM(t,e){return _(this,null,function*(){let n=Y(t);try{let r=yield kq(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?ve(s.lu,14607):i.removedDocuments.size>0&&(ve(s.lu,42227),s.lu=!1))}),yield fu(n,r,e)}catch(r){yield Xs(r)}})}function _N(t,e,n){let r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=Y(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&VE(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function a3(t,e,n){return _(this,null,function*(){let r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Oe(G.comparator);s=s.insert(o,gn.newNoDocument(o,ee.min()));let a=le().add(o),u=new uf(ee.min(),new Map,new Oe(oe),s,a);yield jM(r,u),r.du=r.du.remove(o),r.Eu.delete(e),UE(r)}else yield jI(r.localStore,e,!1).then(()=>aE(r,e,n)).catch(Xs)})}function c3(t,e){return _(this,null,function*(){let n=Y(t),r=e.batch.batchId;try{let i=yield xq(n.localStore,e);BM(n,r,null),UM(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield fu(n,i)}catch(i){yield Xs(i)}})}function u3(t,e,n){return _(this,null,function*(){let r=Y(t);try{let i=yield function(s,a){let u=Y(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ve(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);BM(r,e,n),UM(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield fu(r,i)}catch(i){yield Xs(i)}})}function UM(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function BM(t,e,n){let r=Y(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function aE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||$M(t,r)})}function $M(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(xE(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),UE(t))}function IN(t,e,n){for(let r of n)r instanceof Df?(t.Au.addReference(r.key,e),l3(t,r)):r instanceof bf?(V(jE,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||$M(t,r.key)):K(19791,{yu:r})}function l3(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(V(jE,"New document in limbo: "+n),t.Iu.add(r),UE(t))}function UE(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new G(Ne.fromString(e)),r=t.mu.next();t.Eu.set(r,new oE(n)),t.du=t.du.insert(n,r),PM(t.remoteStore,new ou(jn(RE(n.path)),r,"TargetPurposeLimboResolution",EE.ue))}}function fu(t,e,n){return _(this,null,function*(){let r=Y(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=OI.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(u,l){return _(this,null,function*(){let h=Y(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,g=>x.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>x.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!ea(p))throw p;V(PE,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),w=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(w);h.Fs=h.Fs.insert(g,A)}}})}(r.localStore,o))})}function d3(t,e){return _(this,null,function*(){let n=Y(t);if(!n.currentUser.isEqual(e)){V(jE,"User change. New user:",e.toKey());let r=yield NM(n.localStore,e);n.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new F(M.CANCELLED,s))})}),o.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield fu(n,r.Bs)}})}function h3(t,e){let n=Y(t),r=n.Eu.get(e);if(r&&r.lu)return le().add(r.key);{let i=le(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function HM(t){let e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=h3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a3.bind(null,e),e.hu.J_=Xq.bind(null,e.eventManager),e.hu.pu=e3.bind(null,e.eventManager),e}function f3(t){let e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=c3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u3.bind(null,e),e}var zM=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=jf(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return Pq(this.persistence,new LI,n.initialUser,this.serializer)}Du(n){return new gf(kI.Vi,this.serializer)}bu(n){return new UI}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),cE=class extends zM{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){ve(this.persistence.referenceDelegate instanceof mf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new EI(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new gf(r=>mf.Vi(r,n),this.serializer)}};var p3=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>_N(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=d3.bind(null,this.syncEngine),yield Yq(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new eE}()}createDatastore(n){let r=jf(n.databaseInfo.databaseId),i=function(s){return new qI(s)}(n.databaseInfo);return function(s,a,u,l){return new QI(s,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,a,u){return new ZI(i,o,s,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>_N(this.syncEngine,r,0),function(){return vf.C()?new vf:new BI}())}createSyncEngine(n,r){return function(o,s,a,u,l,h,p){let g=new sE(o,s,a,u,l,h);return p&&(g.fu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield function(o){return _(this,null,function*(){let s=Y(o);V(_o,"RemoteStore shutting down."),s.Ia.add(5),yield hu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var uE=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ir("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var fi="FirestoreClient",lE=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=nt.UNAUTHENTICATED,this.clientId=Jc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){V(fi,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V(fi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=LE(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function k_(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),V(fi,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield NM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{ui("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{V("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{ui("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function EN(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield g3(t);V(fi,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>mN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>mN(e.remoteStore,i)),t._onlineComponents=e})}function g3(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V(fi,"Using user provided OfflineComponentProvider");try{yield k_(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ui("Error using user provided cache. Falling back to memory cache: "+n),yield k_(t,new zM)}}else V(fi,"Using default OfflineComponentProvider"),yield k_(t,new cE(void 0));return t._offlineComponents})}function qM(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(V(fi,"Using user provided OnlineComponentProvider"),yield EN(t,t._uninitializedComponentsProvider._online)):(V(fi,"Using default OnlineComponentProvider"),yield EN(t,new p3))),t._onlineComponents})}function m3(t){return qM(t).then(e=>e.syncEngine)}function wN(t){return _(this,null,function*(){let e=yield qM(t),n=e.eventManager;return n.onListen=t3.bind(null,e.syncEngine),n.onUnlisten=i3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=n3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=o3.bind(null,e.syncEngine),n})}function WM(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var TN=new Map;var GM="firestore.googleapis.com",DN=!0,Cf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GM,this.ssl=DN}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:DN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=RM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Rq)throw new F(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Cz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ys=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new O_;switch(r.type){case"firstParty":return new j_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=TN.get(n);r&&(V("ComponentProvider","Removing Datastore"),TN.delete(n),r.terminate())}(this),Promise.resolve()}};function KM(t,e,n,r={}){var i;t=Ln(t,Ys);let o=Qr(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(yh(`https://${u}`),vh("Firestore",!0)),s.host!==GM&&s.host!==u&&ui("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Pn(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=nt.MOCK_USER;else{h=e0(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new F(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new nt(g)}t._authCredentials=new F_(new Xh(h,p))}}var pi=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},it=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(du(n,t._jsonSchema))return new t(e,r||null,new G(Ne.fromString(n.referencePath)))}};it._jsonSchemaVersion="firestore/documentReference/1.0",it._jsonSchema={type:Ge("string",it._jsonSchemaVersion),referencePath:Ge("string")};var oi=class t extends pi{constructor(e,n,r){super(e,n,RE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new G(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function QM(t,e,...n){if(t=Ve(t),PN("collection","path",e),t instanceof Ys){let r=Ne.fromString(e,...n);return BR(r),new oi(t,null,r)}{if(!(t instanceof it||t instanceof oi))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ne.fromString(e,...n));return BR(r),new oi(t.firestore,null,r)}}function BE(t,e,...n){if(t=Ve(t),arguments.length===1&&(e=Jc.newId()),PN("doc","path",e),t instanceof Ys){let r=Ne.fromString(e,...n);return UR(r),new it(t,null,new G(r))}{if(!(t instanceof it||t instanceof oi))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ne.fromString(e,...n));return UR(r),new it(t.firestore,t instanceof oi?t.converter:null,new G(r))}}var bN="AsyncQueue",Sf=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new _f(this,"async_queue_retry"),this.oc=()=>{let r=x_();r&&V(bN,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=x_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=x_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new _r;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return _(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ea(e))throw e;V(bN,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ir("INTERNAL UNHANDLED ERROR: ",CN(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=JI.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&K(47125,{hc:CN(this.tc)})}verifyOperationInProgress(){}Pc(){return _(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function CN(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function SN(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var br=class extends Ys{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Sf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Sf(e),this._firestoreClient=void 0,yield e}})}};function YM(t,e){let n=typeof t=="object"?t:no(),r=typeof t=="string"?t:e||of,i=Cs(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=XA("firestore");o&&KM(i,...o)}return i}function ZM(t){if(t._terminated)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||y3(t),t._firestoreClient}function y3(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,h){return new z_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,WM(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new lE(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var si=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(yt.fromBase64String(e))}catch(n){throw new F(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(du(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};si._jsonSchemaVersion="firestore/bytes/1.0",si._jsonSchema={type:Ge("string",si._jsonSchemaVersion),bytes:Ge("string")};var Zs=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var cu=class{constructor(e){this._methodName=e}};var ai=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(du(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};ai._jsonSchemaVersion="firestore/geoPoint/1.0",ai._jsonSchema={type:Ge("string",ai._jsonSchemaVersion),latitude:Ge("number"),longitude:Ge("number")};var ci=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(du(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new F(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ci._jsonSchemaVersion="firestore/vectorValue/1.0",ci._jsonSchema={type:Ge("string",ci._jsonSchemaVersion),vectorValues:Ge("object")};var v3=/^__.*__$/,dE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hn(e,this.data,this.fieldMask,n,this.fieldTransforms):new vo(e,this.data,n,this.fieldTransforms)}},Af=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Hn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function JM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ec:t})}}var hE=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Nf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(JM(this.Ec)&&v3.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},fE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jf(e)}Dc(e,n,r,i=!1){return new hE({Ec:e,methodName:n,bc:r,path:Wt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function $f(t){let e=t._freezeSettings(),n=jf(t._databaseId);return new fE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function XM(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);$E("Data must be an object, but it was:",s,r);let a=eP(r,s),u,l;if(o.merge)u=new Jt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=pE(e,p,n);if(!s.contains(g))throw new F(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);nP(h,g)||h.push(g)}u=new Jt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new dE(new qt(a),u,l)}var Rf=class t extends cu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function _3(t,e,n,r){let i=t.Dc(1,e,n);$E("Data must be an object, but it was:",i,r);let o=[],s=qt.empty();gi(r,(u,l)=>{let h=HE(e,u,n);l=Ve(l);let p=i.gc(h);if(l instanceof Rf)o.push(h);else{let g=pu(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new Jt(o);return new Af(s,a,i.fieldTransforms)}function I3(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[pE(e,r,n)],u=[i];if(o.length%2!=0)throw new F(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(pE(e,o[g])),u.push(o[g+1]);let l=[],h=qt.empty();for(let g=a.length-1;g>=0;--g)if(!nP(l,a[g])){let y=a[g],w=u[g];w=Ve(w);let A=s.gc(y);if(w instanceof Rf)l.push(y);else{let R=pu(w,A);R!=null&&(l.push(y),h.set(y,R))}}let p=new Jt(l);return new Af(h,p,s.fieldTransforms)}function E3(t,e,n,r=!1){return pu(n,t.Dc(r?4:3,e))}function pu(t,e){if(tP(t=Ve(t)))return $E("Unsupported field value:",e,t),eP(t,e);if(t instanceof cu)return function(r,i){if(!JM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=pu(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ke.fromDate(r);return{timestampValue:ff(i.serializer,o)}}if(r instanceof Ke){let o=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ff(i.serializer,o)}}if(r instanceof ai)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof si)return{bytesValue:wM(i.serializer,r._byteString)};if(r instanceof it){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ME(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ci)return function(s,a){return{mapValue:{fields:{[DE]:{stringValue:bE},[Bs]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return NE(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${kf(r)}`)}(t,e)}function eP(t,e){let n={};return KN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gi(t,(r,i)=>{let o=pu(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function tP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof ai||t instanceof si||t instanceof it||t instanceof cu||t instanceof ci)}function $E(t,e,n){if(!tP(n)||!xN(n)){let r=kf(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function pE(t,e,n){if((e=Ve(e))instanceof Zs)return e._internalPath;if(typeof e=="string")return HE(t,e);throw Nf("Field path arguments must be of type string or ",t,!1,void 0,n)}var w3=new RegExp("[~\\*/\\[\\]]");function HE(t,e,n){if(e.search(w3)>=0)throw Nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zs(...e.split("."))._internalPath}catch{throw Nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new F(M.INVALID_ARGUMENT,a+t+u)}function nP(t,e){return t.some(n=>n.isEqual(e))}var Mf=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new gE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Hf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},gE=class extends Mf{data(){return super.data()}};function Hf(t,e){return typeof e=="string"?HE(t,e):e instanceof Zs?e._internalPath:e._delegate._internalPath}function T3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var uu=class{},lu=class extends uu{};function rP(t,e,...n){let r=[];e instanceof uu&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof mE).length,a=o.filter(u=>u instanceof Pf).length;if(s>1||s>0&&a>0)throw new F(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Pf=class t extends lu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return aP(e._query,n),new pi(e.firestore,e.converter,rI(e._query,n))}_parse(e){let n=$f(e.firestore);return function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){RN(p,h);let w=[];for(let A of p)w.push(AN(u,o,A));g={arrayValue:{values:w}}}else g=AN(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||RN(p,h),g=E3(a,s,p,h==="in"||h==="not-in");return We.create(l,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function iP(t,e,n){let r=e,i=Hf("where",t);return Pf._create(i,r,n)}var mE=class t extends uu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:mn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)aP(s,u),s=rI(s,u)}(e._query,n),new pi(e.firestore,e.converter,rI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var yE=class t extends lu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new F(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new go(o,s)}(e._query,this._field,this._direction);return new pi(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new di(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function oP(t,e="asc"){let n=e,r=Hf("orderBy",t);return yE._create(r,n)}var vE=class t extends lu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new pi(e.firestore,e.converter,cf(e._query,this._limit,this._limitType))}};function sP(t){return Sz("limit",t),vE._create("limit",t,"F")}function AN(t,e,n){if(typeof(n=Ve(n))=="string"){if(n==="")throw new F(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cM(e)&&n.indexOf("/")!==-1)throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ne.fromString(n));if(!G.isDocumentKey(r))throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return KR(t,new G(r))}if(n instanceof it)return KR(t,n._key);throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kf(n)}.`)}function RN(t,e){if(!Array.isArray(t)||t.length===0)throw new F(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aP(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var _E=class{convertValue(e,n="none"){switch(li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return gi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Bs].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Re(s.doubleValue));return new ci(o)}convertGeoPoint(e){return new ai(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Ff(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(tu(e));default:return null}}convertTimestamp(e){let n=Er(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ne.fromString(e);ve(AM(r),9688,{name:e});let i=new sf(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(n)||Ir(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function cP(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var lo=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ho=class t extends Mf{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Vs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Hf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ho._jsonSchemaVersion="firestore/documentSnapshot/1.0",ho._jsonSchema={type:Ge("string",ho._jsonSchemaVersion),bundleSource:Ge("string","DocumentSnapshot"),bundleName:Ge("string"),bundle:Ge("string")};var Vs=class extends ho{data(e={}){return super.data(e)}},js=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new lo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vs(this._firestore,this._userDataWriter,r.key,r,new lo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Vs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new lo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Vs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new lo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:D3(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function D3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:t})}}js._jsonSchemaVersion="firestore/querySnapshot/1.0",js._jsonSchema={type:Ge("string",js._jsonSchemaVersion),bundleSource:Ge("string","QuerySnapshot"),bundleName:Ge("string"),bundle:Ge("string")};var xf=class extends _E{constructor(e){super(),this.firestore=e}convertBytes(e){return new si(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,n)}};function uP(t,e,n){t=Ln(t,it);let r=Ln(t.firestore,br),i=cP(t.converter,e,n);return zf(r,[XM($f(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Un.none())])}function lP(t,e,n,...r){t=Ln(t,it);let i=Ln(t.firestore,br),o=$f(i),s;return s=typeof(e=Ve(e))=="string"||e instanceof Zs?I3(o,"updateDoc",t._key,e,n,r):_3(o,"updateDoc",t._key,e),zf(i,[s.toMutation(t._key,Un.exists(!0))])}function dP(t){return zf(Ln(t.firestore,br),[new ru(t._key,Un.none())])}function hP(t,e){let n=Ln(t.firestore,br),r=BE(t),i=cP(t.converter,e);return zf(n,[XM($f(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Un.exists(!1))]).then(()=>r)}function zE(t,...e){var n,r,i;t=Ve(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||SN(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(SN(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof it)l=Ln(t.firestore,br),h=RE(t._key.path),u={next:p=>{e[s]&&e[s](b3(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=Ln(t,pi);l=Ln(p.firestore,br),h=p._query;let g=new xf(l);u={next:y=>{e[s]&&e[s](new js(l,g,p,y))},error:e[s+1],complete:e[s+2]},T3(t._query)}return function(g,y,w,A){let R=new uE(A),O=new nE(y,R,w);return g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return Zq(yield wN(g),O)})),()=>{R.Ou(),g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return Jq(yield wN(g),O)}))}}(ZM(l),h,a,u)}function zf(t,e){return function(r,i){let o=new _r;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return s3(yield m3(r),i,o)})),o.promise}(ZM(t),e)}function b3(t,e,n){let r=n.docs.get(e._key),i=new xf(t);return new ho(t,i,e._key,r,new lo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Js=i})(Zr),fn(new wt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new br(new L_(r.getProvider("auth-internal")),new U_(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sf(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ke(FR,LR,e),ke(FR,LR,"esm2017")})();var qf=function(){return qf=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},qf.apply(this,arguments)};var A3={includeMetadataChanges:!1};function qE(t,e){return e===void 0&&(e=A3),new J(function(n){var r=zE(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function fP(t){return qE(t,{includeMetadataChanges:!0})}function pP(t,e){return e===void 0&&(e={}),fP(t).pipe(X(function(n){return WE(n,e)}))}function WE(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:qf(qf({},r),(n={},n[e.idField]=t.id,n))}function gP(t){return qE(t,{includeMetadataChanges:!0}).pipe(X(function(e){return e.docs}))}function mP(t,e){return e===void 0&&(e={}),gP(t).pipe(X(function(n){return n.map(function(r){return WE(r,e)})}))}var gu=class{constructor(e){return e}},yP="firestore",GE=class{constructor(){return As(yP)}};var KE=new U("angularfire2.firestore-instances");function R3(t,e){let n=Mc(yP,t,e);return n&&new gu(n)}function N3(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new gu(r)}}var M3={provide:GE,deps:[[new jt,KE]]},P3={provide:gu,useFactory:R3,deps:[[new jt,KE],dr]};function Ate(t,...e){return ke("angularfire",Jr.full,"fst"),Qt([P3,M3,{provide:KE,useFactory:N3(t),multi:!0,deps:[ge,Ze,Xr,io,[new jt,qc],[new jt,Rs],...e]}])}var Rte=Ae(mP,!0);var Nte=Ae(pP,!0);var Mte=Ae(hP,!0,2);var Pte=Ae(QM,!0,2);var xte=Ae(dP,!0,2);var kte=Ae(BE,!0,2);var Ote=Ae(YM,!0);var Fte=Ae(sP,!0,2);var Lte=Ae(oP,!0,2),Vte=Ae(rP,!0,2);var jte=Ae(uP,!0,2);var Ute=Ae(lP,!0,2);var Bte=Ae(iP,!0,2);export{L as a,_e as b,x3 as c,k3 as d,_ as e,Qe as f,Te as g,X as h,wa as i,Cx as j,ht as k,Xu as l,j as m,ID as n,$ as o,Bi as p,U as q,P as r,jt as s,Qt as t,rs as u,u7 as v,l7 as w,d7 as x,h7 as y,Am as z,Ze as A,Et as B,ge as C,f7 as D,bb as E,sr as F,EO as G,p7 as H,Ha as I,be as J,wC as K,Hi as L,Br as M,oL as N,yL as O,cs as P,oy as Q,VL as R,jL as S,UL as T,D7 as U,LC as V,VC as W,sy as X,XL as Y,eV as Z,b7 as _,ay as $,C7 as aa,S7 as ba,BC as ca,$C as da,A7 as ea,R7 as fa,lV as ga,HC as ha,dV as ia,hV as ja,fV as ka,N7 as la,pV as ma,M7 as na,P7 as oa,x7 as pa,k7 as qa,O7 as ra,F7 as sa,L7 as ta,zi as ua,Wa as va,pd as wa,LV as xa,$e as ya,cr as za,IS as Aa,a2 as Ba,l2 as Ca,h2 as Da,f2 as Ea,TS as Fa,N2 as Ga,oj as Ha,Ht as Ia,Xy as Ja,dn as Ka,ph as La,kU as Ma,LU as Na,VU as Oa,zU as Pa,qU as Qa,gh as Ra,GU as Sa,lZ as Ta,XA as Ua,eo as Va,Qr as Wa,yh as Xa,e0 as Ya,vh as Za,t0 as _a,i0 as $a,dZ as ab,zt as bb,KA as cb,hZ as db,fZ as eb,pZ as fb,gZ as gb,mZ as hb,u0 as ib,yZ as jb,Pn as kb,Ac as lb,YA as mb,vZ as nb,_Z as ob,IZ as pb,Ve as qb,wt as rb,ce as sb,xn as tb,fn as ub,Cs as vb,Ot as wb,Zr as xb,no as yb,ke as zb,Jr as Ab,Mc as Bb,As as Cb,Xr as Db,Ae as Eb,dr as Fb,io as Gb,_J as Hb,IJ as Ib,Rs as Jb,zc as Kb,qc as Lb,HX as Mb,zX as Nb,qX as Ob,WX as Pb,GX as Qb,KX as Rb,QX as Sb,Ke as Tb,gu as Ub,Ate as Vb,Rte as Wb,Nte as Xb,Mte as Yb,Pte as Zb,xte as _b,kte as $b,Ote as ac,Fte as bc,Lte as cc,Vte as dc,jte as ec,Ute as fc,Bte as gc};
